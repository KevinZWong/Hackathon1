namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.FormBuilderFormModel=Backbone.Model.extend({initialize:function(n,t){this.settings=t||{};t.fieldModelFunc=t.fieldModel?getFunctionByName(this.settings.fieldModel):awardsCommon.FieldModel;var i=this.get("fields");_.each(this.get("pages"),function(n,t){var r=_(i).filter(function(t){return _(n.fieldIds).contains(t.id)});n.readOnly=_(r).all(function(n){return n.data.readOnly});n.index=t});this.attributes.fields=new awardsCommon.FieldCollection(this.get("fields"),t)},toJSON:function(n){var t=Backbone.Model.prototype.toJSON.call(this,n);return delete t.readOnly,t},getPageId:function(n){var t=_(this.get("pages")).find(function(t){return _.include(t.fieldIds,n)});return t?t.id:null},getFieldById:function(n){return this.get("fields").find(function(t){return t.id==n})}}),function(n){n.extend(n.fn,{formBuilderForm:function(n,t){var r,i;return this.length==0?null:(r=this.is(".formBuilder.form")?this:this.find(".formBuilder.form"),r.length==0)?null:(i=r.data("formBuilderForm"),i)?i:(i=new awardsCommon.widgets.formBuilderForm.FormBuilderFormView({el:r,model:new awardsCommon.widgets.formBuilderForm.FormBuilderFormModel(n,t),settings:t}),this.data("formBuilderForm",i),i.render(),i)}})}(jQuery);namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.FormBuilderFormView=Backbone.View.extend({events:{"click a.breadCrumbLink:not(.selected, .notAccessible)":"onBreadCrumbLinkClicked","change .fieldSection input:radio, .fieldSection input:checkbox, select":"onDependentFieldsParentElementClicked","click .resetRadioListSelectedValues a":"onResetRadioListSelectedValues","focusout section.url input":"onUrlFocusOut","change .address select[name$='.CountryCode']":"onAddressCountryChanged"},initialize:function(){var n=this.$el.closest("form"),t,i;this.$form=n;t=this;n.on("error",this.onFormError);i="disabledUntilFormSaved";n.on("submit",function(){var n=t.$("button.disableOnSubmit").not(":disabled");n.prop("disabled",!0);n.addClass(i)});n.on("save error cancel",function(){var n=t.$("button.disableOnSubmit."+i);n.prop("disabled",!1)});$.templates("textTmpl",this.$("#textTmpl").html());$.templates("emailTmpl",this.$("#emailTmpl").html());$.templates("dropDownListTmpl",this.$("#dropDownListTmpl").html());$.templates("dropDownItemTmpl",this.$("#dropDownItemTmpl").html());$.templates("radioListTmpl",this.$("#radioListTmpl").html());$.templates("radioItemTmpl",this.$("#radioItemTmpl").html());$.templates("checkBoxListTmpl",this.$("#checkBoxListTmpl").html());$.templates("checkBoxItemTmpl",this.$("#checkBoxItemTmpl").html());$.templates("multilineTextTmpl",this.$("#multilineTextTmpl").html());$.templates("numberTmpl",this.$("#numberTmpl").html());$.templates("dateTmpl",this.$("#dateTmpl").html());$.templates("confirmationTmpl",this.$("#confirmationTmpl").html());$.templates("separatorTmpl",this.$("#separatorTmpl").html());$.templates("fileUploadTmpl",this.$("#fileUploadTmpl").html());$.templates("labelTmpl",this.$("#labelTmpl").html());$.templates("detailsTmpl",this.$("#detailsTmpl").html());$.templates("deleteBtnTmpl",this.$("#deleteBtnTmpl").html());$.templates("fieldInfoTmpl",this.$("#fieldInfoTmpl").html());$.templates("sectionAttributesTmpl",this.$("#sectionAttributesTmpl").html());$.templates("inputAttributesTmpl",this.$("#inputAttributesTmpl").html());$.templates("rightTmpl",this.$("#rightTmpl").html());$.templates("breadCrumbTmpl",this.$("#breadCrumbTmpl").html());$.templates("urlTmpl",this.$("#urlTmpl").html());$.templates("addressTmpl",this.$("#addressTmpl").html());$.templates("addressStateTmpl",this.$("#addressStateTmpl").html());$.templates("textFieldLengthCounterTmpl",this.$("#textFieldLengthCounterTmpl").html());$.templates("imisNumberFieldTmpl",this.$("#imisNumberFieldTmpl").html());$.templates("tableFieldTmpl",this.$("#tableFieldTmpl").html());$.templates("digitalSignatureFieldTmpl",this.$("#digitalSignatureFieldTmpl").html());$.templates("phoneNumberFieldTmpl",this.$("#phoneNumberFieldTmpl").html());$.fn.extend({includeSubordinateSections:function(){return this.nextUntil("section[id]","section:not(.control):not(.static)").addBack()}});_(this.settings.customSections).each(function(n){var t=$(n.jsTemplate);t.length>0&&$.templates(n.jsTemplate,t.html())});_(this.settings.overriddenTemplates).each(function(n,t){var i=$(n);i.length>0&&$.templates(t,i.html())});this.templates=_.clone($.templates);this.fieldModels={};this.fieldViews={};this.fieldSections=new Map;this.fieldAliasesIds={};this.model.get("fields").walkTree(function(n){t.fieldAliasesIds[n.get("alias")]=n.id})},render:function(){this.clear();this.renderControlSections("top");this.renderFields();this.renderControlSections("bottom");this.renderStaticSections();this.settings.showAllPages||this.goToFirstPage()},onHiddenOrHiddenByParentChanged:function(n){n.isVisible()?this.showField(n):this.hideField(n);var t=this.getSelectedValuesForField(n);_(this.getDependentFieldsFor(n)).each(function(i){var r=i.get("visibilityCondition").selectedListValueId;i.set({hiddenByParent:!n.isVisible()||!_(t).contains(r)})})},onAddressCountryChanged:function(n){this.updateAddressStateInput(n.target,this.fieldModels[$(n.target).closest("section").attr("data-fieldPath")].get("prefix"))},onWysiwygWithLimitedMaxLengthTextChanged:function(n){this.updateTextLengthCounterForWysiwygField($(n.editor.element.$))},onResetRadioListSelectedValues:function(n,t){t=_.extend({suppressHidingFieldsConfirmation:!1,suppressChangeEvent:!1},t);var i=$(n.target).parents(".resetRadioListSelectedValues"),r=i.closest("section"),o=r.attr("id");if(o){var u=this.fieldModels[r.attr("data-fieldPath")],f=this.getDependentFieldsFor(u,!1),e=function(){i.toggle(!1);var n=i.siblings().find("input[type=radio]:checked");n.prop("checked",!1);t.suppressChangeEvent||n.change();u.set({previousSelectedValueIds:[]});_(f).each(function(n){n.set({hiddenByParent:!0})})};t.suppressHidingFieldsConfirmation?e():this.askToHideFields(f,e)}},renderFields:function(){var i;this.model.readOnly||(this.ensureFormValidatorAttached(),this.initializeValidationMethods());this.settings.hideBreadCrumb||this.renderBreadCrumb();var r=this,n=null,t=this.$("section[data-pageid]:not(.control)");t.length>0?n=t.last():this.$("section.control.topControl").length>0?n=this.$("section.control.topControl:last"):this.$("section.control.bottomControl").length>0&&(n=function(n){r.$("section.control.bottomControl:first").before(n)});i=this.prepareFieldViewModel(this.model.get("fields"),this.model.get("fieldValues"),{prefix:this.settings.fieldPrefix});this.renderContainerFields(i,n);t.remove()},renderContainerFields:function(n,t){this.renderFieldsImpl(_(n).filter(function(n){return!n.get("visibilityCondition")}),n,t)},renderFieldsImpl:function(n,t,i){var r=function(n,u){(u&&(u.isDropDownList()||u.isRadioList())&&(n=_(n).filter(function(n){return!n.get("hiddenByParent")})),u&&_(n).all(function(n){return n.get("hiddenByParent")}))||_(n).each(function(n){i=this.renderField(n,i);n.canHaveDependentFields()&&r.call(this,_(t).filter(function(t){var i=t.get("visibilityCondition");return i&&i.fieldId==n.id&&t.get("rowId")==n.get("rowId")}),n)},this)};r.call(this,n)},renderBreadCrumb:function(){var t=this.$(".formBuilderFormBreadCrumb"),n;t.empty().hide();n=this.getPagesWithVisibleFields();n.length>1&&t.html($.render("breadCrumbTmpl",{pages:n},{templates:this.templates})).show();this.selectBreadCrumb(this.currentPageIndex)},askToHideFields:function(n,t,i){var r=[],f=[],e=this,u;_(n).each(function(n){r.add(n);r=r.concat(e.getDependentFieldsFor(n,!0))});_(r).chain().filter(function(n){return n.isVisible()}).each(function(n){var t=e.getSection(n),i=t.find("input, select, textarea").not(":hidden").add(t.find("textarea.textEditor, input.mediaIdInput")).not(".ignoreOnSubmit, :parents(.ignoreOnSubmit:not(.inEditMode), .hiddenPage)").not(":disabled");(i.hasValue()||n.isTable()&&(t.data("view").hasValue()||t.data("view").hasUnsavedChanges()))&&f.add(n)});f.length>0?(u={callback:t},_.isFunction(i)&&_.extend(u,{cancelCallback:i}),Confirmation.request("Warning: Changing this field will clear fields that data has been provided for. Do you wish to proceed?",u)):t()},clear:function(n){n?this.$("section:not(.control)").remove():this.$("fieldset").empty();this.$(".formBuilderFormBreadCrumb").empty().hide();this.sections=null},showField:function(n){var t=this.getSection(n).includeSubordinateSections();$(t).show().removeClass("hiddenField");n.readOnly||t.hasClass("inEditMode")||$(t).ignoreOnSubmit(!1);n.trigger("shown")},hideField:function(n){this.getSection(n).includeSubordinateSections().hide().ignoreOnSubmit(!0).addClass("hiddenField")},renderField:function(n,t){var s,i,r,k,h,o,d,v,c,f,y;if(n.rendered)return this.getLastCustomOrSelfSectionForField(n);var g=n.get("pageId")||this.model.getPageId(n.id),e=_.extend(n.attributes,{settings:this.settings,pageId:g,fieldPath:n.getPath()}),u,l,a=_(this.settings.customSections).find(function(t){return t.fieldType==n.get("typeName")});a!=null?(u=a.jsTemplate,l=a.onAdded):n.isText()?u="textTmpl":n.isEmail()?u="emailTmpl":n.isMultilineText()?u="multilineTextTmpl":n.isDropDownList()?u="dropDownListTmpl":n.isRadioList()?u="radioListTmpl":n.isCheckBoxList()?u="checkBoxListTmpl":n.isNumber()?u="numberTmpl":n.isDate()?u="dateTmpl":n.isSeparator()?u="separatorTmpl":n.isFileUpload()?u="fileUploadTmpl":n.isUrl()?u="urlTmpl":n.isAddress()?u="addressTmpl":n.isImisNumber()?u="imisNumberFieldTmpl":n.isTable()?u="tableFieldTmpl":n.isDigitalSignature()?u="digitalSignatureFieldTmpl":n.isPhoneNumber()&&(u="phoneNumberFieldTmpl");n.isDropDownList()&&n.get("preFillType")!="None"?e.preFillValues=awardsCommon.widgets.formBuilderForm.geoNamesProvider[n.get("preFillType").firstLetterToLowerCase()]:n.isAddress()&&(s=_.findWhere(awardsCommon.widgets.formBuilderForm.geoNamesProvider.countriesWithStates,{code:n.get("countryCode")})||{},e.countries=awardsCommon.widgets.formBuilderForm.geoNamesProvider.countriesWithStates,e.states=s.states,e.stateGroups=s.stateGroups,e.doesntHaveStates=s.doesntHaveStates);this.extendFieldData(e,n);i=$($.parseHTML($.render(u,e,{templates:this.templates}).trim())).filter(":not(text)");i.find("iframe:not([sandbox])").attr("sandbox","allow-same-origin allow-scripts allow-forms allow-popups");(this.settings.isPreviewMode||n.readOnly)&&i.addClass("ignoreOnSubmit");t&&t.length?_.isFunction(t)?t.call(this,i):t.after(i):this.appendSection(i);this.fieldSections.set(n,i);n.rendered=!0;n.on("change:hidden",this.onHiddenOrHiddenByParentChanged,this);if(n.isDependentField()){n.on("change:hiddenByParent",this.onHiddenOrHiddenByParentChanged,this);n.isVisible()||this.hideField(n)}if(n.isNumber()){var p=n.get("format"),w=i.find("input[name$='.Value']"),b=w.val();(this.settings.isPreviewMode||!n.get("readOnly"))&&i.find("input[name$='.Value']").numeric();p&&b!=""&&w.val(format(p,b));r=new awardsCommon.widgets.formBuilderForm.NumberFieldView({el:i,model:n,formBuilderForm:this})}if(n.isDate()&&(this.renderDatepicker(n,{readOnly:n.readOnly}),r=new awardsCommon.widgets.formBuilderForm.DateFieldView({el:i,model:n,formBuilderForm:this})),n.isMultilineText()&&n.get("isWysiwyg")&&!n.readOnly&&this.renderWysiwygFor(n),k=this,n.isText()?(r=new awardsCommon.widgets.formBuilderForm.TextFieldView({el:i,model:n,formBuilderForm:this}),h=r.getComponent()):n.isMultilineText()&&!n.get("isWysiwyg")&&(h=i.find("textarea")),!this.settings.isFormBuilderMode&&!n.readOnly&&(n.get("maxLength")||n.get("minLength")))if(n.isMultilineText()&&n.get("isWysiwyg")){o=i.find(".textEditor").textEditor();o.on("key",this.onWysiwygWithLimitedMaxLengthTextChanged,this,null,100);o.on("change",this.onWysiwygWithLimitedMaxLengthTextChanged,this,null,100);o.on("dataReady",this.onWysiwygWithLimitedMaxLengthTextChanged,this,null,100);o.on("afterPaste",this.onWysiwygWithLimitedMaxLengthTextChanged,this,null,100)}else h&&$(h).on("keyup",function(n){k.updateTextLengthCounterForWysiwygField($(n.target))}).keyup();return n.isMultilineText()&&(r=new awardsCommon.widgets.formBuilderForm.MultilineTextFieldView({el:i,model:n,formBuilderForm:this})),n.isCheckBoxList()&&(r=new awardsCommon.widgets.formBuilderForm.CheckboxListFieldView({el:i,model:n,formBuilderForm:this})),n.isRadioList()&&(r=new awardsCommon.widgets.formBuilderForm.RadioListFieldView({el:i,model:n,formBuilderForm:this})),n.isDropDownList()&&(r=new awardsCommon.widgets.formBuilderForm.DropDownListFieldView({el:i,model:n,formBuilderForm:this})),n.isEmail()&&(r=new awardsCommon.widgets.formBuilderForm.EmailFieldView({el:i,model:n,formBuilderForm:this})),n.isUrl()&&(r=new awardsCommon.widgets.formBuilderForm.UrlFieldView({el:i,model:n,formBuilderForm:this})),n.isImisNumber()&&(r=new awardsCommon.widgets.formBuilderForm.SingleInputFieldView({el:i,model:n,formBuilderForm:this})),n.isAddress()&&(r=new awardsCommon.widgets.formBuilderForm.AddressFieldView({el:i,model:n,formBuilderForm:this})),n.isUrl()&&this.renderUrlFor(n),n.isFileUpload()&&(d=i.fileUploader(_.extend({params:{owner:this.model.get("name"),isPrivate:!0},disabled:n.readOnly,dontShowDeleteButton:n.readOnly,enableCloudflareStreamsStartEndTimeEditing:!n.readOnly,enableCloudflareStreamCaptionsEditing:!n.readOnly,enforceCloudflareStreamsPlaybackWithinStartEndTime:this.settings.enforceCloudflareStreamsPlaybackWithinStartEndTime,required:!this.model.get("readOnly")&&n.get("required"),allowedFileExtensions:n.get("allowedFileExtensions"),showCaption:n.get("showCaption"),showDocumentPreview:n.get("showDocumentPreview"),showAudioPreview:n.get("showAudioPreview"),showImagePreview:n.get("showImagePreview"),showVideoPreview:n.get("showVideoPreview"),maxFileSize:n.get("maxFileSize"),ownerId:this.model.get("ownerId")},this.settings.mediaInfo)),n.get("mediaId")&&d.renderPreviewWithMediaId(n.get("mediaId")),r=new awardsCommon.widgets.formBuilderForm.FileUploadFieldView({el:i,model:n,formBuilderForm:this})),n.isTable()&&(v=new awardsCommon.widgets.formBuilderForm.TableFieldView({el:this.el,field:n,scope:n.get("prefix")+".FieldValues["+n.id+"]",formBuilderForm:this,redirectToMediaUrl:this.settings.redirectToMediaUrl,redirectToMediaPreviewUrl:this.settings.redirectToMediaPreviewUrl,mediaFileNameUrl:this.settings.mediaFileNameUrl,noFileUploadedUrl:this.settings.tableFieldSettings.noFileUploadedUrl,deleteMultipleMediaUrl:this.settings.mediaInfo.deleteMultipleUrl}),i.data("view",v),r=v),n.isDigitalSignature()&&(c=i.find("input[type='text'].digitalSignature"),f=i.find("div.digitalSignatureContainer"),(n.get("hidden")||n.get("hiddenByParent"))&&f.width((i.closest("fieldset").width()*.95).toFixed()),f.signature({syncFormat:"SVG",syncField:c}),f.signature().bind("signaturechange",function(){c.val(f.signature("isEmpty")?"":f.signature("toSVG"))}),y=c.val(),y&&f.signature("draw",y),i.find("a.clearDigitalSignature").click(function(){f.signature("enable");f.signature("clear")}),(n.readOnly||!f.signature("isEmpty"))&&f.signature("disable")),n.isPhoneNumber()&&(r=new awardsCommon.widgets.formBuilderForm.PhoneNumberFieldView({el:i,initialCountryCode:this.settings.phoneNumberFieldInitialCountryCode,field:n})),r&&(r.render(),this.fieldViews[n.getPath()]=r),n.readOnly||this.addValidationRules(n),l&&(r=callFunction(l,e,i,this),this.fieldViews[n.getPath()]=r),this.settings.onFieldAdded&&callFunction(this.settings.onFieldAdded,e,i,this,r),n.trigger("rendered",i),this.getLastCustomOrSelfSectionForField(n)},getSection:function(n){var t=this.fieldSections.get(n);if(!t&&n.rendered)throw"Section doesn't exist for field with alias '"+n.get("alias")+"'.";return t},buildFieldSectionId:function(n){return"section_"+$.escapeSelector(n)},renderControlSections:function(n){if(this.settings.controlSections){var t=this;_.each(_(this.settings.controlSections).filter(function(t){return t.position.toLowerCase()==n}),function(i){var r=$(i.htmlTemplate).children();r.is("section")&&r.addClass("control "+n+"Control");t.appendSection(r);t.$(".fields fieldset").appendScripts($(i.htmlTemplate));$(i.htmlTemplate).remove()})}},renderStaticSections:function(){if(this.settings.staticSections){var n=this;_.each(this.settings.staticSections,function(t){var i=$($(t.htmlTemplate).html()),r;i.is("section")&&i.addClass("static");t.position.toLowerCase()=="top"?(i.addClass("topStatic"),r=n.$("fieldset section[data-fieldId]:first"),r.before(i)):(i.addClass("bottomStatic"),r=n.$("fieldset section:not(.control):last"),r.after(i))});this.assignPageIdToStaticSections()}},assignPageIdToStaticSections:function(){var n,t,i;this.settings.staticSections&&(n=this.getPagesWithVisibleFields(),n.length)&&(t=_(n).first().id,i=_(n).last().id,_(this.$("section.static")).each(function(n){var r=$(n);r.attr("data-pageId",r.hasClass("topStatic")?t:i)}))},renderDatepicker:function(n,t){var i=n.get("rangeValueToFillWithTodayDate"),r=moment().format(appConfig.dateFormat);this.getSection(n).dateTimePicker({readOnly:t.readOnly,minValue:i&&i.contains("minValue")?r:n.get("minValueUtc")?n.get("minValueUtc").formatDate("{d}"):null,maxValue:i&&i.contains("maxValue")?r:n.get("maxValueUtc")?n.get("maxValueUtc").formatDate("{d}"):null});n.get("valueUtc")&&this.getSection(n).dateTimePicker().setValue(n.get("valueUtc"))},renderWysiwygFor:function(n){var r=this.getSection(n).find("textarea[name$='.Value']"),t={readOnly:n.readOnly,mode:"Restricted",allowUseLinks:this.settings.allowUseLinksInWysiwyg,allowViewSource:this.settings.allowSourceViewForWysiwyg},i;n.isComplexField()&&(t.height=600);i=n.get("allowedHtmlTags");i&&(t=_.extend(t,{allowedHtmlTags:i}));r.textEditor(t)},appendSection:function(n){this.$(".fields fieldset").append(n)},updateTextLengthCounterForWysiwygField:function(n){var r=$(n.closest("section")),u=this.model.get("fields").deepSearch(r.attr("data-fieldId")),t=n.val(),i,f;u.get("isWysiwyg")&&(t=t.withoutHtml());u.get("textLengthCountMode")=="Words"?(f=t.match(appConfig.regexLib.words)||[],i=f.length):i=t.length;r.find(".lengthCounter .currentLength").html(i)},updateAddressStateInput:function(n,t){var u=$(n),e=u.val(),i=_.findWhere(awardsCommon.widgets.formBuilderForm.geoNamesProvider.countriesWithStates,{code:e})||{},f=u.closest("section"),o=$.render("addressStateTmpl",{id:f.attr("data-fieldId"),states:i.states,stateGroups:i.stateGroups,doesntHaveStates:i.doesntHaveStates,prefix:t},{templates:this.templates}),r=f.find("span.state");return r.next().remove(),r.after(o),r.toggle(!i.doesntHaveStates),i.doesntHaveStates?null:r.next()},extendFieldData:function(){},renderComplexFields:function(){},prepareFieldViewModel:function(n,t,i){var u=_(t).groupBy("fieldId"),r=n.map(function(n){var t=n.clone(),r;_.extend(t.attributes,{$valueType:n.get("fieldValueTypeName")},i);t.on("change:hidden",function(t,i){n.set({hidden:i})});return(r=u[n.id],!r||!r.length)?t:(_.extend(t.attributes,_.omit(r[0],"$type"),{readOnly:n.readOnly}),t)});return _(r).chain().filter(function(n){return n.canHaveDependentFields()}).each(function(n){_(r).chain().filter(function(t){return t.has("visibilityCondition")&&t.get("visibilityCondition").fieldId==n.id}).each(function(t){var r=_.clone(t.get("customSectionAttributes")||{}),i,u;r.parentFieldPath=n.getPath();i=t.get("visibilityCondition").selectedListValueId;u=n.isCheckBoxList()?!_(n.get("selectedValueIds")).contains(i):i!=n.get("selectedValueId");t.set({hiddenByParent:u,customSectionAttributes:r})})}),_(r).each(function(n){this.fieldModels[n.getPath()]=n},this),r},getLastCustomOrSelfSectionForField:function(n){return this.getSection(n).nextUntil(".static, .control, .fieldSection").addBack().last()},deleteFieldModel:function(n){var r=n.getPath(),t,i;delete this.fieldModels[r];delete this.fieldViews[r];t=this.getSection(n);t&&t.length&&(this.fieldSections.delete(n),i=t.find("textarea.textEditor"),i.length&&i.textEditor().destroy(),t.remove());this.trigger("fieldModelDeleted",n)},disableListItems:function(){var n=this,t=_(this.model.get("fields").models).pluck("id");_(this.fieldModels).chain().filter(function(n){return n.isList()&&n.isVisible()&&_(t).contains(n.id)}).each(function(t){var i=n.fieldViews[t.getPath()],r=n.getSelectedValuesForField(t);t.isCheckBoxList()?i.model.set({selectedValueIds:r}):(t.isDropDownList()||t.isRadioList())&&i.model.set({selectedValueId:r[0]});i.disableListValues()})}});$.extend(awardsCommon.widgets.formBuilderForm.FormBuilderFormView.prototype,{currentPageIndex:0,changePageById:function(n){var t=this.getAllPages(),i;t.length!=0&&(i=_(t).findIndex(function(t){return t.id==n}),this.changePage(i))},changePage:function(n){if(!this.validateTableFieldRowsWithUnsavedChanges()){this.focusFirstUnsavedTableRow();return}var t=this.getAllPages();t.length!=0&&t[n]&&(this.currentPageIndex=n,this.hidePages(),this.showPage(t[n].id),this.selectBreadCrumb(this.currentPageIndex),this.trigger("pageChanged",this.currentPageIndex,this.$el))},refreshPage:function(){this.changePage(this.currentPageIndex)},goToFirstPage:function(){var n=_.first(this.getPagesWithVisibleFields());n&&this.changePage(n.index)},goToNextPage:function(){var n=this.getPageByCurrentPageIndexOffset(1);n&&this.changePage(n.index)},goToPreviousPage:function(){var n=this.getPageByCurrentPageIndexOffset(-1);n&&this.changePage(n.index)},goToFirstEditablePage:function(){var n=this.getAllPages(),t=this.getPagesWithVisibleFields(),i=_(t).find(function(n){return!n.readOnly});this.changePage(_(n).indexOf(i))},isCurrentPageReadOnly:function(){var n=this.getAllPages(),t=n[this.currentPageIndex];return t.readOnly},isFirstPage:function(){var n=_.first(this.getPagesWithVisibleFields());return this.getAllPages().length==0||n.index===this.currentPageIndex},isLastPage:function(){var n=_.last(this.getPagesWithVisibleFields());return this.getAllPages().length==0||n.index===this.currentPageIndex},showPage:function(n){this.$("section[data-pageId='"+n+"']").removeClass("hiddenPage")},hidePages:function(){this.$("section[data-pageId]").includeSubordinateSections().addClass("hiddenPage")},onBreadCrumbLinkClicked:function(n){n.preventDefault();n.stopImmediatePropagation();var t=parseInt($(n.target).attr("data-pageIndex"));this.changePage(t)},selectBreadCrumb:function(n){this.$(".formBuilderFormBreadCrumb a").removeClass("selected");this.$(".formBuilderFormBreadCrumb").find("a[data-pageIndex="+n+"]").addClass("selected").removeClass("notAccessible")},getAllPages:function(){return this.model.get("pages")},getPagesWithVisibleFields:function(){var n=this.getAllPages(),t=this.model.get("fields");return _.filter(n,function(n){return n.fieldIds.length>0&&t.any(function(t){return _.contains(n.fieldIds,t.id)&&!t.get("hidden")&&!t.isComplexFieldAggregate()})})},getPageByCurrentPageIndexOffset:function(n){var t=this.getPagesWithVisibleFields(),i=_(t).findWhere({index:this.currentPageIndex}),r=_.indexOf(t,i);return t[r+n]},getPageIndexByFieldId:function(n){var t=this.model.getPageId(n);return _(this.getAllPages()).findIndex(function(n){return n.id==t})}});$.extend(awardsCommon.widgets.formBuilderForm.FormBuilderFormView.prototype,{validate:function(n){var r=this.model.get("pages"),u,f,t,o,i;if(r.length==0)return u=this.validateSections(this.$("section[data-pageId]")),u||(this.focusFirstInvalidEl(),this._showWarningIfOnlyHiddenTableNestedFieldsAreInvalid()),f=this.validateTableFieldRowsWithUnsavedChanges(),f||this.focusFirstUnsavedTableRow(),u&&f;else{t=this;function e(n){return t.validateSections(t.$("section[data-pageId='"+r[n].id+"']"),{includeHidden:!0})?t.validateTableFieldRowsWithUnsavedChanges()?!0:(t.focusFirstUnsavedTableRow(),!1):(t.changePage(n),t.focusFirstInvalidEl(),t._showWarningIfOnlyHiddenTableNestedFieldsAreInvalid(),!1)}if(_.isUndefined(n)){for(i=0;i<r.length;i++)if(!e(i))return!1}else{if(o=r[n],!o)throw"Page with index "+n+" doesn't exist. ";for(i=0;i<=n;i++)if(!e(i))return!1}}return!0},validateSections:function(n,t){return this.$el.closest("form").validate().checkElements(n,t||{})},validateTableFieldRowsWithUnsavedChanges:function(){var n=this.hasTableFieldRowsWithUnsavedChanges();return n&&_(this.$("section.table:not(.hidden,.hiddenPage)")).each(function(n){$(n).data("view").highlightRowControlsIfItHasUnsavedChanges()}),!n},hasTableFieldRowsWithUnsavedChanges:function(){return _(this.$("section.table:not(.hidden,.hiddenPage)")).any(function(n){return $(n).data("view").hasUnsavedChanges()})},focusFirstUnsavedTableRow:function(){var n=$(_(this.$("section.table:not(.hidden,.hiddenPage)")).chain().filter(function(n){return!_.isUndefined($(n).data("view").currentRowEdit)}).first().value()).data("view").currentRowEdit.subformFieldSections;this._scrollToElement(n)},focusFirstInvalidEl:function(n){var r=this.$el.closest("form").validate(),t=$(r.errorList[0].element),i;n&&this.changePageById(t.closest("section").data("pageid"));i=t.is(":visible")?t:t.closest("div.view");this._scrollToElement(i);i==t&&t.focus()},onFormError:function(n,t){if(t&&t.formElementErrors&&t.formElementErrors[0]){var f=t.formElementErrors[0].elementName,i=$(this).formBuilderForm(),r=i.model.get("pages"),e=_(r).find(function(n){return _(n.fields).contains(f)}),u=_.indexOf(r,e);u<0||i.changePage(u)}},initializeValidationMethods:function(){var n=this;$.validator.addMethod("phoneNumber",function(t,i){if(this.optional(i))return!0;var r=$(i).closest("section").attr("data-fieldPath"),u=n.fieldViews[r];return u.isValid()},"Phone number is incomplete")},addValidationRules:function(n){var t,i,f,e,h;if(!n.get("readOnly")){if(t=this.getValidatingElement(n),i=this.$el.closest("form").validate(),n.isTable()&&!t[0].name&&t.attr("name")&&(t[0].name=t.attr("name")),this.syncRequiredValidationRules(n),n.isNumber()){t.rules("add",{number:!0});this.addValidationContainer(t);var o=n.get("minValue"),s=n.get("maxValue"),u=n.get("maxPrecision"),r=n.get("format");o&&t.rules("add",{min:o});s&&t.rules("add",{max:s});(u!==null||r)&&t.blur(function(){var n=t.val(),i;if(n!==""){if(u===null){t.val(format(r,n));return}i=n.asFloat(u);t.val(r?format(r,i):i)}})}if(n.isEmail()&&t.addExtendedEmailValidationRule(),(n.isText()||n.isMultilineText())&&(f=n.get("minLength"),e=n.get("maxLength"),t.addTextLengthValidationRules(f,e,n.get("textLengthCountMode")),(f||e)&&this.addValidationContainer(t),n.isText()&&this.fieldViews[n.get("fieldPath")].addValidationRules(t,i)&&this.addValidationContainer(t)),n.isUrl()&&(t.addUrlValidationRule(),this.addValidationContainer(t)),n.isTable()){i.addCustomElementToValidate(t,function(n){return $(n).closest("section").data("view").tableRowData});n.get("required")&&(h=n.get("minRowCount"),t.rules("add",{minRowCount:h,messages:{minRowCount:$.validator.format("Please add at least {0} rows.")}}));t.on("change",function(){i.settings.onfocusout&&i.element(t)});this.addValidationContainer(t)}n.isDigitalSignature()&&(t.siblings(".digitalSignatureContainer").bind("signaturechange",function(){i.settings.onfocusout&&i.element(t)}),i.addCustomValueFunction(t,function(n){return $(n).siblings(".digitalSignatureContainer").signature("isEmpty")?"":"not_empty"}));n.isPhoneNumber()&&(t.rules("add",{phoneNumber:!0}),this.fieldViews[n.get("fieldPath")].addValidationContainer())}},syncRequiredValidationRules:function(n){function r(n,t,i){if(n.enableRequiredValidationRule(t),t&&y.addValidationContainer(n),t&&i)n.on("change",function(){var n=$(this);n.closest("form").validate().element($.escapeSelector("#"+n.attr("id")))})}var s,u,f,h,o,a,c,v;if(!n.rendered)throw"Field '"+n.get("name")+"' is not rendered yet.";var y=this,t=this.getValidatingElement(n),i=n.get("required");if(n.isEmail()&&n.get("confirmationRequired")&&!this.settings.turnOffEmailConfirmations)s=this.$($.escapeSelector("#"+t.attr("id")+"_confirm")),s.rules("add",{equalTo:$.escapeSelector("#"+t.attr("id"))}),s.ignoreOnSubmit().addClass("forceValidation"),r(s,i);else if(n.isCheckBoxList()){if(t.enableAtLeastOneCheckedValidationRule(i),i){u=n.get("minSelectedValueCount");f=n.get("maxSelectedValueCount");u&&t.each(function(){var n=sprintf(u==1?"At least one checked item is required.":"At least %s checked items are required.",u);$(this).rules("add",{minSelectedValueCount:{elements:t,minSelectedValueCount:u},messages:{minSelectedValueCount:n}})});f&&t.each(function(){var n=sprintf(f==1?"A maximum one checked item is permitted.":"A maximum of %s checked items are permitted.",f);$(this).rules("add",{maxSelectedValueCount:{elements:t,maxSelectedValueCount:f},messages:{maxSelectedValueCount:n}})});h=t.last();h.parent().addErrorContainerIfNotExists(h.attr("name"));t.on("change",function(){$(this).closest("form").validate().element($.escapeSelector("#"+h.attr("id")))})}}else if(n.isFileUpload()){var l=this.getSection(n),e=l.find(":file"),p=l.fileUploader();p.setRequiredOption(i);n.get("showCaption")?(o=l.find("input[name$='Caption']"),o.length&&(i?r(o,i):(e.length&&e.rules("add",{required:function(){return o.is(":filled")}}),o.enableRequiredValidationRule(!1)))):(this.addValidationContainer(t),r(e,i),i?e.addClass("required"):e.removeClass("required"))}else if(n.isAddress())this.getSection(n).find("select[name$='CountryCode'], select[name$='State'], input[name$='State'], input[name$='City'], input[name$='Street'], input[name$='Zip']").each(function(){r($(this),i)});else if(n.isPhoneNumber())t.enableRequiredValidationRule(i);else if(n.isRadioList())t.enableRequiredValidationRule(i),a=t.last(),a.parent().addErrorContainerIfNotExists(a.attr("name"));else if(n.isMultilineText()&&!n.readOnly&&n.get("isWysiwyg")&&i){r(t,i);c=t.textEditor();c.on("key",this._validateTextEditor,this,null);c.on("change",this._validateTextEditor,this,null);c.on("afterPaste",this._validateTextEditor,this,null)}else t.each(function(){r($(this),i)});this.trigger("syncRequiredValidationRules",n);n.get("name")&&(v=this.getSection(n).find("label.name"),v.find("span.required").remove(),n.get("required")&&v.append("<span class='required'/>"))},addValidationContainer:function(n){n.addErrorContainerIfNotExists()},ensureFormValidatorAttached:function(){var n=this.$el.closest("form");n.isValidatorAttached()||$.validator.unobtrusive.parse(n)},getValidatingElement:function(n){if(n.isTable()){var t=this.getSection(n).find(".view table[id^='Table-']")[0];return t.form||(t.form=$(t).closest("form")[0]),$(t)}return n.isPhoneNumber()?n.get("readOnly")?$():this.fieldViews[n.get("fieldPath")].$phoneNumberInput:n.isDate()?this.getSection(n).find("input.date"):this.getSection(n).find(".view[name*='Value'], .view *[name*='Value']")},_validateTextEditor:function(n){var t=$(n.editor.element.$);t.closest("form").validate().element($.escapeSelector("#"+t.attr("id")))},_scrollToElement:function(n){$("html, body").scrollTop(n.offset().top-($(window).height()-n.outerHeight(!0))/2)},_showWarningIfOnlyHiddenTableNestedFieldsAreInvalid:function(){this.hasTableFieldRowsWithUnsavedChanges()||_(this.$el.closest("form").validate().errorList).all(function(n){return $(n.element).closest("section").hasClass("tableNestedField")})&&Alert.error("One or more table row fields are not valid.")}});$.extend(awardsCommon.widgets.formBuilderForm.FormBuilderFormView.prototype,{onVisibilityConditionChanged:function(n){var t,i,r;(n.isVisible()?this.renderDependentField(n):this.hideField(n),t=this.model.get("fields"),t.hasDependentFieldsFor(n))&&(i=n.get("visibilityConditionMatch"),r=n.get("selectedValueId"),_(t.getDependentFieldsFor(n)).each(function(n){var t=r==n.get("visibilityCondition").selectedListValueId;n.set({visibilityConditionMatch:i&&t})}))},onDependentFieldsParentElementClicked:function(n,t){this.dependentFieldsParentElementClickedHandler($(n.target),t)},dependentFieldsParentElementClickedHandler:function(n,t){var r,o,s,e;if(t=_.extend({suppressHidingFieldsConfirmation:!1},t),r=n.closest("section"),o=r.attr("id"),o){var i=this.fieldModels[r.attr("data-fieldPath")],f=this.getSelectedValuesForField(i),u=this.getDependentFieldsFor(i,!1);this.renderFieldsImpl(u,u,this.getLastCustomOrSelfSectionForField(i));s=_(u).filter(function(n){return n.isVisible()&&!_(f).contains(n.get("visibilityCondition").selectedListValueId)});e=function(){i.set({previousSelectedValueIds:f});_(u).each(function(n){var t=_(f).contains(n.get("visibilityCondition").selectedListValueId);n.set({hiddenByParent:!t})});i.isRadioList()&&r.find(".listItem").each(function(){var t=$(this);t.find(".resetRadioListSelectedValues").toggle(t.attr("data-listvalueId")==n.val())})};t.suppressHidingFieldsConfirmation?e():this.askToHideFields(s,e,function(){var t=i.get("previousSelectedValueIds")||i.get("selectedValueIds")||[i.get("selectedValueId")];if(i.isDropDownList())n.closest("select").val(t[0]);else if(i.isCheckBoxList()||i.isRadioList())n.attr("checked",!1),_(t).each(function(n){r.find("input[value='"+n+"']").attr("checked",!0).change()});else throw"Unexpected field with type '"+i.get("typeName")+"'.";})}},renderDependentField:function(n){var c=n.collection.allFields||n.collection,l=c.get(n.get("visibilityCondition").fieldId),t=this.getSection(l),u=t.attr("id"),i,h;if(u){var f=_.last(u.split("_")),e=n.get("visibilityCondition").selectedListValueId,o=t.attr("data-path"),s=o?o+"_":"",r=this.$("section[data-path^='"+s+f+"_"+e+"']").includeSubordinateSections().last();r.length||(i=t.next(),r=i.length&&i.hasClass("scoring")?i:t);h=t.attr("data-pageId");n.set({path:s+f+"_"+e+"_"+n.id});n.set({pageId:h});this.renderField(n,r)}},getDependentFieldsFor:function(n,t){var r=_(this.fieldModels).values(),i=_(r).filter(function(t){var i=t.get("visibilityCondition");return i&&i.fieldId==n.id&&t.get("rowId")==n.get("rowId")&&t.get("inEditMode")==n.get("inEditMode")});return t&&(i=_(i).chain().map(function(n){return n.canHaveDependentFields()?this.getDependentFieldsFor(n,t):n},this).flatten().value()),i},getSelectedValuesForField:function(n){return this.getSection(n).find(":checked").map(function(){return $(this).val()}).get()}});$.extend(awardsCommon.widgets.formBuilderForm.FormBuilderFormView.prototype,{onUrlFocusOut:function(n){var t=$(n.target).parents("section.url").attr("data-fieldPath"),i=this.fieldModels[t];this.renderUrlFor(i,$(n.target).val())},renderUrlFor:function(n,t){var i,r,u,o,f,s,e,h;if(t==undefined&&(t=n.attributes.value),i=$(this.getSection(n).find("div.videoContainer")),r=$(this.getSection(n).find("div.linkContainer")),i.html(""),r.html(""),t){if(u=t.match(appConfig.regexLib.youtubeVideoLink),u){o="//www.youtube.com/embed/"+u[1];i.html('<iframe src="'+o+'"><\/iframe>');return}if(f=t.match(appConfig.regexLib.vimeoLink),f){s="//player.vimeo.com/video/"+f[1];i.html('<iframe src="'+s+'"><\/iframe>');return}if(e=t.match(appConfig.regexLib.vrideoLink),e){h="//www.vrideo.com/embed/"+e[1];i.html('<iframe src="'+h+"\" scrolling='no' frameborder='0' allowfullscreen='1'><\/iframe>");return}t.match(appConfig.regexLib.url)&&(t.search(appConfig.regexLib.urlProtocol)!=0&&(t="http://"+t),r.html('<a target="_blank" href="'+t+'">Open Link in New Window<\/a>'))}}});namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.GroupsSettingsView=Backbone.View.extend({initialize:function(n){_.extend(this,n);this.formBuilderForm=this.$el.formBuilderForm()},changeGroupSettings:function(n){this._applyFieldsDefaultSettings();this.applyGroupSettings(n);this.formBuilderForm.assignPageIdToStaticSections();this.formBuilderForm.refreshPage()},applyGroupSettings:function(n){this.affectedFields=[];var i=this,t={};_(n).any()?_(n).each(function(n){i._mergeGroupSettings(t,i.affectedFields,n)}):this._mergeGroupSettings(t,this.affectedFields);_(this.affectedFields).each(function(n){n.set({hidden:t[n.id]=="Hidden"});n.set({required:t[n.id]=="Required"});n.rendered&&!n.get("readOnly")&&i.formBuilderForm.syncRequiredValidationRules(n)});this.formBuilderForm.renderBreadCrumb()},getGroupSettings:function(n){return n=parseInt(n),_(this.model.groupsSettings).find(function(t){return n?_(t.groupItemIds).contains(n):t.isDefaultGroup})},handleTargetItemStateChange:function(n,t){var i=this,r=this._getFieldsToHide(n);this.formBuilderForm.askToHideFields(r,function(){i.changeGroupSettings(n);i.trigger("targetItemChanged")},t);this.clearErrors()},clearErrors:function(){var n=this.$el.closest("form"),t=n.find(".input-validation-error:not([aria-required])"),i=_(t).map(function(t){return n.find('[data-valmsg-for="'+$(t).attr("name")+'"]')});n.clearErrorsForElements(t);n.clearErrorsForElements(i)},_applyFieldsDefaultSettings:function(){if(this.affectedFields.length){var n=this;_(this.affectedFields).each(function(t){var i=_(n.model.fieldsDefaultSettings).findWhere({fieldId:t.id});i&&(t.set({hidden:i.hidden}),t.set({required:i.required},{silent:!0}),t.rendered&&n.formBuilderForm.syncRequiredValidationRules(t))})}},_mergeGroupSettings:function(n,t,i){var r=this;_(this._getGroupSettingsWithMissingFieldsDefaultSettings(i)).each(function(i){var u=r._getFieldById(i.fieldId);u&&(_(t).contains(u)?(i.fieldMode!="Hidden"&&n[i.fieldId]=="Hidden"||i.fieldMode=="Required"&&n[i.fieldId]!="Required")&&(n[i.fieldId]=i.fieldMode):(t.push(u),n[i.fieldId]=i.fieldMode))})},_getGroupSettingsWithMissingFieldsDefaultSettings:function(n){var t=this.getGroupSettings(n),i;return t?(i=_(this.model.fieldsDefaultSettings).chain().filter(function(n){var i=_(t.fieldsSettings).pluck("fieldId");return!_(i).contains(n.fieldId)}).map(function(n){var t;return t=n.hidden?"Hidden":n.required?"Required":"Not required",{fieldId:n.fieldId,fieldMode:t}}).value(),t.fieldsSettings=t.fieldsSettings.concat(i)):null},_getFieldsToHide:function(n){var t=[],i=[],r=this;return _(n).each(function(n){var u=r.getGroupSettings(n);if(!u)return t;_(u.fieldsSettings).each(function(n){var u=r._getFieldById(n.fieldId),f,e;u&&(f=_(i).contains(u.get("id")),e=_(t).contains(u),n.fieldMode!="Hidden"||u.get("hidden")||f||e?(_(t).contains(u)&&t.remove(u),i.add(u.get("id"))):t.add(u))})}),t},_getFieldById:function(n){return this.formBuilderForm.fieldModels[n]}});namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.StatefulFieldBaseView=Backbone.View.extend({initialize:function(n){_.extend(this,n)},setValue:function(n){var t=this.validateValue(n);if(t.error)throw t.error;this.setValueWithoutValidation(n)},setValueWithoutValidation:function(){throw"Not Implemented";},getValueSchema:function(){throw"Not Implemented";},validateValue:function(n){return this.getValueSchema().required().validate(n,{abortEarly:!1,convert:!1})}});namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.SingleInputFieldView=awardsCommon.widgets.formBuilderForm.StatefulFieldBaseView.extend({getComponent:function(){return this.$(".view input[type='text']")},getValue:function(){return this.getComponent().val()},setValueWithoutValidation:function(n){this.getComponent().val(n).change().focusout().blur()},getValueSchema:function(){return Joi.string().allow("",null)}});namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.ListFieldBaseView=awardsCommon.widgets.formBuilderForm.StatefulFieldBaseView.extend({getValueSchema:function(){var n=this.model.get("listValues"),t=n.map(function(n){return n.id}),i=n.map(function(n){return n.value});return Joi.string().valid(t.concat(i))}});namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.AddressFieldView=awardsCommon.widgets.formBuilderForm.StatefulFieldBaseView.extend({getComponent:function(){var n=this.$(".view");return{getStreet:function(){return n.find("input[name$='.Street']")},getLine2:function(){return n.find("input[name$='.Line2']")},getLine3:function(){return n.find("input[name$='.Line3']")},getCity:function(){return n.find("input[name$='.City']")},getCountryCode:function(){return n.find("select[name$='.CountryCode']")},getState:function(){return n.find("[name$='.State']")},getZip:function(){return n.find("input[name$='.Zip']")}}},getValue:function(){var n=this.getComponent();return{street:n.getStreet().val(),line2:n.getLine2().val(),line3:n.getLine3().val(),city:n.getCity().val(),countryCode:n.getCountryCode().val(),state:n.getState().val(),zip:n.getZip().val()}},setValueWithoutValidation:function(n){var t=this.getComponent();n===null?_(t).chain().keys().sort().each(function(n){t[n]().val(null).change()}):_(n).chain().keys().sort().each(function(i){var r=t["get"+i.firstLetterToUpperCase()];r&&r().val(n[i]).change()})},getValueSchema:function(){var n=Joi.string().allow("");return Joi.object({street:n,line2:n,line3:n,city:n,countryCode:n,state:n,zip:n}).allow(null)}});namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.CheckboxListFieldView=awardsCommon.widgets.formBuilderForm.ListFieldBaseView.extend({render:function(){this.disableListValues()},getComponent:function(){return this.$(".view input:checkbox")},getValue:function(){return this.getComponent().filter(":checked").map(function(){return $(this).val()}).get()},setValueWithoutValidation:function(n){var t=this,i=this.model.get("listValues");this.getComponent().each(function(){var r=$(this),u=_(i).findWhere({id:r.val()}),f=u&&(_(n).contains(u.id)||_(n).contains(u.value));(f&&!this.checked||this.checked&&!f)&&(r.prop("checked",f),t.formBuilderForm.dependentFieldsParentElementClickedHandler(r,{suppressHidingFieldsConfirmation:!0}))})},getValueSchema:function(){var n=this.constructor.__super__.getValueSchema.call(this);return Joi.array().items(n)},disableListValues:function(){var t=this,n=this.model.get("selectedValueIds");_(this.model.get("listValues")).chain().filter(function(t){return t.isDisabled&&(!n||!_(n).contains(t.id))}).map(function(n){return n.id}).each(function(n){t.getComponent().filter("input[value='"+n+"']").prop("disabled",!0)})}});namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.DateFieldView=awardsCommon.widgets.formBuilderForm.StatefulFieldBaseView.extend({getComponent:function(){return this.formBuilderForm.getSection(this.model).dateTimePicker()},getValue:function(){return moment(this.getComponent().getValue(!0),this.getDateFormat()).toDate()},setValueWithoutValidation:function(n){var t=this.getComponent();n===null?t.clearValue():t.setValue(moment(n).format(this.getDateFormat()))},getValueSchema:function(){return Joi.date().allow(null)},getDateFormat:function(){return appConfig.dateFormat}});namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.DropDownListFieldView=awardsCommon.widgets.formBuilderForm.ListFieldBaseView.extend({render:function(){this.disableListValues()},getComponent:function(){return this.$(".view select[name$='.SelectedValueId']")},getValue:function(){return this.getComponent().val()},setValueWithoutValidation:function(n){var t=_(this.model.get("listValues")).findWhere({value:n});this.getComponent().val(t?t.id:n).trigger("change",{suppressHidingFieldsConfirmation:!0})},getValueSchema:function(){var n=this.constructor.__super__.getValueSchema.call(this);return n.allow(null)},disableListValues:function(){var n=this,t=this.model.get("selectedValueId");_(this.model.get("listValues")).chain().filter(function(n){return n.isDisabled&&t!=n.id}).map(function(n){return n.id}).each(function(t){n.getComponent().find("option[value='"+t+"']").prop("disabled",!0)})}});namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.FileUploadFieldView=awardsCommon.widgets.formBuilderForm.StatefulFieldBaseView.extend({initialize:function(n){this.constructor.__super__.initialize.call(this,n);this.fileUploader=this.$el.fileUploader();this.isCaptionShown=this.model.get("showCaption")},getComponent:function(){throw"Not Supported";},getValue:function(){var n=this.fileUploader.mediaIdInput.val(),t={mediaId:n?Number(n):undefined};return this.isCaptionShown&&(t.caption=this.getCaptionInput().val()),t},setValueWithoutValidation:function(n){var t=this.fileUploader,i;if(n.mediaId&&t.fileUploaded&&n.mediaId!=this.getValue().mediaId)throw"Cannot change uploaded file.";return n.mediaId&&!t.fileUploaded?(t.hideUploadPanel(),i=this,t.setMediaId(n.mediaId).then(function(){i.getCaptionInput().val(n.caption)})):(this.getCaptionInput().val(n.caption),Promise.resolve())},getValueSchema:function(){return Joi.object({mediaId:Joi.number().integer().min(1),caption:Joi.string().allow("")})},getCaptionInput:function(){return this.$("input[name$='.Caption']")}});namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.MultilineTextFieldView=awardsCommon.widgets.formBuilderForm.StatefulFieldBaseView.extend({getComponent:function(){return this.$(".view textarea")},getValue:function(){var n=this.getComponent();return this.isWysiwyg()?n.textEditor().getData():n.val()},setValueWithoutValidation:function(n){var t=this.getComponent();this.isWysiwyg()?t.textEditor().setData(n):t.val(n)},getValueSchema:function(){return Joi.string().allow("",null)},isWysiwyg:function(){return this.model.get("isWysiwyg")}});namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.NumberFieldView=awardsCommon.widgets.formBuilderForm.SingleInputFieldView.extend({getValue:function(){var n=this.constructor.__super__.getValue.call(this);return n?Number(n):undefined},getValueSchema:function(){var t=this.model,n=Joi.number().allow(null),u=t.get("minValue"),i,r;return _.isNullOrUndefined(u)||(n=n.min(u)),i=t.get("maxValue"),_.isNullOrUndefined(i)||(n=n.max(i)),r=t.get("maxPrecision"),_.isNullOrUndefined(r)||(n=n.precision(r)),n}});namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.RadioListFieldView=awardsCommon.widgets.formBuilderForm.ListFieldBaseView.extend({render:function(){this.disableListValues()},getComponent:function(){return this.$(".view input:radio")},getValue:function(){return this.getComponent().filter(":checked").val()},setValueWithoutValidation:function(n){if(n!=this.getValue()){var t=_(this.model.get("listValues")).findWhere({value:n}),i=t?t.id:n;this.getComponent().filter("[value='"+i+"']").prop("checked",!0).trigger("change",{suppressHidingFieldsConfirmation:!0})}},disableListValues:function(){var n=this,t=this.model.get("selectedValueId");_(this.model.get("listValues")).chain().filter(function(n){return n.isDisabled&&t!=n.id}).map(function(n){return n.id}).each(function(t){n.getComponent().filter("input[value='"+t+"']").prop("disabled",!0)})}});namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.TableFieldView=Backbone.View.extend({initialize:function(n){var i,t;_.extend(this,n);$.templates("tableFieldEditControlsSectionTmpl",this.$("#tableFieldEditControlsSectionTmpl").html());this.events=this.events||{};i="section[data-fieldId='"+this.field.id+"']";this.tableEl=this.$(i+" table");t="click "+i;this.events[t+" button.add"]=this.onAddRowClicked;this.events[t+" a.edit"]=this.onEditRowClicked;this.events[t+" a.remove"]=this.onRemoveRowClicked;this.delegateEvents();this.field.on("change:hidden change:hiddenByParent",this.onHiddenOrHiddenByParentChanged,this);this.arrayIndexSequence=0;this.tableRowData=new Backbone.Collection(_(this.field.get("rows")).chain().map(this.buildTableRow,this).sortBy("id").value());this.tableRowData.on("add change:fieldValues",this.updateRowContent,this);this.tableRowData.on("add remove change:fieldValues",function(){this.tableEl.trigger("change")},this);this.tableRowData.on("add remove",this.toggleAddRowButton,this);this.formBuilderForm.on("pageChanged",function(n){this.formBuilderForm.getPageIndexByFieldId(this.field.id)!=n&&this.cancelCurrentRowEditIfExists()},this);this.nestedFields=n.field.get("fields");this.maxRowCount=n.field.get("maxRowCount");this.rowValueSchema=Joi.object({alias:Joi.string().required().valid(this.nestedFields.map(function(n){return n.get("alias")})),value:Joi.any().required()});this.rowValuesSchema=Joi.array().items(this.rowValueSchema).required()},render:function(){var t=this.tableRowData.chain().map(function(n){return this.mergeFieldsWithRowFieldValues(n,!1)},this).flatten().value(),n;return this.tableFieldSection=this.formBuilderForm.getSection(this.field),this.formBuilderForm.renderContainerFields(t,this.tableFieldSection),n=this,this.dataTable=this.tableFieldSection.find("#Table-"+this.field.id).DataTable({data:this.tableRowData,columnDefs:[{orderable:!1,targets:"_all"}],columns:[{data:"sortOrder",visible:!1},{width:"10%",template:"<div class='reorderCell'><\/div>",visible:!this.field.readOnly},{title:htmlEncode(this.field.get("rowNamePlural"))||"Items",width:"70%",template:"{{:content}}"},{title:"Action",width:"20%",template:"<a class='edit' data-rowId='{{:id}}' href='javascript:void(0)'>Edit<\/a><span> | <\/span><a class='remove' data-rowId='{{:id}}' href='javascript:void(0)' style='color:red'>Remove<\/a>",visible:!this.field.readOnly}],searching:!1,paging:!1,info:!1,order:[[0,"asc"]],rowReorder:{snapX:!0,update:!1,selector:"td:has(div.reorderCell)",enable:!this.field.readOnly},language:{emptyTable:sprintf("No %(rowNamePlural)s have been added. Click on Add %(rowName)s below.",{rowName:htmlEncode(this.field.get("rowName"))||"Item",rowNamePlural:htmlEncode(this.field.get("rowNamePlural"))||"Items"})}}).on("row-reorder",function(t,i){_(i).any()&&n.formBuilderForm.trigger("changed");var r={},u=_(n.tableRowData.pluck("sortOrder")).sortBy();_(i).chain().each(function(t){r[t.oldPosition]=n.tableRowData.findWhere({sortOrder:u[t.oldPosition]})},n).sortBy("oldPosition").each(function(n){this.updateRowSortOrder(r[n.oldPosition],n.newPosition)},n)}),this.toggleAddRowButton(),this.field.get("fields").length||this.tableFieldSection.find("button.add").prop("disabled",!0).attr("title","Table field form doesn't contain any field."),this},onAddRowClicked:function(){this.cancelCurrentRowEditIfExists();this._disableRowReorder();var n=this.buildTableRow({id:uuid.v4(),fieldValues:[]}),t=this.mergeFieldsWithRowFieldValues(n,!0);this.currentRowEdit=new this.subformModificationView({tableFieldSection:this.tableFieldSection,tableFieldId:this.field.id,fieldModels:t,isAdd:!0}).render().on("saved",function(){var i=this._getNextSortOrder();_(t).each(function(n){n.set({sortOrder:i})});this._replaceOldModelsWithNewOne(t);n.set({fieldValues:this._extractRowFieldValues(n.id),sortOrder:i});this.tableRowData.add(n);this.getRowFieldSections(n.id).find("input[name$='.SortOrder'][type='hidden']").val(i);this.trigger("rowAdded");this._enableRowReorder()},this).on("dispose",function(){this.currentRowEdit=null;this.toggleAddRowButton();this._enableRowReorder()},this).on("canceled",function(){this._onAddOrEditCanceled(t);this._enableRowReorder()},this);this.formBuilderForm.renderContainerFields(t,this.tableFieldSection);this.toggleAddRowButton();this.scrollToTopOfSubformModificationForm();this._triggerRowOpenedEvent(n.id)},onEditRowClicked:function(n){n.preventDefault();this.cancelCurrentRowEditIfExists();this._disableRowReorder();var t=$(n.target).attr("data-rowId"),r=this.tableRowData.get(t),u=this.getRowFieldSections(t),i=this.mergeFieldsWithRowFieldValues(r,!0);this.currentRowEdit=new this.subformModificationView({rowId:t,tableFieldId:this.field.id,tableFieldSection:this.tableFieldSection,fieldModels:i}).on("saved",function(){this._replaceOldModelsWithNewOne(i);r.set({fieldValues:this._extractRowFieldValues(t)});this.trigger("rowUpdated");this._enableRowReorder()},this).on("dispose",function(){this.currentRowEdit=null;this.toggleAddRowButton();this._enableRowReorder()},this).on("canceled",function(){this._onAddOrEditCanceled(i);this._enableRowReorder()},this).render();u.detach();this.formBuilderForm.renderContainerFields(i,this.tableFieldSection);this.tableFieldSection.after(u);this.toggleAddRowButton();this.scrollToTopOfSubformModificationForm();this._triggerRowOpenedEvent(t)},onRemoveRowClicked:function(n){n.preventDefault();var t=this;if(t.hasUnsavedChanges()){t.highlightRowControlsIfItHasUnsavedChanges();return}Confirmation.requestDelete({callback:function(){var i=$(n.target).attr("data-rowId");t.removeRowAsync(i).catch(function(){})}})},onHiddenOrHiddenByParentChanged:function(){var n=this.field.isVisible();n||this.cancelCurrentRowEditIfExists();this.getContainerFieldSections().filter(":not(.hiddenField)").ignoreOnSubmit(!n)},buildTableRow:function(n){return new Backbone.Model(_.extend({},n,{id:n.id,content:this.resolveRowContent(n.fieldValues)}))},getContainerFieldSectionSelector:function(n){var t=this.formBuilderForm.buildFieldSectionId(this.field.getPath());return"[id^='"+t+$.escapeSelector(n||"")+"']:not(#"+t+")"},getContainerFieldSections:function(){return this.$(this.getContainerFieldSectionSelector())},getRowFieldSections:function(n){return this.$(this.getContainerFieldSectionSelector("["+n+"]"))},getVisibleRowFieldSections:function(n){return this.getRowFieldSections(n).filter("[data-containerFieldPath='"+$.escapeSelector(this.field.getPath())+"']")},getSubformFields:function(){return this.field.get("fields")},mergeFieldsWithRowFieldValues:function(n,t,i){var r=n.get("sortOrder");return this.formBuilderForm.prepareFieldViewModel(this.getSubformFields(),n.get("fieldValues"),{parentFieldPath:this.field.getPath(),prefix:this.scope+".Rows["+n.id+"]",sortOrder:r,pageId:this.field.get("pageId"),rowId:n.id,inEditMode:t,disableAutocomplete:i,customSectionAttributes:{containerFieldPath:this.field.getPath()}})},updateRowSortOrder:function(n,t){_(this.getVisibleRowFieldSections(n.id).toArray()).each(function(n){$(n).find("input[name$='.SortOrder']").val(t)},this);n.set({sortOrder:t},{reDraw:!1})},updateRowContent:function(n){n.set({content:this.resolveRowContent(n.get("fieldValues"))})},resolveRowContent:function(n){var t=this.field.get("rowTemplate"),i,r;return n.length==0||!t?"":(i=this,r=this.field.get("fields"),_(t.matchAllRegex(appConfig.regexLib.tableFieldRowTemplateFieldValuePlaceholder)).each(function(u){var e=u[0],f=r.get(u[1]),o=u[3];f&&(t=t.replace(e,i.resolveFieldValueForPlaceholder(f,o,n)))}),t)},resolveFieldValueForPlaceholder:function(n,t,i){var p=this.field.get("fields"),r=_(i).findWhere({fieldId:n.id}),a=function(n){var r=n.get("visibilityCondition"),t,u;return r?(t=p.get(r.fieldId),a(t))?!0:(u=_(i).findWhere({fieldId:t.id}),t.isDropDownList()||t.isRadioList())?u.selectedValueId!=r.selectedListValueId:!_(u.selectedValueIds).contains(r.selectedListValueId):!1},u="",s,h,e,c,l;if(!r||a(n))return u;if(t){var f=t.firstLetterToLowerCase(),o=r[f],v=f==="mediaUrl",y=f==="mediaPreviewUrl",w=f==="mediaFileName";_.isNull(o)||_.isUndefined(o)?v||y||w?(s=r.mediaId,u=s?(v?this.redirectToMediaUrl:y?this.redirectToMediaPreviewUrl:this.mediaFileNameUrl).replace("{{:mediaId}}",s):this.noFileUploadedUrl):f=="countryName"&&(h=r.countryCode,h&&(u=_(awardsCommon.widgets.formBuilderForm.geoNamesProvider.countriesWithStates).findWhere({code:h}).name)):u=o}else n.isList()?(e=n.get("listValues"),n.isCheckBoxList()?(c=r.selectedValueIds,c&&(u=_(e).chain().filter(function(n){return _(c).contains(n.id)}).map(function(n){return n.value}).value().join(", "))):(n.isDropDownList()&&(e=awardsCommon.widgets.formBuilderForm.geoNamesProvider[n.get("preFillType").firstLetterToLowerCase()]||e),l=r.selectedValueId,l&&(u=_(e).findWhere({id:l}).value))):n.isDate()&&!_.isNull(r.valueUtc)?u=r.valueUtc.formatDate("{d}"):_.isNull(r.value)||(u=n.isPhoneNumber()?r.value.formatPhoneNumber():r.value);return u},cancelCurrentRowEditIfExists:function(){this.currentRowEdit&&this.currentRowEdit.cancel()},hasValue:function(){return this.tableRowData.length>0},hasUnsavedChanges:function(){return!_.isNull(this.currentRowEdit)&&!_.isUndefined(this.currentRowEdit)},highlightRowControlsIfItHasUnsavedChanges:function(){if(this.hasUnsavedChanges()){var i=this.currentRowEdit.subformFieldSections,n=i.next(),t="input-validation-error";n.find("button.cancel").addClass(t);n.find("button.save").addClass(t)}},toggleAddRowButton:function(){var n=this.tableRowData.length<this.field.get("maxRowCount")&&!this.currentRowEdit,t=this.tableRowData.length>0;this.tableFieldSection.find("button.add.first").toggle(!t&&n);this.tableFieldSection.find("button.add.another").toggle(t&&n)},scrollToTopOfSubformModificationForm:function(){$("html, body").animate({scrollTop:this.tableFieldSection.nextAll("section:visible").first().offset().top-appConfig.verticalScrollOffset},500)},addEmptyRow:function(){var n=this.buildTableRow({id:uuid.v4(),fieldValues:[],sortOrder:this._getNextSortOrder()}),t=this.mergeFieldsWithRowFieldValues(n,!1,!0);return this.formBuilderForm.renderContainerFields(t,this.tableFieldSection),this.getRowFieldSections(n.id).hide(),this.tableRowData.add(n),n.get("sortOrder")},updateRowFieldValues:function(n){var t=this.tableRowData.find(function(t){return t.get("sortOrder")==n});t&&t.set({fieldValues:this._extractRowFieldValues(t.id)})},resolveRowIdBySortOrder:function(n){var t=this.tableRowData.find(function(t){return t.get("sortOrder")==n});return t?t.id:undefined},removeRowAsync:function(n){var t=this;return new Promise(function(i,r){var u=_(t.tableRowData.get(n).get("fieldValues")).chain().filter(function(n){return n.mediaId}).map(function(n){return n.mediaId}).value();u.length?Backbone.post(t.deleteMultipleMediaUrl,{mediaIds:u},{success:function(){t._removeRow(n);i()},error:function(n){r(n.responseJSON.description)}}):(t._removeRow(n),i())})},getComponent:function(){return this},getRowCount:function(){return this.tableRowData.length},addRow:function(n){if(this.getRowCount()==this.maxRowCount)throw"Table already reached maximum allowed row count.";Joi.assert(n,this.rowValuesSchema);var t=this.addEmptyRow(),i=this.resolveRowIdBySortOrder(t),r=this;return _(n).each(function(n){r.setValueInRow(i,n)}),this.updateRowFieldValues(t),t},setValueInRow:function(n,t){var i,u,f,r,o,e;if(Joi.assert(t,this.rowValueSchema),i=this.formBuilderForm,u=i.fieldAliasesIds[t.alias],!u)throw"Failed to find row field by alias '"+t.alias+"'.";if(f=this.currentRowEdit&&(!this.currentRowEdit.rowId||this.currentRowEdit.rowId===n),r=_(i.fieldModels).chain().keys().find(function(t){return t.endsWith("["+n+"]_"+u+(f?"_inEditMode":""))}).value(),!r)throw"Row with id '"+n+"' doesn't exist.";o=i.fieldModels[r];e=i.fieldViews[r];e.setValue(t.value)},clear:function(){var n=this;this.tableRowData.chain().map(function(n){return n.id}).each(function(t){n._removeRow(t)})},_getNextSortOrder:function(){return this.tableRowData.length?this.tableRowData.chain().map(function(n){return n.get("sortOrder")}).max().value()+1:0},_extractRowFieldValues:function(n){var t=this.getSubformFields();return this._extractFieldValueFromObject($("<form>").append(this.getRowFieldSections(n).clone()).toObject(),function(n){return n.constructor.modelType=="awardsCommon.FieldModel"&&t.any(function(t){return t.id==n.fieldId})})},_extractFieldValueFromObject:function(n,t){var r,u,f,i;if(!n)return n;if(r=[],n instanceof Array)for(i=0;i<n.length;i++)u=this._extractFieldValueFromObject(n[i],t),u.length&&(r=r.concat(u));else{if(t(n))return[n];for(f=_(n).chain().keys().filter(function(t){return!_.isFunction(n[t])}).value(),i=0;i<f.length;i++)if(r=this._extractFieldValueFromObject(n[f[i]],t),r)break}return r},_replaceOldModelsWithNewOne:function(n){var t=this;_(n).each(function(n){var r=n.getPath(),f=t.formBuilderForm.fieldViews[r],i,u;delete t.formBuilderForm.fieldModels[r];delete t.formBuilderForm.fieldViews[r];n.set({inEditMode:!1});i=n.getPath();u=t.formBuilderForm.fieldModels[i];u&&t.formBuilderForm.deleteFieldModel(u);n.set({fieldPath:i});t.formBuilderForm.fieldModels[i]=n;t.formBuilderForm.fieldViews[i]=f})},_onAddOrEditCanceled:function(n){var t=this;_(n).each(function(n){t.formBuilderForm.deleteFieldModel(n)})},_disableRowReorder:function(){this.dataTable.rowReorder.disable()},_enableRowReorder:function(){this.dataTable.rowReorder.enable()},_removeRow:function(n){var i=this.tableRowData.get(n).get("sortOrder"),t;this.currentRowEdit&&this.currentRowEdit.rowId===n&&this.cancelCurrentRowEditIfExists();this.tableRowData.remove(n);t=this.getRowFieldSections(n);_(t).each(function(n){var t=$(n).find("textarea.textEditor");t.length&&CKEDITOR.instances[t.attr("id")]&&t.textEditor().destroy()});t.remove();this.tableRowData.chain().filter(function(n){return n.get("sortOrder")>i}).each(function(n){this.updateRowSortOrder(n,n.get("sortOrder")-1)},this)},_triggerRowOpenedEvent:function(n){this.trigger("rowOpened",{rowId:n})}});$.extend(awardsCommon.widgets.formBuilderForm.TableFieldView.prototype,{subformModificationView:Backbone.View.extend({initialize:function(n){_.extend(this,n)},render:function(){this.subformFieldSections=$();_(this.fieldModels).each(function(n){n.on("rendered",this.onFieldRendered,this)},this);this.controlsSection=$.parseHTML($.render("tableFieldEditControlsSectionTmpl",{isAdd:this.isAdd}).trim());var n=$(this.controlsSection);n.attr("data-containerfieldpath",this.options.tableFieldId);n.find("button.save").on("click",this.onSaveClicked.bind(this));n.find("button.cancel").on("click",this.onCancelClicked.bind(this));return this.tableFieldSection.after(this.controlsSection),this},onSaveClicked:function(){this.save()},onCancelClicked:function(){this.cancel()},onAddressCountryChanged:function(n){var i=$(n.target).closest("section").attr("data-fieldPath"),r=_(this.fieldModels).find(function(n){return n.get("fieldPath")==i}),t=awardsCommon.widgets.formBuilderForm.FormBuilderFormView.prototype.updateAddressStateInput(n.target,r.get("prefix"));t!=null&&t.attr("name",t.attr("name")+"_inEditMode")},onFieldRendered:function(n){n.ignoreOnSubmit().addClass("forceValidation");var t=this.getValidator(n),i=n.find("input, select, textarea").filter(function(){return $(this).parents("span.details").length==0});i.each(function(){var f=$(this),n=f.attr("name"),i=n+"_inEditMode",r,e,u,o;f.attr("name",i);r="data-valmsg-for";e=$("["+r+"='"+$.escapeSelector(n)+"']");e.attr(r,i);u=t.settings.rules[n];o=t.settings.messages[n];u&&(delete t.settings.rules[n],delete t.settings.messages[n],t.settings.rules[i]=u,t.settings.messages[i]=o)});n.find("select[name$='.CountryCode_inEditMode']").on("change",this.onAddressCountryChanged.bind(this));this.subformFieldSections=this.subformFieldSections.add(n)},save:function(){var n=this.getValidator();if(!n.checkElements(this.subformFieldSections)){n.enableValidationOnFocusOutOrKeyUpEvents();return}this.finishEdit();this.subformFieldSections.removeClass("forceValidation inEditMode").filter(":not(.hiddenField)").ignoreOnSubmit(!1);this.subformFieldSections.each(function(){var t=function(n,t){n.attr(t,n.attr(t).replace("_inEditMode",""))},n=$(this),i;n.find("[name$='_inEditMode']").each(function(){t($(this),"name")});t(n,"id");i="data-fieldPath";_.isUndefined(n.attr(i))||t(n,i)});this.trigger("saved")},cancel:function(){this.finishEdit();this.trigger("canceled")},finishEdit:function(){var n=this.getValidator();this.subformFieldSections.find("[name$='_inEditMode']").each(function(){delete n.settings.rules[$(this).attr("name")]});_(this.fieldModels).each(function(n){n.off("rendered",this.onFieldRendered,this)},this);$(this.controlsSection).remove();this.trigger("dispose")},getValidator:function(n){var t=n||this.subformFieldSections;return t.closest("form").validate()}})});namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.TextFieldView=awardsCommon.widgets.formBuilderForm.SingleInputFieldView.extend({render:function(){var t=this.getComponent(),n=this.model,i,r;n.get("allowAutocompleteFromExternalSource")&&!n.get("disableAutocomplete")&&(i=this,r=n.get("externalAutocompleteSourceUrl"),t.devbridgeAutocomplete({serviceUrl:r,preventBadQueries:!1,transformResult:function(n){return{suggestions:_(JSON.parse(n)).map(function(n){var t=_.isString(n);return{value:t?n:n.label,data:t?n:n.value}})}},formatResult:function(n){return htmlEncode(n.value)},onSearchStart:function(){t.addClass("autocompleteSpinner")},onSearchComplete:function(){t.removeClass("autocompleteSpinner")},onSelect:function(r){if(n.get("allowUseAutocompleteSuggestionsToSetFieldValuesFromExternalSource")&&r.data){var u=n.get("externalSourceUrlToSetFieldValuesByAutocompleteSuggestion");Backbone.get(u,{data:{value:r.data},showGlobalSpinner:!0,success:function(n){i.validValue=r.value;i._toggleValueIsSelectedFromExternalSourceState(t,!0);i._setFieldValuesFromExternalSource(n.result)}})}}}))},addValidationRules:function(n,t){var u=!1,i=this.model,s=i.get("externalValidationUrl"),f,r,e,o;if(s){n.on("blur",function(){t.settings.onfocusout&&t.element(n)});n.rules("add",{validOnExternalSource:s,messages:{validOnExternalSource:""}});u=!0}if(i.get("allowAutocompleteFromExternalSource")&&i.get("areOnlyExternalSourceValuesAllowed")){f=n.val();f&&(this.validValue=f,this._toggleValueIsSelectedFromExternalSourceState(n,!0));r=this;n.on("change",function(){r._toggleValueIsSelectedFromExternalSourceState(n,r.validValue&&r.validValue===n.val())});e=n.devbridgeAutocomplete();o=e.options.onSelect;e.setOptions({triggerSelectOnValidInput:!1,onSelect:function(i){t.settings.onfocusout&&t.element(n);_.isFunction(o)&&o(i)}});n.rules("add",{selectedFromExternalSource:i.get("externalAutocompleteSourceUrl"),messages:{selectedFromExternalSource:"Please, select one of suggested values."}});this.getValue()&&t.element(n);u=!0}return u},_setFieldValuesFromExternalSource:function(n){var t=this;_(n).each(function(n){n.tableAlias?t._applyDataToTableFieldRow(n.tableAlias,n.fields):t._applyDataToFields(n.fields)})},_applyDataToFields:function(n){this._parseDateFieldValues(n,this.formBuilderForm.model.get("fields"),this.formBuilderForm.fieldAliasesIds);var t=this;_(n).each(function(n){try{var i=t._getFieldView(n.alias);if(!i)throw"Failed to find field with alias '"+n.alias+"'";i.setValue(n.value)}catch(r){console.error(r)}})},_applyDataToTableFieldRow:function(n,t){var u=this.formBuilderForm,f=u.fieldModels[u.fieldAliasesIds[n]],i,r;this._parseDateFieldValues(t,f.get("fields"),u.fieldAliasesIds);i=this._getFieldView(n);i.currentRowEdit?(r=i.currentRowEdit.rowId,r||(r=_(i.currentRowEdit.fieldModels).first().get("rowId")),_(t).each(function(n){i.setValueInRow(r,n)})):i.addRow(t)},_parseDateFieldValues:function(n,t,i){_(n).each(function(n){var r=t.get(i[n.alias]);r&&r.isDate()&&(n.value=new Date(n.value))})},_getFieldView:function(n){return this.formBuilderForm.fieldViews[this.formBuilderForm.fieldAliasesIds[n]]},_toggleValueIsSelectedFromExternalSourceState:function(n,t){n.data("valueIsSelectedFromExternalSource",t)}});namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.EmailFieldView=awardsCommon.widgets.formBuilderForm.SingleInputFieldView.extend({validateValue:function(n){var t=this.constructor.__super__.validateValue.call(this,n);return t.error?t:n?isEmail(n)?{}:{value:n,error:new Error("'value' must be an email")}:{}}});namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.UrlFieldView=awardsCommon.widgets.formBuilderForm.SingleInputFieldView.extend({validateValue:function(n){var t=this.constructor.__super__.validateValue.call(this,n);return t.error?t:n?n.match(appConfig.regexLib.url)?{}:{value:n,error:new Error("'value' must be a uri")}:{}}});namespace("awardsCommon.widgets.formBuilderForm");awardsCommon.widgets.formBuilderForm.PhoneNumberFieldView=awardsCommon.widgets.formBuilderForm.SingleInputFieldView.extend({events:{"input .phoneNumberInput":"onPhoneNumberInputChange","change .phoneNumberInput":"onPhoneNumberInputChange"},initialize:function(n){_.extend(this,n);this.lastCorrectNumberType=intlTelInputUtils.numberType.MOBILE},render:function(){var f=this.field,t=f.get("value"),r,u,n,i;if(f.readOnly)return t&&this.$(".formValue").text(t.formatPhoneNumber()),this;r="us";this.initialCountryCode&&(u=this.initialCountryCode.toLowerCase(),_(intlTelInputGlobals.getCountryData()).any(function(n){return n.iso2==u})&&(r=u));n=this.$phoneNumberInput=this.$(".phoneNumberInput").intlTelInput({dropdownContainer:document.body,initialCountry:r,preferredCountries:["au","ca","fr","it","es","gb","us"]});t&&n.intlTelInput("setNumber",t);i=this;n.on("countrychange",function(){i._syncHiddenInput();var t=n.inputmask("unmaskedvalue");i._setInputMask();setTimeout(function(){n.inputmask("setvalue",t)},0)});return i._setInputMask(),this},onPhoneNumberInputChange:function(){this._syncHiddenInput();this._setInputMask()},isValid:function(){if(this.$phoneNumberInput.inputmask("isComplete"))return!0;var n={it:9,de:9,at:10,nz:8,"in":10,hr:9,id:10}[this.getSelectedCountryCode()];return _.isUndefined(n)?!1:this.$phoneNumberInput.val().match(/\d/g).length>=n},addValidationContainer:function(){this.$(".phoneNumberInputContainer").addErrorContainerIfNotExists(this.$phoneNumberInput.attr("name"))},getComponent:function(){return this.$phoneNumberInput},getSelectedCountryCode:function(){return this.$phoneNumberInput.intlTelInput("getSelectedCountryData").iso2},setCountryCode:function(n){if(_.isNullOrUndefined(n))throw new Error("Country code is not provided.");this.$phoneNumberInput.intlTelInput("setCountry",n)},_setInputMask:function(){var i=this.getSelectedCountryCode(),n=intlTelInputUtils.getNumberType(this._getNumber(),i),r,t;n!=intlTelInputUtils.numberType.FIXED_LINE&&n!=intlTelInputUtils.numberType.MOBILE?n=this.lastCorrectNumberType:this.lastCorrectNumberType=n;r={de:"99999 999999",nz:"99999 9999",id:"999-9999-9999"};t=r[i];_.isUndefined(t)&&(t=intlTelInputUtils.getExampleNumber(i,!0,n).replace(/\d/g,"9"));this.$phoneNumberInput.inputmask({mask:t})},_syncHiddenInput:function(){this.$("[data-value]").val(this._getNumber())},_getNumber:function(){return this.$phoneNumberInput.intlTelInput("getNumber")}});
/*! http://keith-wood.name/signature.html
	Signature plugin for jQuery UI v1.2.0.
	Requires excanvas.js in IE.
	Written by Keith Wood (wood.keith{at}optusnet.com.au) April 2012.
	Available under the MIT (http://keith-wood.name/licence.html) license. 
	Please attribute the author if you use it. */
(function(n){"use strict";var t={options:{distance:0,background:"#fff",color:"#000",thickness:2,guideline:!1,guidelineColor:"#a0a0a0",guidelineOffset:50,guidelineIndent:10,notAvailable:"Your browser doesn't support signing",syncField:null,syncFormat:"JSON",svgStyles:!1,change:null},_create:function(){this.element.addClass(this.widgetFullName||this.widgetBaseClass);try{this.canvas=n('<canvas width="'+this.element.width()+'" height="'+this.element.height()+'">'+this.options.notAvailable+"<\/canvas>")[0];this.element.append(this.canvas)}catch(t){n(this.canvas).remove();this.resize=!0;this.canvas=document.createElement("canvas");this.canvas.setAttribute("width",this.element.width());this.canvas.setAttribute("height",this.element.height());this.canvas.innerHTML=this.options.notAvailable;this.element.append(this.canvas);G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.canvas)}this.ctx=this.canvas.getContext("2d");this._refresh(!0);this._mouseInit()},_refresh:function(t){if(this.resize){var i=n(this.canvas);n("div",this.canvas).css({width:i.width(),height:i.height()})}this.ctx.fillStyle=this.options.background;this.ctx.strokeStyle=this.options.color;this.ctx.lineWidth=this.options.thickness;this.ctx.lineCap="round";this.ctx.lineJoin="round";this.clear(t)},clear:function(n){this.options.disabled||(this.ctx.fillRect(0,0,this.element.width(),this.element.height()),this.options.guideline&&(this.ctx.save(),this.ctx.strokeStyle=this.options.guidelineColor,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(this.options.guidelineIndent,this.element.height()-this.options.guidelineOffset),this.ctx.lineTo(this.element.width()-this.options.guidelineIndent,this.element.height()-this.options.guidelineOffset),this.ctx.stroke(),this.ctx.restore()),this.lines=[],n||this._changed())},_changed:function(t){if(this.options.syncField){var i="";switch(this.options.syncFormat){case"PNG":i=this.toDataURL();break;case"JPEG":i=this.toDataURL("image/jpeg");break;case"SVG":i=this.toSVG();break;default:i=this.toJSON()}n(this.options.syncField).val(i)}this._trigger("change",t,{})},_setOptions:function(){var i,t,r;this._superApply?this._superApply(arguments):n.Widget.prototype._setOptions.apply(this,arguments);i=0;t=!0;for(r in arguments[0])arguments[0].hasOwnProperty(r)&&(i++,t=t&&r==="disabled");(i>1||!t)&&this._refresh()},_mouseCapture:function(){return!this.options.disabled},_mouseStart:function(n){this.offset=this.element.offset();this.offset.left-=document.documentElement.scrollLeft||document.body.scrollLeft;this.offset.top-=document.documentElement.scrollTop||document.body.scrollTop;this.lastPoint=[this._round(n.clientX-this.offset.left),this._round(n.clientY-this.offset.top)];this.curLine=[this.lastPoint];this.lines.push(this.curLine)},_mouseDrag:function(n){var t=[this._round(n.clientX-this.offset.left),this._round(n.clientY-this.offset.top)];this.curLine.push(t);this.ctx.beginPath();this.ctx.moveTo(this.lastPoint[0],this.lastPoint[1]);this.ctx.lineTo(t[0],t[1]);this.ctx.stroke();this.lastPoint=t},_mouseStop:function(n){this.curLine.length===1&&(n.clientY+=this.options.thickness,this._mouseDrag(n));this.lastPoint=null;this.curLine=null;this._changed(n)},_round:function(n){return Math.round(n*100)/100},toJSON:function(){return'{"lines":['+n.map(this.lines,function(t){return"["+n.map(t,function(n){return"["+n+"]"})+"]"})+"]}"},toSVG:function(){var t=this.options.svgStyles?'style="fill: '+this.options.background+';"':'fill="'+this.options.background+'"',i=this.options.svgStyles?'style="fill: none; stroke: '+this.options.color+"; stroke-width: "+this.options.thickness+';"':'fill="none" stroke="'+this.options.color+'" stroke-width="'+this.options.thickness+'"';return'<?xml version="1.0"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" width="'+this.canvas.width+'px" height="'+this.canvas.height+'px">\n\t<g '+t+'>\n\t\t<rect preserveAspectRatio="xMidYMid meet" viewBox = "0 0 '+this.canvas.width+" "+this.canvas.height+'" x="0" y="0" width="'+this.canvas.width+'" height="'+this.canvas.height+'"/>\n\t\t<g '+i+">\n"+n.map(this.lines,function(t){return'\t\t\t<polyline points="'+n.map(t,function(n){return n+""}).join(" ")+'"/>\n'}).join("")+"\t\t<\/g>\n\t<\/g>\n<\/svg>\n"},toDataURL:function(n,t){return this.canvas.toDataURL(n,t)},draw:function(n){this.options.disabled||(this.clear(!0),typeof n=="string"&&n.indexOf("data:")===0?this._drawDataURL(n):typeof n=="string"&&n.indexOf("<svg")>-1?this._drawSVG(n):this._drawJSON(n),this._changed())},_drawJSON:function(t){typeof t=="string"&&(t=n.parseJSON(t));this.lines=t.lines||[];var i=this.ctx;n.each(this.lines,function(){i.beginPath();n.each(this,function(n){i[n===0?"moveTo":"lineTo"](this[0],this[1])});i.stroke()})},_drawSVG:function(t){var r=this.lines=[],i;n(t).find("polyline").each(function(){var t=[];n.each(n(this).attr("points").split(" "),function(n,i){var r=i.split(",");t.push([parseFloat(r[0]),parseFloat(r[1])])});r.push(t)});i=this.ctx;n.each(this.lines,function(){i.beginPath();n.each(this,function(n){i[n===0?"moveTo":"lineTo"](this[0],this[1])});i.stroke()})},_drawDataURL:function(n){var t=new Image,i=this.ctx;t.onload=function(){i.drawImage(this,0,0)};t.src=n},isEmpty:function(){return this.lines.length===0},_destroy:function(){this.element.removeClass(this.widgetFullName||this.widgetBaseClass);n(this.canvas).remove();this.canvas=this.ctx=this.lines=null;this._mouseDestroy()}};n.Widget.prototype._destroy||n.extend(t,{destroy:function(){this._destroy();n.Widget.prototype.destroy.call(this)}});n.Widget.prototype._getCreateOptions===n.noop&&n.extend(t,{_getCreateOptions:function(){return n.metadata&&n.metadata.get(this.element[0])[this.widgetName]}});n.widget("kbw.signature",n.ui.mouse,t);n.kbw.signature.options=n.kbw.signature.prototype.options})(jQuery);
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 20112014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(n){function t(n,t){if(!(n.originalEvent.touches.length>1)){n.preventDefault();var i=n.originalEvent.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null);n.target.dispatchEvent(r)}}if(n.support.touch="ontouchend"in document,n.support.touch){var r,i=n.ui.mouse.prototype,u=i._mouseInit,f=i._mouseDestroy;i._touchStart=function(n){var i=this;!r&&i._mouseCapture(n.originalEvent.changedTouches[0])&&(r=!0,i._touchMoved=!1,t(n,"mouseover"),t(n,"mousemove"),t(n,"mousedown"))};i._touchMove=function(n){r&&(this._touchMoved=!0,t(n,"mousemove"))};i._touchEnd=function(n){r&&(t(n,"mouseup"),t(n,"mouseout"),this._touchMoved||t(n,"click"),r=!1)};i._mouseInit=function(){var t=this;t.element.bind({touchstart:n.proxy(t,"_touchStart"),touchmove:n.proxy(t,"_touchMove"),touchend:n.proxy(t,"_touchEnd")});u.call(t)};i._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:n.proxy(t,"_touchStart"),touchmove:n.proxy(t,"_touchMove"),touchend:n.proxy(t,"_touchEnd")});f.call(t)}}}(jQuery),function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"&&typeof require=="function"?n(require("jquery")):n(jQuery)}(function(n){"use strict";function i(t,r){var u=this;u.element=t;u.el=n(t);u.suggestions=[];u.badQueries=[];u.selectedIndex=-1;u.currentValue=u.element.value;u.timeoutId=null;u.cachedResponse={};u.onChangeTimeout=null;u.onChange=null;u.isLocal=!1;u.suggestionsContainer=null;u.noSuggestionsContainer=null;u.options=n.extend(!0,{},i.defaults,r);u.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"};u.hint=null;u.hintValue="";u.selection=null;u.initialize();u.setOptions(r)}function f(n,t,i){return n.value.toLowerCase().indexOf(i)!==-1}function e(t){return typeof t=="string"?n.parseJSON(t):t}function o(n,t){if(!t)return n.value;var i="("+u.escapeRegExChars(t)+")";return n.value.replace(new RegExp(i,"gi"),"<strong>$1<\/strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")}function s(n,t){return'<div class="autocomplete-group">'+t+"<\/div>"}var u=function(){return{escapeRegExChars:function(n){return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},createNode:function(n){var t=document.createElement("div");return t.className=n,t.style.position="absolute",t.style.display="none",t}}}(),t={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40},r=n.noop;i.utils=u;n.Autocomplete=i;i.defaults={ajaxSettings:{},autoSelectFirst:!1,appendTo:"body",serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:o,formatGroup:s,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:r,onSearchComplete:r,onSearchError:r,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:f,paramName:"query",transformResult:e,showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1};i.prototype={initialize:function(){var t=this,f="."+t.classes.suggestion,e=t.classes.selected,u=t.options,r;t.element.setAttribute("autocomplete","off");t.noSuggestionsContainer=n('<div class="autocomplete-no-suggestion"><\/div>').html(this.options.noSuggestionNotice).get(0);t.suggestionsContainer=i.utils.createNode(u.containerClass);r=n(t.suggestionsContainer);r.appendTo(u.appendTo||"body");u.width!=="auto"&&r.css("width",u.width);r.on("mouseover.autocomplete",f,function(){t.activate(n(this).data("index"))});r.on("mouseout.autocomplete",function(){t.selectedIndex=-1;r.children("."+e).removeClass(e)});r.on("click.autocomplete",f,function(){t.select(n(this).data("index"))});r.on("click.autocomplete",function(){clearTimeout(t.blurTimeoutId)});t.fixPositionCapture=function(){t.visible&&t.fixPosition()};n(window).on("resize.autocomplete",t.fixPositionCapture);t.el.on("keydown.autocomplete",function(n){t.onKeyPress(n)});t.el.on("keyup.autocomplete",function(n){t.onKeyUp(n)});t.el.on("blur.autocomplete",function(){t.onBlur()});t.el.on("focus.autocomplete",function(){t.onFocus()});t.el.on("change.autocomplete",function(n){t.onKeyUp(n)});t.el.on("input.autocomplete",function(n){t.onKeyUp(n)})},onFocus:function(){var n=this;n.fixPosition();n.el.val().length>=n.options.minChars&&n.onValueChange()},onBlur:function(){var t=this,i=t.options,r=t.el.val(),u=t.getQuery(r);t.blurTimeoutId=setTimeout(function(){t.hide();t.selection&&t.currentValue!==u&&(i.onInvalidateSelection||n.noop).call(t.element)},200)},abortAjax:function(){var n=this;n.currentRequest&&(n.currentRequest.abort(),n.currentRequest=null)},setOptions:function(t){var r=this,i=n.extend({},r.options,t);r.isLocal=Array.isArray(i.lookup);r.isLocal&&(i.lookup=r.verifySuggestionsFormat(i.lookup));i.orientation=r.validateOrientation(i.orientation,"bottom");n(r.suggestionsContainer).css({"max-height":i.maxHeight+"px",width:i.width+"px","z-index":i.zIndex});this.options=i},clearCache:function(){this.cachedResponse={};this.badQueries=[]},clear:function(){this.clearCache();this.currentValue="";this.suggestions=[]},disable:function(){var n=this;n.disabled=!0;clearTimeout(n.onChangeTimeout);n.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var t=this,i=n(t.suggestionsContainer),f=i.parent().get(0),a,s;if(f===document.body||t.options.forceFixPosition){var e=t.options.orientation,o=i.outerHeight(),h=t.el.outerHeight(),u=t.el.offset(),r={top:u.top,left:u.left};if(e==="auto"){var v=n(window).height(),c=n(window).scrollTop(),l=-c+u.top-o,y=c+v-(u.top+h+o);e=Math.max(l,y)===l?"top":"bottom"}r.top+=e==="top"?-o:h;f!==document.body&&(a=i.css("opacity"),t.visible||i.css("opacity",0).show(),s=i.offsetParent().offset(),r.top-=s.top,r.top+=f.scrollTop,r.left-=s.left,t.visible||i.css("opacity",a).hide());t.options.width==="auto"&&(r.width=t.el.outerWidth()+"px");i.css(r)}},isCursorAtEnd:function(){var i=this,n=i.el.val().length,r=i.element.selectionStart,t;return typeof r=="number"?r===n:document.selection?(t=document.selection.createRange(),t.moveStart("character",-n),n===t.text.length):!0},onKeyPress:function(n){var i=this;if(!i.disabled&&!i.visible&&n.which===t.DOWN&&i.currentValue){i.suggest();return}if(!i.disabled&&i.visible){switch(n.which){case t.ESC:i.el.val(i.currentValue);i.hide();break;case t.RIGHT:if(i.hint&&i.options.onHint&&i.isCursorAtEnd()){i.selectHint();break}return;case t.TAB:if(i.hint&&i.options.onHint){i.selectHint();return}if(i.selectedIndex===-1){i.hide();return}if(i.select(i.selectedIndex),i.options.tabDisabled===!1)return;break;case t.RETURN:if(i.selectedIndex===-1){i.hide();return}i.select(i.selectedIndex);break;case t.UP:i.moveUp();break;case t.DOWN:i.moveDown();break;default:return}n.stopImmediatePropagation();n.preventDefault()}},onKeyUp:function(n){var i=this;if(!i.disabled){switch(n.which){case t.UP:case t.DOWN:return}clearTimeout(i.onChangeTimeout);i.currentValue!==i.el.val()&&(i.findBestHint(),i.options.deferRequestBy>0?i.onChangeTimeout=setTimeout(function(){i.onValueChange()},i.options.deferRequestBy):i.onValueChange())}},onValueChange:function(){if(this.ignoreValueChange){this.ignoreValueChange=!1;return}var t=this,r=t.options,u=t.el.val(),i=t.getQuery(u);if(t.selection&&t.currentValue!==i&&(t.selection=null,(r.onInvalidateSelection||n.noop).call(t.element)),clearTimeout(t.onChangeTimeout),t.currentValue=u,t.selectedIndex=-1,r.triggerSelectOnValidInput&&t.isExactMatch(i)){t.select(0);return}i.length<r.minChars?t.hide():t.getSuggestions(i)},isExactMatch:function(n){var t=this.suggestions;return t.length===1&&t[0].value.toLowerCase()===n.toLowerCase()},getQuery:function(t){var r=this.options.delimiter,i;return r?(i=t.split(r),n.trim(i[i.length-1])):t},getSuggestionsLocal:function(t){var f=this,r=f.options,e=t.toLowerCase(),o=r.lookupFilter,u=parseInt(r.lookupLimit,10),i;return i={suggestions:n.grep(r.lookup,function(n){return o(n,t,e)})},u&&i.suggestions.length>u&&(i.suggestions=i.suggestions.slice(0,u)),i},getSuggestions:function(t){var u,i=this,r=i.options,f=r.serviceUrl,e,o,s;if(r.params[r.paramName]=t,r.onSearchStart.call(i.element,r.params)!==!1){if(e=r.ignoreParams?null:r.params,n.isFunction(r.lookup)){r.lookup(t,function(n){i.suggestions=n.suggestions;i.suggest();r.onSearchComplete.call(i.element,t,n.suggestions)});return}i.isLocal?u=i.getSuggestionsLocal(t):(n.isFunction(f)&&(f=f.call(i.element,t)),o=f+"?"+n.param(e||{}),u=i.cachedResponse[o]);u&&Array.isArray(u.suggestions)?(i.suggestions=u.suggestions,i.suggest(),r.onSearchComplete.call(i.element,t,u.suggestions)):i.isBadQuery(t)?r.onSearchComplete.call(i.element,t,[]):(i.abortAjax(),s={url:f,data:e,type:r.type,dataType:r.dataType},n.extend(s,r.ajaxSettings),i.currentRequest=n.ajax(s).done(function(n){var u;i.currentRequest=null;u=r.transformResult(n,t);i.processResponse(u,t,o);r.onSearchComplete.call(i.element,t,u.suggestions)}).fail(function(n,u,f){r.onSearchError.call(i.element,t,n,u,f)}))}},isBadQuery:function(n){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,i=t.length;i--;)if(n.indexOf(t[i])===0)return!0;return!1},hide:function(){var t=this,i=n(t.suggestionsContainer);n.isFunction(t.options.onHide)&&t.visible&&t.options.onHide.call(t.element,i);t.visible=!1;t.selectedIndex=-1;clearTimeout(t.onChangeTimeout);n(t.suggestionsContainer).hide();t.signalHint(null)},suggest:function(){if(!this.suggestions.length){this.options.showNoSuggestionNotice?this.noSuggestions():this.hide();return}var t=this,i=t.options,o=i.groupBy,c=i.formatResult,u=t.getQuery(t.currentValue),s=t.classes.suggestion,l=t.classes.selected,r=n(t.suggestionsContainer),a=n(t.noSuggestionsContainer),h=i.beforeRender,f="",e,v=function(n){var t=n.data[o];return e===t?"":(e=t,i.formatGroup(n,e))};if(i.triggerSelectOnValidInput&&t.isExactMatch(u)){t.select(0);return}n.each(t.suggestions,function(n,t){o&&(f+=v(t,u,n));f+='<div class="'+s+'" data-index="'+n+'">'+c(t,u,n)+"<\/div>"});this.adjustContainerWidth();a.detach();r.html(f);n.isFunction(h)&&h.call(t.element,r,t.suggestions);t.fixPosition();r.show();i.autoSelectFirst&&(t.selectedIndex=0,r.scrollTop(0),r.children("."+s).first().addClass(l));t.visible=!0;t.findBestHint()},noSuggestions:function(){var t=this,r=t.options.beforeRender,i=n(t.suggestionsContainer),u=n(t.noSuggestionsContainer);this.adjustContainerWidth();u.detach();i.empty();i.append(u);n.isFunction(r)&&r.call(t.element,i,t.suggestions);t.fixPosition();i.show();t.visible=!0},adjustContainerWidth:function(){var t=this,r=t.options,i,u=n(t.suggestionsContainer);r.width==="auto"?(i=t.el.outerWidth(),u.css("width",i>0?i:300)):r.width==="flex"&&u.css("width","")},findBestHint:function(){var t=this,i=t.el.val().toLowerCase(),r=null;i&&(n.each(t.suggestions,function(n,t){var u=t.value.toLowerCase().indexOf(i)===0;return u&&(r=t),!u}),t.signalHint(r))},signalHint:function(t){var r="",i=this;t&&(r=i.currentValue+t.value.substr(i.currentValue.length));i.hintValue!==r&&(i.hintValue=r,i.hint=t,(this.options.onHint||n.noop)(r))},verifySuggestionsFormat:function(t){return t.length&&typeof t[0]=="string"?n.map(t,function(n){return{value:n,data:null}}):t},validateOrientation:function(t,i){return t=n.trim(t||"").toLowerCase(),n.inArray(t,["auto","bottom","top"])===-1&&(t=i),t},processResponse:function(n,t,i){var r=this,u=r.options;(n.suggestions=r.verifySuggestionsFormat(n.suggestions),u.noCache||(r.cachedResponse[i]=n,u.preventBadQueries&&!n.suggestions.length&&r.badQueries.push(t)),t===r.getQuery(r.currentValue))&&(r.suggestions=n.suggestions,r.suggest())},activate:function(t){var i=this,r,u=i.classes.selected,f=n(i.suggestionsContainer),e=f.find("."+i.classes.suggestion);return(f.find("."+u).removeClass(u),i.selectedIndex=t,i.selectedIndex!==-1&&e.length>i.selectedIndex)?(r=e.get(i.selectedIndex),n(r).addClass(u),r):null},selectHint:function(){var t=this,i=n.inArray(t.hint,t.suggestions);t.select(i)},select:function(n){var t=this;t.hide();t.onSelect(n)},moveUp:function(){var t=this;if(t.selectedIndex!==-1){if(t.selectedIndex===0){n(t.suggestionsContainer).children("."+t.classes.suggestion).first().removeClass(t.classes.selected);t.selectedIndex=-1;t.ignoreValueChange=!1;t.el.val(t.currentValue);t.findBestHint();return}t.adjustScroll(t.selectedIndex-1)}},moveDown:function(){var n=this;n.selectedIndex!==n.suggestions.length-1&&n.adjustScroll(n.selectedIndex+1)},adjustScroll:function(t){var i=this,u=i.activate(t),r,f,o,e;u&&(e=n(u).outerHeight(),r=u.offsetTop,f=n(i.suggestionsContainer).scrollTop(),o=f+i.options.maxHeight-e,r<f?n(i.suggestionsContainer).scrollTop(r):r>o&&n(i.suggestionsContainer).scrollTop(r-i.options.maxHeight+e),i.options.preserveInput||(i.ignoreValueChange=!0,i.el.val(i.getValue(i.suggestions[t].value))),i.signalHint(null))},onSelect:function(t){var i=this,u=i.options.onSelect,r=i.suggestions[t];i.currentValue=i.getValue(r.value);i.currentValue===i.el.val()||i.options.preserveInput||i.el.val(i.currentValue);i.signalHint(null);i.suggestions=[];i.selection=r;n.isFunction(u)&&u.call(i.element,r)},getValue:function(n){var r=this,u=r.options.delimiter,t,i;return u?(t=r.currentValue,i=t.split(u),i.length===1)?n:t.substr(0,t.length-i[i.length-1].length)+n:n},dispose:function(){var t=this;t.el.off(".autocomplete").removeData("autocomplete");n(window).off("resize.autocomplete",t.fixPositionCapture);n(t.suggestionsContainer).remove()}};n.fn.devbridgeAutocomplete=function(t,r){var u="autocomplete";return arguments.length?this.each(function(){var e=n(this),f=e.data(u);typeof t=="string"?f&&typeof f[t]=="function"&&f[t](r):(f&&f.dispose&&f.dispose(),f=new i(this,t),e.data(u,f))}):this.first().data(u)};n.fn.autocomplete||(n.fn.autocomplete=n.fn.devbridgeAutocomplete)}),function(n){typeof module=="object"&&module.exports?module.exports=n(require("jquery"),window,document):typeof define=="function"&&define.amd?define(["jquery"],function(t){n(t,window,document)}):n(jQuery,window,document)}(function(n,t,i,r){"use strict";function y(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function l(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function p(n,t,i){return t&&l(n.prototype,t),i&&l(n,i),n}for(var f,c,e,u=[["Afghanistan ()","af","93"],["Albania (Shqipri)","al","355"],["Algeria ()","dz","213"],["American Samoa","as","1",5,["684"]],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1",6,["264"]],["Antigua and Barbuda","ag","1",7,["268"]],["Argentina","ar","54"],["Armenia ()","am","374"],["Aruba","aw","297"],["Australia","au","61",0],["Austria (sterreich)","at","43"],["Azerbaijan (Azrbaycan)","az","994"],["Bahamas","bs","1",8,["242"]],["Bahrain ()","bh","973"],["Bangladesh ()","bd","880"],["Barbados","bb","1",9,["246"]],["Belarus ()","by","375"],["Belgium (Belgi)","be","32"],["Belize","bz","501"],["Benin (Bnin)","bj","229"],["Bermuda","bm","1",10,["441"]],["Bhutan ()","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina (  )","ba","387"],["Botswana","bw","267"],["Brazil (Brasil)","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1",11,["284"]],["Brunei","bn","673"],["Bulgaria ()","bg","359"],["Burkina Faso","bf","226"],["Burundi (Uburundi)","bi","257"],["Cambodia ()","kh","855"],["Cameroon (Cameroun)","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde (Kabu Verdi)","cv","238"],["Caribbean Netherlands","bq","599",1,["3","4","7"]],["Cayman Islands","ky","1",12,["345"]],["Central African Republic (Rpublique centrafricaine)","cf","236"],["Chad (Tchad)","td","235"],["Chile","cl","56"],["China ()","cn","86"],["Christmas Island","cx","61",2],["Cocos (Keeling) Islands","cc","61",1],["Colombia","co","57"],["Comoros ( )","km","269"],["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)","cd","243"],["Congo (Republic) (Congo-Brazzaville)","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["Cte dIvoire","ci","225"],["Croatia (Hrvatska)","hr","385"],["Cuba","cu","53"],["Curaao","cw","599",0],["Cyprus ()","cy","357"],["Czech Republic (esk republika)","cz","420"],["Denmark (Danmark)","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1",13,["767"]],["Dominican Republic (Repblica Dominicana)","do","1",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt ()","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea (Guinea Ecuatorial)","gq","240"],["Eritrea","er","291"],["Estonia (Eesti)","ee","372"],["Ethiopia","et","251"],["Falkland Islands (Islas Malvinas)","fk","500"],["Faroe Islands (Froyar)","fo","298"],["Fiji","fj","679"],["Finland (Suomi)","fi","358",0],["France","fr","33"],["French Guiana (Guyane franaise)","gf","594"],["French Polynesia (Polynsie franaise)","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia ()","ge","995"],["Germany (Deutschland)","de","49"],["Ghana (Gaana)","gh","233"],["Gibraltar","gi","350"],["Greece ()","gr","30"],["Greenland (Kalaallit Nunaat)","gl","299"],["Grenada","gd","1",14,["473"]],["Guadeloupe","gp","590",0],["Guam","gu","1",15,["671"]],["Guatemala","gt","502"],["Guernsey","gg","44",1,["1481","7781","7839","7911"]],["Guinea (Guine)","gn","224"],["Guinea-Bissau (Guin Bissau)","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong ()","hk","852"],["Hungary (Magyarorszg)","hu","36"],["Iceland (sland)","is","354"],["India ()","in","91"],["Indonesia","id","62"],["Iran ()","ir","98"],["Iraq ()","iq","964"],["Ireland","ie","353"],["Isle of Man","im","44",2,["1624","74576","7524","7924","7624"]],["Israel ()","il","972"],["Italy (Italia)","it","39",0],["Jamaica","jm","1",4,["876","658"]],["Japan ()","jp","81"],["Jersey","je","44",3,["1534","7509","7700","7797","7829","7937"]],["Jordan ()","jo","962"],["Kazakhstan ()","kz","7",1,["33","7"]],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait ()","kw","965"],["Kyrgyzstan ()","kg","996"],["Laos ()","la","856"],["Latvia (Latvija)","lv","371"],["Lebanon ()","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya ()","ly","218"],["Liechtenstein","li","423"],["Lithuania (Lietuva)","lt","370"],["Luxembourg","lu","352"],["Macau ()","mo","853"],["Macedonia (FYROM) ()","mk","389"],["Madagascar (Madagasikara)","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania ()","mr","222"],["Mauritius (Moris)","mu","230"],["Mayotte","yt","262",1,["269","639"]],["Mexico (Mxico)","mx","52"],["Micronesia","fm","691"],["Moldova (Republica Moldova)","md","373"],["Monaco","mc","377"],["Mongolia ()","mn","976"],["Montenegro (Crna Gora)","me","382"],["Montserrat","ms","1",16,["664"]],["Morocco ()","ma","212",0],["Mozambique (Moambique)","mz","258"],["Myanmar (Burma) ()","mm","95"],["Namibia (Namibi)","na","264"],["Nauru","nr","674"],["Nepal ()","np","977"],["Netherlands (Nederland)","nl","31"],["New Caledonia (Nouvelle-Caldonie)","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger (Nijar)","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea (   )","kp","850"],["Northern Mariana Islands","mp","1",17,["670"]],["Norway (Norge)","no","47",0],["Oman ()","om","968"],["Pakistan ()","pk","92"],["Palau","pw","680"],["Palestine ()","ps","970"],["Panama (Panam)","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru (Per)","pe","51"],["Philippines","ph","63"],["Poland (Polska)","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar ()","qa","974"],["Runion (La Runion)","re","262",0],["Romania (Romnia)","ro","40"],["Russia ()","ru","7",0],["Rwanda","rw","250"],["Saint Barthlemy","bl","590",1],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1",18,["869"]],["Saint Lucia","lc","1",19,["758"]],["Saint Martin (Saint-Martin (partie franaise))","mf","590",2],["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)","pm","508"],["Saint Vincent and the Grenadines","vc","1",20,["784"]],["Samoa","ws","685"],["San Marino","sm","378"],["So Tom and Prncipe (So Tom e Prncipe)","st","239"],["Saudi Arabia (  )","sa","966"],["Senegal (Sngal)","sn","221"],["Serbia ()","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Sint Maarten","sx","1",21,["721"]],["Slovakia (Slovensko)","sk","421"],["Slovenia (Slovenija)","si","386"],["Solomon Islands","sb","677"],["Somalia (Soomaaliya)","so","252"],["South Africa","za","27"],["South Korea ()","kr","82"],["South Sudan ( )","ss","211"],["Spain (Espaa)","es","34"],["Sri Lanka ( )","lk","94"],["Sudan ()","sd","249"],["Suriname","sr","597"],["Svalbard and Jan Mayen","sj","47",1,["79"]],["Swaziland","sz","268"],["Sweden (Sverige)","se","46"],["Switzerland (Schweiz)","ch","41"],["Syria ()","sy","963"],["Taiwan ()","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand ()","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1",22,["868"]],["Tunisia ()","tn","216"],["Turkey (Trkiye)","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1",23,["649"]],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1",24,["340"]],["Uganda","ug","256"],["Ukraine ()","ua","380"],["United Arab Emirates (  )","ae","971"],["United Kingdom","gb","44",0],["United States","us","1",0],["Uruguay","uy","598"],["Uzbekistan (Ozbekiston)","uz","998"],["Vanuatu","vu","678"],["Vatican City (Citt del Vaticano)","va","39",1,["06698"]],["Venezuela","ve","58"],["Vietnam (Vit Nam)","vn","84"],["Wallis and Futuna (Wallis-et-Futuna)","wf","681"],["Western Sahara ( )","eh","212",1,["5288","5289"]],["Yemen ()","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"],["land Islands","ax","358",1,["18"]]],o=0;o<u.length;o++)f=u[o],u[o]={name:f[0],iso2:f[1],dialCode:f[2],priority:f[3]||0,areaCodes:f[4]||null};t.intlTelInputGlobals={getInstance:function(n){var i=n.getAttribute("data-intl-tel-input-id");return t.intlTelInputGlobals.instances[i]},instances:{}};var w=0,a={allowDropdown:!0,autoHideDialCode:!0,autoPlaceholder:"polite",customContainer:"",customPlaceholder:null,dropdownContainer:null,excludeCountries:[],formatOnDisplay:!0,geoIpLookup:null,hiddenInput:"",initialCountry:"",localizedCountries:null,nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",preferredCountries:["us","gb"],separateDialCode:!1,utilsScript:""},b=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"];t.addEventListener("load",function(){t.intlTelInputGlobals.windowLoaded=!0});var h=function(n,t){for(var r=Object.keys(n),i=0;i<r.length;i++)t(r[i],n[r[i]])},s=function(n){h(t.intlTelInputGlobals.instances,function(i){t.intlTelInputGlobals.instances[i][n]()})},v=function(){function n(t,i){var u=this,r;y(this,n);this.id=w++;this.telInput=t;this.activeItem=null;this.highlightedItem=null;r=i||{};this.options={};h(a,function(n,t){u.options[n]=r.hasOwnProperty(n)?r[n]:t});this.hadInitialPlaceholder=Boolean(t.getAttribute("placeholder"))}return p(n,[{key:"_init",value:function(){var n=this,t,r;this.options.nationalMode&&(this.options.autoHideDialCode=!1);this.options.separateDialCode&&(this.options.autoHideDialCode=this.options.nationalMode=!1);this.isMobile=/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);this.isMobile&&(i.body.classList.add("iti-mobile"),this.options.dropdownContainer||(this.options.dropdownContainer=i.body));typeof Promise!="undefined"?(t=new Promise(function(t,i){n.resolveAutoCountryPromise=t;n.rejectAutoCountryPromise=i}),r=new Promise(function(t,i){n.resolveUtilsScriptPromise=t;n.rejectUtilsScriptPromise=i}),this.promise=Promise.all([t,r])):(this.resolveAutoCountryPromise=this.rejectAutoCountryPromise=function(){},this.resolveUtilsScriptPromise=this.rejectUtilsScriptPromise=function(){});this.selectedCountryData={};this._processCountryData();this._generateMarkup();this._setInitialState();this._initListeners();this._initRequests()}},{key:"_processCountryData",value:function(){this._processAllCountries();this._processCountryCodes();this._processPreferredCountries();this.options.localizedCountries&&this._translateCountriesByLocale();(this.options.onlyCountries.length||this.options.localizedCountries)&&this.countries.sort(this._countryNameSort)}},{key:"_addCountryCode",value:function(n,t,i){var u,f;for(t.length>this.dialCodeMaxLen&&(this.dialCodeMaxLen=t.length),this.countryCodes.hasOwnProperty(t)||(this.countryCodes[t]=[]),u=0;u<this.countryCodes[t].length;u++)if(this.countryCodes[t][u]===n)return;f=i!==r?i:this.countryCodes[t].length;this.countryCodes[t][f]=n}},{key:"_processAllCountries",value:function(){var n,t;this.options.onlyCountries.length?(n=this.options.onlyCountries.map(function(n){return n.toLowerCase()}),this.countries=u.filter(function(t){return n.indexOf(t.iso2)>-1})):this.options.excludeCountries.length?(t=this.options.excludeCountries.map(function(n){return n.toLowerCase()}),this.countries=u.filter(function(n){return t.indexOf(n.iso2)===-1})):this.countries=u}},{key:"_translateCountriesByLocale",value:function(){for(var t,n=0;n<this.countries.length;n++)t=this.countries[n].iso2.toLowerCase(),this.options.localizedCountries.hasOwnProperty(t)&&(this.countries[n].name=this.options.localizedCountries[t])}},{key:"_countryNameSort",value:function(n,t){return n.name.localeCompare(t.name)}},{key:"_processCountryCodes",value:function(){var t,i,r,n,s,u,f,e,o;for(this.dialCodeMaxLen=0,this.countryCodes={},t=0;t<this.countries.length;t++)i=this.countries[t],this._addCountryCode(i.iso2,i.dialCode,i.priority);for(r=0;r<this.countries.length;r++)if(n=this.countries[r],n.areaCodes)for(s=this.countryCodes[n.dialCode][0],u=0;u<n.areaCodes.length;u++){for(f=n.areaCodes[u],e=1;e<f.length;e++)o=n.dialCode+f.substr(0,e),this._addCountryCode(s,o),this._addCountryCode(n.iso2,o);this._addCountryCode(n.iso2,n.dialCode+f)}}},{key:"_processPreferredCountries",value:function(){var n,i,t;for(this.preferredCountries=[],n=0;n<this.options.preferredCountries.length;n++)i=this.options.preferredCountries[n].toLowerCase(),t=this._getCountryData(i,!1,!0),t&&this.preferredCountries.push(t)}},{key:"_createEl",value:function(n,t,r){var u=i.createElement(n);return t&&h(t,function(n,t){return u.setAttribute(n,t)}),r&&r.appendChild(u),u}},{key:"_generateMarkup",value:function(){var n,t,i,r,u;this.telInput.setAttribute("autocomplete","off");n="iti";this.options.allowDropdown&&(n+=" iti--allow-dropdown");this.options.separateDialCode&&(n+=" iti--separate-dial-code");this.options.customContainer&&(n+=" ",n+=this.options.customContainer);t=this._createEl("div",{"class":n});this.telInput.parentNode.insertBefore(t,this.telInput);this.flagsContainer=this._createEl("div",{"class":"iti__flag-container"},t);t.appendChild(this.telInput);this.selectedFlag=this._createEl("div",{"class":"iti__selected-flag",role:"combobox","aria-owns":"country-listbox"},this.flagsContainer);this.selectedFlagInner=this._createEl("div",{"class":"iti__flag"},this.selectedFlag);this.options.separateDialCode&&(this.selectedDialCode=this._createEl("div",{"class":"iti__selected-dial-code"},this.selectedFlag));this.options.allowDropdown&&(this.selectedFlag.setAttribute("tabindex","0"),this.dropdownArrow=this._createEl("div",{"class":"iti__arrow"},this.selectedFlag),this.countryList=this._createEl("ul",{"class":"iti__country-list iti__hide",id:"country-listbox","aria-expanded":"false",role:"listbox"}),this.preferredCountries.length&&(this._appendListItems(this.preferredCountries,"iti__preferred"),this._createEl("li",{"class":"iti__divider",role:"separator","aria-disabled":"true"},this.countryList)),this._appendListItems(this.countries,"iti__standard"),this.options.dropdownContainer?(this.dropdown=this._createEl("div",{"class":"iti iti--container"}),this.dropdown.appendChild(this.countryList)):this.flagsContainer.appendChild(this.countryList));this.options.hiddenInput&&(i=this.options.hiddenInput,r=this.telInput.getAttribute("name"),r&&(u=r.lastIndexOf("["),u!==-1&&(i="".concat(r.substr(0,u),"[").concat(i,"]"))),this.hiddenInput=this._createEl("input",{type:"hidden",name:i}),t.appendChild(this.hiddenInput))}},{key:"_appendListItems",value:function(n,t){for(var i,r="",u=0;u<n.length;u++)i=n[u],r+="<li class='iti__country ".concat(t,"' tabIndex='-1' id='iti-item-").concat(i.iso2,"' role='option' data-dial-code='").concat(i.dialCode,"' data-country-code='").concat(i.iso2,"'>"),r+="<div class='iti__flag-box'><div class='iti__flag iti__".concat(i.iso2,"'><\/div><\/div>"),r+="<span class='iti__country-name'>".concat(i.name,"<\/span>"),r+="<span class='iti__dial-code'>+".concat(i.dialCode,"<\/span>"),r+="<\/li>";this.countryList.insertAdjacentHTML("beforeend",r)}},{key:"_setInitialState",value:function(){var n=this.telInput.value,r=this._getDialCode(n),u=this._isRegionlessNanp(n),t=this.options,i=t.initialCountry,f=t.nationalMode,e=t.autoHideDialCode,o=t.separateDialCode;r&&!u?this._updateFlagFromNumber(n):i!=="auto"&&(i?this._setFlag(i.toLowerCase()):r&&u?this._setFlag("us"):(this.defaultCountry=this.preferredCountries.length?this.preferredCountries[0].iso2:this.countries[0].iso2,n||this._setFlag(this.defaultCountry)),n||f||e||o||(this.telInput.value="+".concat(this.selectedCountryData.dialCode)));n&&this._updateValFromNumber(n)}},{key:"_initListeners",value:function(){this._initKeyListeners();this.options.autoHideDialCode&&this._initBlurListeners();this.options.allowDropdown&&this._initDropdownListeners();this.hiddenInput&&this._initHiddenInputListener()}},{key:"_initHiddenInputListener",value:function(){var n=this;this._handleHiddenInputSubmit=function(){n.hiddenInput.value=n.getNumber()};this.telInput.form&&this.telInput.form.addEventListener("submit",this._handleHiddenInputSubmit)}},{key:"_getClosestLabel",value:function(){for(var n=this.telInput;n&&n.tagName!=="LABEL";)n=n.parentNode;return n}},{key:"_initDropdownListeners",value:function(){var n=this,t;this._handleLabelClick=function(t){n.countryList.classList.contains("iti__hide")?n.telInput.focus():t.preventDefault()};t=this._getClosestLabel();t&&t.addEventListener("click",this._handleLabelClick);this._handleClickSelectedFlag=function(){!n.countryList.classList.contains("iti__hide")||n.telInput.disabled||n.telInput.readOnly||n._showDropdown()};this.selectedFlag.addEventListener("click",this._handleClickSelectedFlag);this._handleFlagsContainerKeydown=function(t){var i=n.countryList.classList.contains("iti__hide");i&&["ArrowUp","Up","ArrowDown","Down"," ","Enter"].indexOf(t.key)!==-1&&(t.preventDefault(),t.stopPropagation(),n._showDropdown());t.key==="Tab"&&n._closeDropdown()};this.flagsContainer.addEventListener("keydown",this._handleFlagsContainerKeydown)}},{key:"_initRequests",value:function(){var n=this;this.options.utilsScript&&!t.intlTelInputUtils?t.intlTelInputGlobals.windowLoaded?t.intlTelInputGlobals.loadUtils(this.options.utilsScript):t.addEventListener("load",function(){t.intlTelInputGlobals.loadUtils(n.options.utilsScript)}):this.resolveUtilsScriptPromise();this.options.initialCountry==="auto"?this._loadAutoCountry():this.resolveAutoCountryPromise()}},{key:"_loadAutoCountry",value:function(){t.intlTelInputGlobals.autoCountry?this.handleAutoCountry():t.intlTelInputGlobals.startedLoadingAutoCountry||(t.intlTelInputGlobals.startedLoadingAutoCountry=!0,typeof this.options.geoIpLookup=="function"&&this.options.geoIpLookup(function(n){t.intlTelInputGlobals.autoCountry=n.toLowerCase();setTimeout(function(){return s("handleAutoCountry")})},function(){return s("rejectAutoCountryPromise")}))}},{key:"_initKeyListeners",value:function(){var n=this;this._handleKeyupEvent=function(){n._updateFlagFromNumber(n.telInput.value)&&n._triggerCountryChange()};this.telInput.addEventListener("keyup",this._handleKeyupEvent);this._handleClipboardEvent=function(){setTimeout(n._handleKeyupEvent)};this.telInput.addEventListener("cut",this._handleClipboardEvent);this.telInput.addEventListener("paste",this._handleClipboardEvent)}},{key:"_cap",value:function(n){var t=this.telInput.getAttribute("maxlength");return t&&n.length>t?n.substr(0,t):n}},{key:"_initBlurListeners",value:function(){var n=this;this._handleSubmitOrBlurEvent=function(){n._removeEmptyDialCode()};this.telInput.form&&this.telInput.form.addEventListener("submit",this._handleSubmitOrBlurEvent);this.telInput.addEventListener("blur",this._handleSubmitOrBlurEvent)}},{key:"_removeEmptyDialCode",value:function(){if(this.telInput.value.charAt(0)==="+"){var n=this._getNumeric(this.telInput.value);n&&this.selectedCountryData.dialCode!==n||(this.telInput.value="")}}},{key:"_getNumeric",value:function(n){return n.replace(/\D/g,"")}},{key:"_trigger",value:function(n){var t=i.createEvent("Event");t.initEvent(n,!0,!0);this.telInput.dispatchEvent(t)}},{key:"_showDropdown",value:function(){this.countryList.classList.remove("iti__hide");this.countryList.setAttribute("aria-expanded","true");this._setDropdownPosition();this.activeItem&&(this._highlightListItem(this.activeItem,!1),this._scrollTo(this.activeItem,!0));this._bindDropdownListeners();this.dropdownArrow.classList.add("iti__arrow--up");this._trigger("open:countrydropdown")}},{key:"_toggleClass",value:function(n,t,i){i&&!n.classList.contains(t)?n.classList.add(t):!i&&n.classList.contains(t)&&n.classList.remove(t)}},{key:"_setDropdownPosition",value:function(){var h=this,s;if(this.options.dropdownContainer&&this.options.dropdownContainer.appendChild(this.dropdown),!this.isMobile){var u=this.telInput.getBoundingClientRect(),n=t.pageYOffset||i.documentElement.scrollTop,r=u.top+n,f=this.countryList.offsetHeight,e=r+this.telInput.offsetHeight+f<n+t.innerHeight,o=r-f>n;this._toggleClass(this.countryList,"iti__country-list--dropup",!e&&o);this.options.dropdownContainer&&(s=!e&&o?0:this.telInput.offsetHeight,this.dropdown.style.top="".concat(r+s,"px"),this.dropdown.style.left="".concat(u.left+i.body.scrollLeft,"px"),this._handleWindowScroll=function(){return h._closeDropdown()},t.addEventListener("scroll",this._handleWindowScroll))}}},{key:"_getClosestListItem",value:function(n){for(var t=n;t&&t!==this.countryList&&!t.classList.contains("iti__country");)t=t.parentNode;return t===this.countryList?null:t}},{key:"_bindDropdownListeners",value:function(){var n=this,u,t,r;this._handleMouseoverCountryList=function(t){var i=n._getClosestListItem(t.target);i&&n._highlightListItem(i,!1)};this.countryList.addEventListener("mouseover",this._handleMouseoverCountryList);this._handleClickCountryList=function(t){var i=n._getClosestListItem(t.target);i&&n._selectListItem(i)};this.countryList.addEventListener("click",this._handleClickCountryList);u=!0;this._handleClickOffToClose=function(){u||n._closeDropdown();u=!1};i.documentElement.addEventListener("click",this._handleClickOffToClose);t="";r=null;this._handleKeydownOnDropdown=function(i){i.preventDefault();i.key==="ArrowUp"||i.key==="Up"||i.key==="ArrowDown"||i.key==="Down"?n._handleUpDownKey(i.key):i.key==="Enter"?n._handleEnterKey():i.key==="Escape"?n._closeDropdown():/^[a-zA-Z--- ]$/.test(i.key)&&(r&&clearTimeout(r),t+=i.key.toLowerCase(),n._searchForCountry(t),r=setTimeout(function(){t=""},1e3))};i.addEventListener("keydown",this._handleKeydownOnDropdown)}},{key:"_handleUpDownKey",value:function(n){var t=n==="ArrowUp"||n==="Up"?this.highlightedItem.previousElementSibling:this.highlightedItem.nextElementSibling;t&&(t.classList.contains("iti__divider")&&(t=n==="ArrowUp"||n==="Up"?t.previousElementSibling:t.nextElementSibling),this._highlightListItem(t,!0))}},{key:"_handleEnterKey",value:function(){this.highlightedItem&&this._selectListItem(this.highlightedItem)}},{key:"_searchForCountry",value:function(n){for(var i,t=0;t<this.countries.length;t++)if(this._startsWith(this.countries[t].name,n)){i=this.countryList.querySelector("#iti-item-".concat(this.countries[t].iso2));this._highlightListItem(i,!1);this._scrollTo(i,!0);break}}},{key:"_startsWith",value:function(n,t){return n.substr(0,t.length).toLowerCase()===t}},{key:"_updateValFromNumber",value:function(n){var i=n;if(this.options.formatOnDisplay&&t.intlTelInputUtils&&this.selectedCountryData){var u=!this.options.separateDialCode&&(this.options.nationalMode||i.charAt(0)!=="+"),r=intlTelInputUtils.numberFormat,f=r.NATIONAL,e=r.INTERNATIONAL,o=u?f:e;i=intlTelInputUtils.formatNumber(i,this.selectedCountryData.iso2,o)}i=this._beforeSetNumber(i);this.telInput.value=i}},{key:"_updateFlagFromNumber",value:function(n){var t=n,u=this.selectedCountryData.dialCode,s=u==="1",r;t&&this.options.nationalMode&&s&&t.charAt(0)!=="+"&&(t.charAt(0)!=="1"&&(t="1".concat(t)),t="+".concat(t));this.options.separateDialCode&&u&&t.charAt(0)!=="+"&&(t="+".concat(u).concat(t));var e=this._getDialCode(t),o=this._getNumeric(t),i=null;if(e){var f=this.countryCodes[this._getNumeric(e)],h=f.indexOf(this.selectedCountryData.iso2)!==-1&&o.length<=e.length-1,c=u==="1"&&this._isRegionlessNanp(o);if(!c&&!h)for(r=0;r<f.length;r++)if(f[r]){i=f[r];break}}else t.charAt(0)==="+"&&o.length?i="":t&&t!=="+"||(i=this.defaultCountry);return i!==null?this._setFlag(i):!1}},{key:"_isRegionlessNanp",value:function(n){var t=this._getNumeric(n),i;return t.charAt(0)==="1"?(i=t.substr(1,3),b.indexOf(i)!==-1):!1}},{key:"_highlightListItem",value:function(n,t){var i=this.highlightedItem;i&&i.classList.remove("iti__highlight");this.highlightedItem=n;this.highlightedItem.classList.add("iti__highlight");t&&this.highlightedItem.focus()}},{key:"_getCountryData",value:function(n,t,i){for(var f=t?u:this.countries,r=0;r<f.length;r++)if(f[r].iso2===n)return f[r];if(i)return null;throw new Error("No country data for '".concat(n,"'"));}},{key:"_setFlag",value:function(n){var e=this.selectedCountryData.iso2?this.selectedCountryData:{},r,u,f,i,t;return this.selectedCountryData=n?this._getCountryData(n,!1,!1):{},this.selectedCountryData.iso2&&(this.defaultCountry=this.selectedCountryData.iso2),this.selectedFlagInner.setAttribute("class","iti__flag iti__".concat(n)),r=n?"".concat(this.selectedCountryData.name,": +").concat(this.selectedCountryData.dialCode):"Unknown",this.selectedFlag.setAttribute("title",r),this.options.separateDialCode&&(u=this.selectedCountryData.dialCode?"+".concat(this.selectedCountryData.dialCode):"",this.selectedDialCode.innerHTML=u,f=this.selectedFlag.offsetWidth||this._getHiddenSelectedFlagWidth(),this.telInput.style.paddingLeft="".concat(f+6,"px")),this._updatePlaceholder(),this.options.allowDropdown&&(i=this.activeItem,i&&(i.classList.remove("iti__active"),i.setAttribute("aria-selected","false")),n&&(t=this.countryList.querySelector("#iti-item-".concat(n)),t.setAttribute("aria-selected","true"),t.classList.add("iti__active"),this.activeItem=t,this.countryList.setAttribute("aria-activedescendant",t.getAttribute("id")))),e.iso2!==n}},{key:"_getHiddenSelectedFlagWidth",value:function(){var n=this.telInput.parentNode.cloneNode(),t,r;return n.style.visibility="hidden",i.body.appendChild(n),t=this.selectedFlag.cloneNode(!0),n.appendChild(t),r=t.offsetWidth,n.parentNode.removeChild(n),r}},{key:"_updatePlaceholder",value:function(){var r=this.options.autoPlaceholder==="aggressive"||!this.hadInitialPlaceholder&&this.options.autoPlaceholder==="polite",i,n;t.intlTelInputUtils&&r&&(i=intlTelInputUtils.numberType[this.options.placeholderNumberType],n=this.selectedCountryData.iso2?intlTelInputUtils.getExampleNumber(this.selectedCountryData.iso2,this.options.nationalMode,i):"",n=this._beforeSetNumber(n),typeof this.options.customPlaceholder=="function"&&(n=this.options.customPlaceholder(n,this.selectedCountryData)),this.telInput.setAttribute("placeholder",n))}},{key:"_selectListItem",value:function(n){var i=this._setFlag(n.getAttribute("data-country-code")),t;this._closeDropdown();this._updateDialCode(n.getAttribute("data-dial-code"),!0);this.telInput.focus();t=this.telInput.value.length;this.telInput.setSelectionRange(t,t);i&&this._triggerCountryChange()}},{key:"_closeDropdown",value:function(){this.countryList.classList.add("iti__hide");this.countryList.setAttribute("aria-expanded","false");this.dropdownArrow.classList.remove("iti__arrow--up");i.removeEventListener("keydown",this._handleKeydownOnDropdown);i.documentElement.removeEventListener("click",this._handleClickOffToClose);this.countryList.removeEventListener("mouseover",this._handleMouseoverCountryList);this.countryList.removeEventListener("click",this._handleClickCountryList);this.options.dropdownContainer&&(this.isMobile||t.removeEventListener("scroll",this._handleWindowScroll),this.dropdown.parentNode&&this.dropdown.parentNode.removeChild(this.dropdown));this._trigger("close:countrydropdown")}},{key:"_scrollTo",value:function(n,r){var u=this.countryList,c=t.pageYOffset||i.documentElement.scrollTop,e=u.offsetHeight,o=u.getBoundingClientRect().top+c,v=o+e,s=n.offsetHeight,h=n.getBoundingClientRect().top+c,y=h+s,f=h-o+u.scrollTop,l=e/2-s/2,a;h<o?(r&&(f-=l),u.scrollTop=f):y>v&&(r&&(f+=l),a=e-s,u.scrollTop=f-a)}},{key:"_updateDialCode",value:function(n,t){var i=this.telInput.value,r="+".concat(n),u,f;if(i.charAt(0)==="+")f=this._getDialCode(i),u=f?i.replace(f,r):r;else{if(this.options.nationalMode||this.options.separateDialCode)return;if(i)u=r+i;else if(t||!this.options.autoHideDialCode)u=r;else return}this.telInput.value=u}},{key:"_getDialCode",value:function(n){var u="",i,t,r;if(n.charAt(0)==="+")for(i="",t=0;t<n.length;t++)if(r=n.charAt(t),!isNaN(parseInt(r,10))&&(i+=r,this.countryCodes[i]&&(u=n.substr(0,t+1)),i.length===this.dialCodeMaxLen))break;return u}},{key:"_getFullNumber",value:function(){var n=this.telInput.value.trim(),t=this.selectedCountryData.dialCode,i,r=this._getNumeric(n);return i=this.options.separateDialCode&&n.charAt(0)!=="+"&&t&&r?"+".concat(t):"",i+n}},{key:"_beforeSetNumber",value:function(n){var i=n,t,r;return this.options.separateDialCode&&(t=this._getDialCode(i),t&&(t="+".concat(this.selectedCountryData.dialCode),r=i[t.length]===" "||i[t.length]==="-"?t.length+1:t.length,i=i.substr(r))),this._cap(i)}},{key:"_triggerCountryChange",value:function(){this._trigger("countrychange")}},{key:"handleAutoCountry",value:function(){this.options.initialCountry==="auto"&&(this.defaultCountry=t.intlTelInputGlobals.autoCountry,this.telInput.value||this.setCountry(this.defaultCountry),this.resolveAutoCountryPromise())}},{key:"handleUtils",value:function(){t.intlTelInputUtils&&(this.telInput.value&&this._updateValFromNumber(this.telInput.value),this._updatePlaceholder());this.resolveUtilsScriptPromise()}},{key:"destroy",value:function(){var i=this.telInput.form,r,n;this.options.allowDropdown&&(this._closeDropdown(),this.selectedFlag.removeEventListener("click",this._handleClickSelectedFlag),this.flagsContainer.removeEventListener("keydown",this._handleFlagsContainerKeydown),r=this._getClosestLabel(),r&&r.removeEventListener("click",this._handleLabelClick));this.hiddenInput&&i&&i.removeEventListener("submit",this._handleHiddenInputSubmit);this.options.autoHideDialCode&&(i&&i.removeEventListener("submit",this._handleSubmitOrBlurEvent),this.telInput.removeEventListener("blur",this._handleSubmitOrBlurEvent));this.telInput.removeEventListener("keyup",this._handleKeyupEvent);this.telInput.removeEventListener("cut",this._handleClipboardEvent);this.telInput.removeEventListener("paste",this._handleClipboardEvent);this.telInput.removeAttribute("data-intl-tel-input-id");n=this.telInput.parentNode;n.parentNode.insertBefore(this.telInput,n);n.parentNode.removeChild(n);delete t.intlTelInputGlobals.instances[this.id]}},{key:"getExtension",value:function(){return t.intlTelInputUtils?intlTelInputUtils.getExtension(this._getFullNumber(),this.selectedCountryData.iso2):""}},{key:"getNumber",value:function(n){if(t.intlTelInputUtils){var i=this.selectedCountryData.iso2;return intlTelInputUtils.formatNumber(this._getFullNumber(),i,n)}return""}},{key:"getNumberType",value:function(){return t.intlTelInputUtils?intlTelInputUtils.getNumberType(this._getFullNumber(),this.selectedCountryData.iso2):-99}},{key:"getSelectedCountryData",value:function(){return this.selectedCountryData}},{key:"getValidationError",value:function(){if(t.intlTelInputUtils){var n=this.selectedCountryData.iso2;return intlTelInputUtils.getValidationError(this._getFullNumber(),n)}return-99}},{key:"isValidNumber",value:function(){var n=this._getFullNumber().trim(),i=this.options.nationalMode?this.selectedCountryData.iso2:"";return t.intlTelInputUtils?intlTelInputUtils.isValidNumber(n,i):null}},{key:"setCountry",value:function(n){var t=n.toLowerCase();this.selectedFlagInner.classList.contains("iti__".concat(t))||(this._setFlag(t),this._updateDialCode(this.selectedCountryData.dialCode,!1),this._triggerCountryChange())}},{key:"setNumber",value:function(n){var t=this._updateFlagFromNumber(n);this._updateValFromNumber(n);t&&this._triggerCountryChange()}},{key:"setPlaceholderNumberType",value:function(n){this.options.placeholderNumberType=n;this._updatePlaceholder()}}]),n}();t.intlTelInputGlobals.getCountryData=function(){return u};c=function(n,t,r){var u=i.createElement("script");u.onload=function(){s("handleUtils");t&&t()};u.onerror=function(){s("rejectUtilsScriptPromise");r&&r()};u.className="iti-load-utils";u.async=!0;u.src=n;i.body.appendChild(u)};t.intlTelInputGlobals.loadUtils=function(n){if(!t.intlTelInputUtils&&!t.intlTelInputGlobals.startedLoadingUtilsScript){if(t.intlTelInputGlobals.startedLoadingUtilsScript=!0,typeof Promise!="undefined")return new Promise(function(t,i){return c(n,t,i)});c(n)}return null};t.intlTelInputGlobals.defaults=a;t.intlTelInputGlobals.version="16.0.11";e="intlTelInput";n.fn[e]=function(i){var f=arguments,u;return i===r||typeof i=="object"?this.each(function(){if(!n.data(this,"plugin_"+e)){var r=new v(this,i);r._init();t.intlTelInputGlobals.instances[r.id]=r;n.data(this,"plugin_"+e,r)}}):typeof i=="string"&&i[0]!=="_"?(this.each(function(){var t=n.data(this,"plugin_"+e);t instanceof v&&typeof t[i]=="function"&&(u=t[i].apply(t,Array.prototype.slice.call(f,1)));i==="destroy"&&n.data(this,"plugin_"+e,null)}),u!==r?u:this):void 0}});
/*!
 * dist/jquery.inputmask
 * https://github.com/RobinHerbots/Inputmask
 * Copyright (c) 2010 - 2020 Robin Herbots
 * Licensed under the MIT license
 * Version: 5.0.3
 */
!function(n,t){var i,r;if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("jquery"));else if("function"==typeof define&&define.amd)define(["jquery"],t);else{i="object"==typeof exports?t(require("jquery")):t(n.jQuery);for(r in i)("object"==typeof exports?exports:n)[r]=i[r]}}(window,function(n){function t(n){if(i[n])return i[n].exports;var u=i[n]={i:n,l:!1,exports:{}};return r[n].call(u.exports,u,u.exports,t),u.l=!0,u.exports}return r=[function(n){n.exports=JSON.parse('{"BACKSPACE":8,"BACKSPACE_SAFARI":127,"DELETE":46,"DOWN":40,"END":35,"ENTER":13,"ESCAPE":27,"HOME":36,"INSERT":45,"LEFT":37,"PAGE_DOWN":34,"PAGE_UP":33,"RIGHT":39,"SPACE":32,"TAB":9,"UP":38,"X":88,"CONTROL":17}')},function(n,t,i){"use strict";function s(n){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},s(n)}function u(n,t,i){if(!(this instanceof u))return new u(n,t,i);this.el=void 0;this.events={};this.maskset=void 0;this.refreshValue=!1;!0!==i&&(r.isPlainObject(n)?t=n:(t=t||{},n&&(t.alias=n)),this.opts=r.extend(!0,{},this.defaults,t),this.noMasksCache=t&&void 0!==t.definitions,this.userOptions=t||{},c(this.opts.alias,t,this.opts),this.isRTL=this.opts.numericInput)}function c(n,t,i){var f=u.prototype.aliases[n];return f?(f.alias&&c(f.alias,void 0,i),r.extend(!0,i,f),r.extend(!0,i,t),!0):(null===i.mask&&(i.mask=n),!1)}function v(n,t,i,u){function a(t,r){r=void 0!==r?r:n.getAttribute(u+"-"+t);null!==r&&("string"==typeof r&&(0===t.indexOf("on")?r=h[r]:"false"===r?r=!1:"true"===r&&(r=!0)),i[t]=r)}if(!0===t.importDataAttributes){var s=n.getAttribute(u),l,f,e,o;if(s&&""!==s&&(s=s.replace(/'/g,'"'),f=JSON.parse("{"+s+"}")),f)for(o in e=void 0,f)if("alias"===o.toLowerCase()){e=f[o];break}for(l in a("alias",e),i.alias&&c(i.alias,i,t),t){if(f)for(o in e=void 0,f)if(o.toLowerCase()===l.toLowerCase()){e=f[o];break}a(l,e)}}return r.extend(!0,t,i),"rtl"!==n.dir&&!t.rightAlign||(n.style.textAlign="right"),"rtl"!==n.dir&&!t.numericInput||(n.dir="ltr",n.removeAttribute("dir"),t.isRTL=!0),Object.keys(i).length}var r=i(2),h=i(4),o=h.document,e=i(5).generateMaskSet,a=i(5).analyseMask,f=i(8),l;u.prototype={dataAttribute:"data-inputmask",defaults:{_maxTestPos:500,placeholder:"_",optionalmarker:["[","]"],quantifiermarker:["{","}"],groupmarker:["(",")"],alternatormarker:"|",escapeChar:"\\",mask:null,regex:null,oncomplete:r.noop,onincomplete:r.noop,oncleared:r.noop,repeat:0,greedy:!1,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,insertModeVisual:!0,clearIncomplete:!1,alias:null,onKeyDown:r.noop,onBeforeMask:null,onBeforePaste:function(n,t){return r.isFunction(t.onBeforeMask)?t.onBeforeMask.call(this,n,t):n},onBeforeWrite:null,onUnMask:null,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:r.noop,skipOptionalPartCharacter:" ",numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",_radixDance:!1,groupSeparator:"",keepStatic:null,positionCaretOnTab:!0,tabThrough:!1,supportsInputType:["text","tel","url","password","search"],ignorables:[8,9,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123,0,229],isComplete:null,preValidation:null,postValidation:null,staticDefinitionSymbol:void 0,jitMasking:!1,nullable:!0,inputEventOnly:!1,noValuePatching:!1,positionCaretOnClick:"lvp",casing:null,inputmode:"text",importDataAttributes:!0,shiftPositions:!0},definitions:{9:{validator:"[0-9-]",definitionSymbol:"*"},a:{validator:"[A-Za-z--]",definitionSymbol:"*"},"*":{validator:"[0-9-A-Za-z--]"}},aliases:{},masksCache:{},mask:function(n){var t=this;return"string"==typeof n&&(n=o.getElementById(n)||o.querySelectorAll(n)),n=n.nodeName?[n]:n,r.each(n,function(n,i){var o=r.extend(!0,{},t.opts),s;v(i,o,r.extend(!0,{},t.userOptions),t.dataAttribute)&&(s=e(o,t.noMasksCache),void 0!==s&&(void 0!==i.inputmask&&(i.inputmask.opts.autoUnmask=!0,i.inputmask.remove()),i.inputmask=new u(void 0,void 0,!0),i.inputmask.opts=o,i.inputmask.noMasksCache=t.noMasksCache,i.inputmask.userOptions=r.extend(!0,{},t.userOptions),i.inputmask.isRTL=o.isRTL||o.numericInput,i.inputmask.el=i,i.inputmask.maskset=s,r.data(i,"_inputmask_opts",o),f.call(i.inputmask,{action:"mask"})))}),n&&n[0]&&n[0].inputmask||this},option:function(n,t){return"string"==typeof n?this.opts[n]:"object"===s(n)?(r.extend(this.userOptions,n),this.el&&!0!==t&&this.mask(this.el),this):void 0},unmaskedvalue:function(n){return this.maskset=this.maskset||e(this.opts,this.noMasksCache),f.call(this,{action:"unmaskedvalue",value:n})},remove:function(){return f.call(this,{action:"remove"})},getemptymask:function(){return this.maskset=this.maskset||e(this.opts,this.noMasksCache),f.call(this,{action:"getemptymask"})},hasMaskedValue:function(){return!this.opts.autoUnmask},isComplete:function(){return this.maskset=this.maskset||e(this.opts,this.noMasksCache),f.call(this,{action:"isComplete"})},getmetadata:function(){return this.maskset=this.maskset||e(this.opts,this.noMasksCache),f.call(this,{action:"getmetadata"})},isValid:function(n){return this.maskset=this.maskset||e(this.opts,this.noMasksCache),f.call(this,{action:"isValid",value:n})},format:function(n,t){return this.maskset=this.maskset||e(this.opts,this.noMasksCache),f.call(this,{action:"format",value:n,metadata:t})},setValue:function(n){this.el&&r(this.el).trigger("setvalue",[n])},analyseMask:a};u.extendDefaults=function(n){r.extend(!0,u.prototype.defaults,n)};u.extendDefinitions=function(n){r.extend(!0,u.prototype.definitions,n)};u.extendAliases=function(n){r.extend(!0,u.prototype.aliases,n)};u.format=function(n,t,i){return u(t).format(n,i)};u.unmask=function(n,t){return u(t).unmaskedvalue(n)};u.isValid=function(n,t){return u(t).isValid(n)};u.remove=function(n){"string"==typeof n&&(n=o.getElementById(n)||o.querySelectorAll(n));n=n.nodeName?[n]:n;r.each(n,function(n,t){t.inputmask&&t.inputmask.remove()})};u.setValue=function(n,t){"string"==typeof n&&(n=o.getElementById(n)||o.querySelectorAll(n));n=n.nodeName?[n]:n;r.each(n,function(n,i){i.inputmask?i.inputmask.setValue(t):r(i).trigger("setvalue",[t])})};l=new RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^)","gim");u.escapeRegex=function(n){return n.replace(l,"\\$1")};u.dependencyLib=r;h.Inputmask=u;n.exports=u},function(n,t,i){"use strict";var r=i(3);if(void 0===r)throw"jQuery not loaded!";n.exports=r},function(t){t.exports=n},function(n,t,i){"use strict";var r;r=function(){return"undefined"!=typeof window?window:new(eval("require('jsdom').JSDOM"))("").window}.call(t,i,t,n);void 0===r||(n.exports=r)},function(n,t,i){"use strict";function u(n,t){function u(n,i,u){var e=!1,o,f,s;return(null!==n&&""!==n||(e=null!==u.regex,n=e?(n=u.regex,n.replace(/^(\^)(.*)(\$)$/,"$2")):(e=!0,".*")),1===n.length&&!1===u.greedy&&0!==u.repeat&&(u.placeholder=""),0<u.repeat||"*"===u.repeat||"+"===u.repeat)&&(s="*"===u.repeat?0:"+"===u.repeat?1:u.repeat,n=u.groupmarker[0]+n+u.groupmarker[1]+u.quantifiermarker[0]+s+","+u.repeat+u.quantifiermarker[1]),f=e?"regex_"+u.regex:u.numericInput?n.split("").reverse().join(""):n,!1!==u.keepStatic&&(f="ks_"+f),void 0===Inputmask.prototype.masksCache[f]||!0===t?(o={mask:n,maskToken:Inputmask.prototype.analyseMask(n,e,u),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},excludes:{},metadata:i,maskLength:void 0,jitOffset:{}},!0!==t&&(Inputmask.prototype.masksCache[f]=o,o=r.extend(!0,{},Inputmask.prototype.masksCache[f]))):o=r.extend(!0,{},Inputmask.prototype.masksCache[f]),o}var f,i;if(r.isFunction(n.mask)&&(n.mask=n.mask(n)),r.isArray(n.mask)){if(1<n.mask.length)return null===n.keepStatic&&(n.keepStatic=!0),i=n.groupmarker[0],r.each(n.isRTL?n.mask.reverse():n.mask,function(t,u){1<i.length&&(i+=n.groupmarker[1]+n.alternatormarker+n.groupmarker[0]);i+=void 0===u.mask||r.isFunction(u.mask)?u:u.mask}),i+=n.groupmarker[1],u(i,n.mask,n);n.mask=n.mask.pop()}return null===n.keepStatic&&(n.keepStatic=!1),f=n.mask&&void 0!==n.mask.mask&&!r.isFunction(n.mask.mask)?u(n.mask.mask,n.mask,n):u(n.mask,n.mask,n),f}function f(n,t,i){function v(n,t,i,r){this.matches=[];this.openGroup=n||!1;this.alternatorGroup=!1;this.isGroup=n||!1;this.isOptional=t||!1;this.isQuantifier=i||!1;this.isAlternator=r||!1;this.quantifier={min:1,max:1}}function b(n,u,f){var e,o;f=void 0!==f?f:n.matches.length;e=n.matches[f-1];t?(0===u.indexOf("[")||c&&/\\d|\\s|\\w]/i.test(u)||"."===u?n.matches.splice(f++,0,{fn:new RegExp(u,i.casing?"i":""),"static":!1,optionality:!1,newBlockMarker:void 0===e?"master":e.def!==u,casing:null,def:u,placeholder:void 0,nativeDef:u}):(c&&(u=u[u.length-1]),r.each(u.split(""),function(t,r){e=n.matches[f-1];n.matches.splice(f++,0,{fn:/[a-z]/i.test(i.staticDefinitionSymbol||r)?new RegExp("["+(i.staticDefinitionSymbol||r)+"]",i.casing?"i":""):null,"static":!0,optionality:!1,newBlockMarker:void 0===e?"master":e.def!==r&&!0!==e.static,casing:null,def:i.staticDefinitionSymbol||r,placeholder:void 0!==i.staticDefinitionSymbol?r:void 0,nativeDef:(c?"'":"")+r})})),c=!1):(o=(i.definitions?i.definitions[u]:void 0)||Inputmask.prototype.definitions[u],o&&!c?n.matches.splice(f++,0,{fn:o.validator?"string"==typeof o.validator?new RegExp(o.validator,i.casing?"i":""):new function(){this.test=o.validator}:new RegExp("."),"static":o.static||!1,optionality:!1,newBlockMarker:void 0===e?"master":e.def!==(o.definitionSymbol||u),casing:o.casing,def:o.definitionSymbol||u,placeholder:o.placeholder,nativeDef:u,generated:o.generated}):(n.matches.splice(f++,0,{fn:/[a-z]/i.test(i.staticDefinitionSymbol||u)?new RegExp("["+(i.staticDefinitionSymbol||u)+"]",i.casing?"i":""):null,"static":!0,optionality:!1,newBlockMarker:void 0===e?"master":e.def!==u&&!0!==e.static,casing:null,def:i.staticDefinitionSymbol||u,placeholder:void 0!==i.staticDefinitionSymbol?u:void 0,nativeDef:(c?"'":"")+u}),c=!1))}function et(n){n&&n.matches&&r.each(n.matches,function(r,u){var f=n.matches[r+1];(void 0===f||void 0===f.matches||!1===f.isQuantifier)&&u&&u.isGroup&&(u.isGroup=!1,t||(b(u,i.groupmarker[0],0),!0!==u.openGroup&&b(u,i.groupmarker[1])));et(u)})}function k(){if(0<u.length){if(e=u[u.length-1],b(e,h),e.isAlternator){f=u.pop();for(var n=0;n<f.matches.length;n++)f.matches[n].isGroup&&(f.matches[n].isGroup=!1);0<u.length?(e=u[u.length-1],e.matches.push(f)):o.matches.push(f)}}else b(o,h)}function ot(n){function f(n){return n===i.optionalmarker[0]?n=i.optionalmarker[1]:n===i.optionalmarker[1]?n=i.optionalmarker[0]:n===i.groupmarker[0]?n=i.groupmarker[1]:n===i.groupmarker[1]&&(n=i.groupmarker[0]),n}var t,r,u;for(t in n.matches=n.matches.reverse(),n.matches)Object.prototype.hasOwnProperty.call(n.matches,t)&&(r=parseInt(t),n.matches[t].isQuantifier&&n.matches[r+1]&&n.matches[r+1].isGroup&&(u=n.matches[t],n.matches.splice(t,1),n.matches.splice(r+1,0,u)),n.matches[t]=void 0!==n.matches[t].matches?ot(n.matches[t]):f(n.matches[t]));return n}function nt(n){var t=new v(!0);return t.openGroup=!1,t.matches=n,t}function st(){if(y=u.pop(),y.openGroup=!1,void 0!==y)if(0<u.length){if(e=u[u.length-1],e.matches.push(y),e.isAlternator){f=u.pop();for(var n=0;n<f.matches.length;n++)f.matches[n].isGroup=!1,f.matches[n].alternatorGroup=!1;0<u.length?(e=u[u.length-1],e.matches.push(f)):o.matches.push(f)}}else o.matches.push(y);else k()}function ht(n){var t=n.pop();return t.isQuantifier&&(t=nt([n.pop(),t])),t}var vt=/(?:[?*+]|\{[0-9+*]+(?:,[0-9+*]*)?(?:\|[0-9+*]*)?\})|[^.?*+^${[]()|\\]+|./g,yt=/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,c=!1,o=new v,s,h,u=[],g=[],y,e,f,l,ft=!1,tt,it,a,rt,at,d,ut;for(t&&(i.optionalmarker[0]=void 0,i.optionalmarker[1]=void 0);s=t?yt.exec(n):vt.exec(n);){if(h=s[0],t)switch(h.charAt(0)){case"?":h="{0,1}";break;case"+":case"*":h="{"+h+"}";break;case"|":0===u.length&&(tt=nt(o.matches),tt.openGroup=!0,u.push(tt),o.matches=[],ft=!0)}if(c)k();else switch(h.charAt(0)){case"(?=":break;case"(?!":break;case"(?<=":break;case"(?<!":break;case i.escapeChar:c=!0;t&&k();break;case i.optionalmarker[1]:case i.groupmarker[1]:st();break;case i.optionalmarker[0]:u.push(new v(!1,!0));break;case i.groupmarker[0]:u.push(new v(!0));break;case i.quantifiermarker[0]:it=new v(!1,!1,!0);h=h.replace(/[{}]/g,"");var ct=h.split("|"),p=ct[0].split(","),w=isNaN(p[0])?p[0]:parseInt(p[0]),lt=1===p.length?w:isNaN(p[1])?p[1]:parseInt(p[1]);"*"!==w&&"+"!==w||(w="*"===lt?0:1);it.quantifier={min:w,max:lt,jit:ct[1]};a=0<u.length?u[u.length-1].matches:o.matches;(s=a.pop(),s.isAlternator)&&(a.push(s),a=s.matches,rt=new v(!0),at=a.pop(),a.push(rt),a=rt.matches,s=at);s.isGroup||(s=nt([s]));a.push(s);a.push(it);break;case i.alternatormarker:0<u.length?(e=u[u.length-1],d=e.matches[e.matches.length-1],l=e.openGroup&&(void 0===d.matches||!1===d.isGroup&&!1===d.isAlternator)?u.pop():ht(e.matches)):l=ht(o.matches);l.isAlternator?u.push(l):(l.alternatorGroup?(f=u.pop(),l.alternatorGroup=!1):f=new v(!1,!1,!1,!0),f.matches.push(l),u.push(f),l.openGroup)&&(l.openGroup=!1,ut=new v(!0),ut.alternatorGroup=!0,u.push(ut));break;default:k()}}for(ft&&st();0<u.length;)y=u.pop(),o.matches.push(y);return 0<o.matches.length&&(et(o),g.push(o)),(i.numericInput||i.isRTL)&&ot(g[0]),g}var r=i(2);n.exports={generateMaskSet:u,analyseMask:f}},function(n,t,i){"use strict";i(7);i(9);i(10);i(11);n.exports=i(1)},function(n,t,i){"use strict";function r(n,t,i){return n=-1<i-1&&"."!==t.buffer[i-1]?(n=t.buffer[i-1]+n,-1<i-2&&"."!==t.buffer[i-2]?t.buffer[i-2]+n:"0"+n):"00"+n,f.test(n)}var u=i(1),f;u.extendDefinitions({A:{validator:"[A-Za-z--]",casing:"upper"},"&":{validator:"[0-9A-Za-z--]",casing:"upper"},"#":{validator:"[0-9A-Fa-f]",casing:"upper"}});f=new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]");u.extendAliases({cssunit:{regex:"[+-]?[0-9]+\\.?([0-9]+)?(px|em|rem|ex|%|in|cm|mm|pt|pc)"},url:{regex:"(https?|ftp)//.*",autoUnmask:!1},ip:{mask:"i[i[i]].j[j[j]].k[k[k]].l[l[l]]",definitions:{i:{validator:r},j:{validator:r},k:{validator:r},l:{validator:r}},onUnMask:function(n){return n},inputmode:"numeric"},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,63}]@-{1,63}.-{1,63}[.-{1,63}][.-{1,63}]",greedy:!1,casing:"lower",onBeforePaste:function(n){return n=n.toLowerCase(),n.replace("mailto:","")},definitions:{"*":{validator:"[0-9-A-Za-z--!#$%&'*+/=?^_`{|}~-]"},"-":{validator:"[0-9A-Za-z-]"}},onUnMask:function(n){return n},inputmode:"email"},mac:{mask:"##:##:##:##:##:##"},vin:{mask:"V{13}9{4}",definitions:{V:{validator:"[A-HJ-NPR-Za-hj-npr-z\\d]",casing:"upper"}},clearIncomplete:!0,autoUnmask:!0},ssn:{mask:"999-99-9999",postValidation:function(n){return/^(?!219-09-9999|078-05-1120)(?!666|000|9.{2}).{3}-(?!00).{2}-(?!0{4}).{4}$/.test(n.join(""))}}});n.exports=u},function(n,t,i){"use strict";function s(n){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},s(n)}var r=i(2),e=i(4),f=e.document,o=e.navigator&&e.navigator.userAgent||"",l=0<o.indexOf("MSIE ")||0<o.indexOf("Trident/"),a="ontouchstart"in e,h=/iemobile/i.test(o),c=/iphone/i.test(o)&&!h,u=i(0);n.exports=function v(n,t,i){function wt(n,r,u,f,e){var y=i.greedy,h,a,o,s,c,v,l;e&&(i.greedy=!1);r=r||0;h=[];o=0;do!0===n&&t.validPositions[o]?(c=e&&!0===t.validPositions[o].match.optionality&&void 0===t.validPositions[o+1]&&(!0===t.validPositions[o].generatedInput||t.validPositions[o].input==i.skipOptionalPartCharacter&&0<o)?gt(o,et(o,a,o-1)):t.validPositions[o],s=c.match,a=c.locator.slice(),h.push(!0===u?c.input:!1===u?s.nativeDef:rt(o,s))):(c=ni(o,a,o-1),s=c.match,a=c.locator.slice(),l=!0!==f&&(!1!==i.jitMasking?i.jitMasking:s.jit),v=v&&s.static&&s.def!==i.groupSeparator&&null===s.fn||t.validPositions[o-1]&&s.static&&s.def!==i.groupSeparator&&null===s.fn,v||!1===l||void 0===l||"number"==typeof l&&isFinite(l)&&o<l?h.push(!1===u?s.nativeDef:rt(o,s)):v=!1),o++;while((void 0===ht||o<ht)&&(!0!==s.static||""!==s.def)||o<r);return""===h[h.length-1]&&h.pop(),!1===u&&void 0!==t.maskLength||(t.maskLength=o-1),i.greedy=y,h}function ot(n){t.buffer=void 0;!0!==n&&(t.validPositions={},t.p=0)}function w(n,i,r){var f=-1,e=-1,o=r||t.validPositions,s,u;for(s in void 0===n&&(n=-1),o)u=parseInt(s),o[u]&&(i||!0!==o[u].generatedInput)&&(u<=n&&(f=u),n<=u&&(e=u));return-1===f||f==n?e:-1==e?f:n-f<e-n?f:e}function ai(n){var t=n.locator[n.alternation];return"string"==typeof t&&0<t.length&&(t=t.split(",")[0]),void 0!==t?t.toString():""}function bi(n,t){var i=(null!=n.alternation?n.mloc[ai(n)]:n.locator).join("");if(""!==i)for(;i.length<t;)i+="0";return i}function gt(n,t){var u,s;n=0<n?n-1:0;for(var c=g(n),h=bi(c),f,e,r,o=0;o<t.length;o++)u=t[o],f=bi(u,h.length),s=Math.abs(f-h),(void 0===e||""!==f&&s<e||r&&!i.greedy&&r.match.optionality&&"master"===r.match.newBlockMarker&&(!u.match.optionality||!u.match.newBlockMarker)||r&&r.match.optionalQuantifier&&!u.match.optionalQuantifier)&&(e=s,r=u);return r}function ni(n,i,r){return t.validPositions[n]||gt(n,et(n,i?i.slice():i,r))}function g(n,i){return t.validPositions[n]?t.validPositions[n]:(i||et(n))[0]}function ki(n,i,r){for(var e=!1,f=et(n),u=0;u<f.length;u++){if(f[u].match&&(!(f[u].match.nativeDef!==i.match[r.shiftPositions?"def":"nativeDef"]||r.shiftPositions&&i.match.static)||f[u].match.nativeDef===i.match.nativeDef)){e=!0;break}if(f[u].match&&f[u].match.def===i.match.nativeDef){e=void 0;break}}return!1===e&&void 0!==t.jitOffset[n]&&(e=ki(n+t.jitOffset[n],i,r)),e}function et(n,u,f){function p(u,f,c,l){function w(c,l,a){function st(n,t){var i=0===r.inArray(n,t.matches);return i||r.each(t.matches,function(r,u){if(!0===u.isQuantifier?i=st(n,t.matches[r-1]):Object.prototype.hasOwnProperty.call(u,"matches")&&(i=st(n,u)),i)return!1}),i}function wt(n,i,u){var f,e,o,s;return((t.tests[n]||t.validPositions[n])&&r.each(t.tests[n]||[t.validPositions[n]],function(n,t){if(t.mloc[i])return f=t,!1;var o=void 0!==u?u:t.alternation,r=void 0!==t.locator[o]?t.locator[o].toString().indexOf(i):-1;(void 0===e||r<e)&&-1!==r&&(f=t,e=r)}),f)?(o=f.locator[f.alternation],s=f.mloc[i]||f.mloc[o]||f.locator,s.slice((void 0!==u?u:f.alternation)+1)):void 0!==u?wt(n,i):void 0}function bt(n,t){function r(n){for(var i=[],r=-1,u,t=0,f=n.length;t<f;t++)if("-"===n.charAt(t))for(u=n.charCodeAt(t+1);++r<u;)i.push(String.fromCharCode(r));else r=n.charCodeAt(t),i.push(n.charAt(t));return i.join("")}return n.match.def===t.match.nativeDef||!(!(i.regex||n.match.fn instanceof RegExp&&t.match.fn instanceof RegExp)||!0===n.match.static||!0===t.match.static)&&-1!==r(t.match.fn.toString().replace(/[[\]/]/g,"")).indexOf(r(n.match.fn.toString().replace(/[[\]/]/g,"")))}function ii(r,u){return!0===r.match.static&&!0!==u.match.static&&u.match.fn.test(r.match.def,t,n,!1,i,!1)}function ft(n,t){var i=n.alternation,e=void 0===t||i===t.alternation&&-1===n.locator[i].toString().indexOf(t.locator[i]),f,r,u;if(!e&&i>t.alternation)for(f=t.alternation;f<i;f++)if(n.locator[f]!==t.locator[f]){i=f;e=!0;break}if(e){if(n.mloc=n.mloc||{},r=n.locator[i],void 0!==r){if("string"==typeof r&&(r=r.split(",")[0]),void 0===n.mloc[r]&&(n.mloc[r]=n.locator.slice()),void 0!==t){for(u in t.mloc)"string"==typeof u&&(u=u.split(",")[0]),void 0===n.mloc[u]&&(n.mloc[u]=t.mloc[u]);n.locator[i]=Object.keys(n.mloc).join(",")}return!0}n.alternation=void 0}return!1}function ri(n,t){if(n.locator.length!==t.locator.length)return!1;for(var i=n.alternation+1;i<n.locator.length;i++)if(n.locator[i]!==t.locator[i])return!1;return!0}var kt,dt,yt,pt,et,ct,b,ot,lt,d,ut,it,rt;if(s>i._maxTestPos&&void 0!==a)throw"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+t.mask;if(s===n&&void 0===c.matches)return e.push({match:c,locator:l.reverse(),cd:y,mloc:{}}),!0;if(void 0!==c.matches){if(c.isGroup&&a!==c){if(c=w(u.matches[r.inArray(c,u.matches)+1],l,a),c)return!0}else if(c.isOptional){if(kt=c,dt=e.length,c=p(c,f,l,a),c){if(r.each(e,function(n,t){dt<=n&&(t.match.optionality=!0)}),h=e[e.length-1].match,void 0!==a||!st(h,kt))return!0;v=!0;s=n}}else if(c.isAlternator){var ht=c,g=[],at,ui=e.slice(),gt=l.length,nt=0<f.length?f.shift():-1;if(-1===nt||"string"==typeof nt){var ni=s,ti=f.slice(),k=[],tt;if("string"==typeof nt)k=nt.split(",");else for(tt=0;tt<ht.matches.length;tt++)k.push(tt.toString());if(void 0!==t.excludes[n]){for(var fi=k.slice(),vt=0,ei=t.excludes[n].length;vt<ei;vt++)yt=t.excludes[n][vt].toString().split(":"),l.length==yt[1]&&k.splice(k.indexOf(yt[0]),1);0===k.length&&(delete t.excludes[n],k=fi)}for((!0===i.keepStatic||isFinite(parseInt(i.keepStatic))&&ni>=i.keepStatic)&&(k=k.slice(0,1)),pt=!1,et=0;et<k.length;et++)for(tt=parseInt(k[et]),e=[],f="string"==typeof nt&&wt(s,tt,gt)||ti.slice(),ht.matches[tt]&&w(ht.matches[tt],[tt].concat(l),a)?c=!0:0===et&&(pt=!0),at=e.slice(),s=ni,e=[],ct=0;ct<at.length;ct++){for(b=at[ct],ot=!1,b.match.jit=b.match.jit||pt,b.alternation=b.alternation||gt,ft(b),lt=0;lt<g.length;lt++)if(d=g[lt],"string"!=typeof nt||void 0!==b.alternation&&-1!==r.inArray(b.locator[b.alternation].toString(),k)){if(b.match.nativeDef===d.match.nativeDef){ot=!0;ft(d,b);break}if(bt(b,d)){ft(b,d)&&(ot=!0,g.splice(g.indexOf(d),0,b));break}if(bt(d,b)){ft(d,b);break}if(ii(b,d)){ri(b,d)||void 0!==o.inputmask.userOptions.keepStatic?ft(b,d)&&(ot=!0,g.splice(g.indexOf(d),0,b)):i.keepStatic=!0;break}}ot||g.push(b)}e=ui.concat(g);s=n;v=0<e.length;c=0<g.length;f=ti.slice()}else c=w(ht.matches[nt]||u.matches[nt],[nt].concat(l),a);if(c)return!0}else if(c.isQuantifier&&a!==u.matches[r.inArray(c,u.matches)-1]){for(ut=c,it=0<f.length?f.shift():0;it<(isNaN(ut.quantifier.max)?it+1:ut.quantifier.max)&&s<=n;it++)if(rt=u.matches[r.inArray(ut,u.matches)-1],c=w(rt,[it].concat(l),rt),c){if(h=e[e.length-1].match,h.optionalQuantifier=it>=ut.quantifier.min,h.jit=(it||1)*rt.matches.indexOf(h)>=ut.quantifier.jit,h.optionalQuantifier&&st(h,rt)){v=!0;s=n;break}return h.jit&&(t.jitOffset[n]=rt.matches.length-rt.matches.indexOf(h)),!0}}else if(c=p(c,f,l,a),c)return!0}else s++}for(var b,a=0<f.length?f.shift():0;a<u.matches.length;a++)if(!0!==u.matches[a].isQuantifier){if(b=w(u.matches[a],[a].concat(c),l),b&&s===n)return b;if(n<s)break}}function d(n,t){var u=[];return r.isArray(t)||(t=[t]),0<t.length&&(void 0===t[0].alternation||!0===i.keepStatic?(u=gt(n,t.slice()).locator.slice(),0===u.length&&(u=t[0].locator.slice())):r.each(t,function(n,t){if(""!==t.def)if(0===u.length)u=t.locator.slice();else for(var i=0;i<u.length;i++)t.locator[i]&&-1===u[i].toString().indexOf(t.locator[i])&&(u[i]+=","+t.locator[i])})),u}var b=t.maskToken,s=u?f:0,a=u?u.slice():[0],e=[],v=!1,h,y=u?u.join(""):"",c,w,l,k;if(-1<n&&(void 0===ht||n<ht)){if(void 0===u){for(c=n-1;void 0===(w=t.validPositions[c]||t.tests[c])&&-1<c;)c--;void 0!==w&&-1<c&&(a=d(c,w),y=a.join(""),s=c)}if(t.tests[n]&&t.tests[n][0].cd===y)return t.tests[n];for(l=a.shift();l<b.length;l++)if(k=p(b[l],a,[l]),k&&s===n||n<s)break}return 0!==e.length&&!v||e.push({match:{fn:null,"static":!0,optionality:!1,casing:null,def:"",placeholder:""},locator:[],mloc:{},cd:y}),void 0!==u&&t.tests[n]?r.extend(!0,[],e):(t.tests[n]=r.extend(!0,[],e),t.tests[n])}function nt(){return void 0===t._buffer&&(t._buffer=wt(!1,1),void 0===t.buffer&&(t.buffer=t._buffer.slice())),t._buffer}function y(n){return void 0!==t.buffer&&!0!==n||(t.buffer=wt(!0,w(),!0),void 0===t._buffer&&(t._buffer=t.buffer.slice())),t.buffer}function di(n,u,f){var e,s,l=i.skipOptionalPartCharacter,a=p?f.slice().reverse():f,h,c;if(i.skipOptionalPartCharacter="",!0===n)ot(),t.tests={},n=0,u=f.length,s=vi({begin:0,end:0},!1).begin;else{for(e=n;e<u;e++)delete t.validPositions[e];s=n}for(h=new r.Event("keypress"),e=n;e<u;e++)h.which=a[e].toString().charCodeAt(0),ui=!1,c=d.keypressEvent.call(o,h,!0,!1,!1,s),!1!==c&&(s=c.forwardPosition);i.skipOptionalPartCharacter=l}function ur(n,f,e){var o,s;switch(i.casing||f.casing){case"upper":n=n.toUpperCase();break;case"lower":n=n.toLowerCase();break;case"title":o=t.validPositions[e-1];n=0===e||o&&o.input===String.fromCharCode(u.SPACE)?n.toUpperCase():n.toLowerCase();break;default:r.isFunction(i.casing)&&(s=Array.prototype.slice.call(arguments),s.push(t.validPositions),n=i.casing.apply(this,s))}return n}function fr(n,t,u){for(var f,c=i.greedy?t:t.slice(0,1),o=!1,s=void 0!==u?u.split(","):[],h,e=0;e<s.length;e++)-1!==(h=n.indexOf(s[e]))&&n.splice(h,1);for(f=0;f<n.length;f++)if(-1!==r.inArray(n[f],c)){o=!0;break}return o}function ti(n,u,f,e,o,s){var st=r.extend(!0,{},t.validPositions),ht=r.extend(!0,{},t.tests),k,tt,y=!1,p=!1,v,l,h,nt,c,d=void 0!==o?o:w(),ft,et,it,rt,a,b,ut;if(s&&(it=s.begin,rt=s.end,s.begin>s.end&&(it=s.end,rt=s.begin)),-1===d&&void 0===o)k=0,l=g(k),tt=l.alternation;else for(;0<=d;d--)if(v=t.validPositions[d],v&&void 0!==v.alternation){if(l&&l.locator[v.alternation]!==v.locator[v.alternation])break;k=d;tt=t.validPositions[k].alternation;l=v}if(void 0!==tt){for(c=parseInt(k),t.excludes[c]=t.excludes[c]||[],!0!==n&&t.excludes[c].push(ai(l)+":"+l.alternation),a=[],b=-1,h=c;h<w(void 0,!0)+1;h++)-1===b&&n<=h&&void 0!==u&&(a.push(u),b=a.length-1),nt=t.validPositions[h],nt&&!0!==nt.generatedInput&&(void 0===s||h<it||rt<=h)&&a.push(nt.input),delete t.validPositions[h];for(-1===b&&void 0!==u&&(a.push(u),b=a.length-1);void 0!==t.excludes[c]&&t.excludes[c].length<10;){for(t.tests={},ot(!0),y=!0,h=0;h<a.length&&(ft=y.caret||w(void 0,!0)+1,et=a[h],y=yt(ft,et,!1,e,!0));h++)h===b&&(p=y),1==n&&y&&(p={caretPos:h});if(y)break;if(ot(),l=g(c),t.validPositions=r.extend(!0,{},st),t.tests=r.extend(!0,{},ht),!t.excludes[c]){p=ti(n,u,f,e,c-1,s);break}if(ut=ai(l),-1!==t.excludes[c].indexOf(ut+":"+l.alternation)){p=ti(n,u,f,e,c-1,s);break}for(t.excludes[c].push(ut+":"+l.alternation),h=c;h<w(void 0,!0)+1;h++)delete t.validPositions[h]}}return p&&!1===i.keepStatic||delete t.excludes[c],p}function yt(n,u,f,e,s,h){function d(n){return p?1<n.begin-n.end||n.begin-n.end==1:1<n.end-n.begin||n.end-n.begin==1}function g(n){if(void 0!==n){if(void 0!==n.remove&&(r.isArray(n.remove)||(n.remove=[n.remove]),r.each(n.remove.sort(function(n,t){return t.pos-n.pos}),function(n,t){fi({begin:t,end:t+1})}),n.remove=void 0),void 0!==n.insert&&(r.isArray(n.insert)||(n.insert=[n.insert]),r.each(n.insert.sort(function(n,t){return n.pos-t.pos}),function(n,t){""!==t.c&&yt(t.pos,t.c,void 0===t.strict||t.strict,void 0!==t.fromIsValid?t.fromIsValid:e)}),n.insert=void 0),n.refreshFromBuffer&&n.buffer){var t=n.refreshFromBuffer;di(!0===t?t:t.start,t.end,n.buffer);n.refreshFromBuffer=void 0}void 0!==n.rewritePosition&&(c=n.rewritePosition,n=!0)}return n}function tt(u,f,o){var s=!1;return r.each(et(u),function(h,c){var l=c.match,a,v;if(y(!0),s=null!=l.fn?l.fn.test(f,t,u,o,i,d(n)):(f===l.def||f===i.skipOptionalPartCharacter)&&""!==l.def&&{c:rt(u,l,!0)||l.def,pos:u},!1!==s)return a=void 0!==s.c?s.c:f,v=u,a=a===i.skipOptionalPartCharacter&&!0===l.static?rt(u,l,!0)||l.def:a,s=g(s),!0!==s&&void 0!==s.pos&&s.pos!==u&&(v=s.pos),!0!==s&&void 0===s.pos&&void 0===s.c?!1:(!1===fi(n,r.extend({},c,{input:ur(a,l,v)}),e,v)&&(s=!1),!1)}),s}var c,l,ut,a,w,nt,v,ft,k;if(f=!0===f,c=n,void 0!==n.begin&&(c=p?n.end:n.begin),l=!0,ut=r.extend(!0,{},t.validPositions),!1===i.keepStatic&&void 0!==t.excludes[c]&&!0!==s&&!0!==e)for(a=c;a<(p?n.begin:n.end);a++)void 0!==t.excludes[a]&&(t.excludes[a]=void 0,delete t.tests[a]);if(r.isFunction(i.preValidation)&&!0!==e&&!0!==h&&(l=i.preValidation.call(o,y(),c,u,d(n),i,t,n,f||s),l=g(l)),!0===l){if(void 0===ht||c<ht){if(l=tt(c,u,f),(!f||!0===e)&&!1===l&&!0!==h)if(w=t.validPositions[c],w&&!0===w.match.static&&(w.match.def===u||u===i.skipOptionalPartCharacter))l={caret:b(c)};else if((i.insertMode||void 0===t.validPositions[b(c)]||n.end>c)&&(nt=!1,t.jitOffset[c]&&void 0===t.validPositions[b(c)]&&(l=yt(c+t.jitOffset[c],u,!0),!1!==l&&(!0!==s&&(l.caret=c),nt=!0)),n.end>c&&(t.validPositions[c]=void 0),!nt&&!it(c,i.keepStatic)))for(v=c+1,ft=b(c);v<=ft;v++)if(l=tt(v,u,f),!1!==l){l=gi(c,void 0!==l.pos?l.pos:v)||l;c=v;break}}else l=!1;!1!==l||!i.keepStatic||!st(y())&&0!==c||f||!0===s?d(n)&&t.tests[c]&&1<t.tests[c].length&&i.keepStatic&&!f&&!0!==s&&(l=ti(!0)):l=ti(c,u,f,e,void 0,n);!0===l&&(l={pos:c})}return r.isFunction(i.postValidation)&&!0!==e&&!0!==h&&(k=i.postValidation.call(o,y(!0),void 0!==n.begin?p?n.end:n.begin:n,u,l,i,t,f),void 0!==k&&(l=!0===k?l:k)),l&&void 0===l.pos&&(l.pos=c),!1===l||!0===h?(ot(!0),t.validPositions=r.extend(!0,{},ut)):gi(void 0,c,!0),g(l)}function gi(n,i,u){var f,s,o,e,h,c;if(void 0===n)for(n=i-1;0<n&&!t.validPositions[n];n--);for(f=n;f<i;f++)if(void 0===t.validPositions[f]&&!it(f,!0)&&(s=0==f?g(f):t.validPositions[f-1],s&&(o=et(f).slice(),""===o[o.length-1].match.def&&o.pop(),e=gt(f,o),e&&(!0!==e.match.jit||"master"===e.match.newBlockMarker&&(h=t.validPositions[f+1])&&!0===h.match.optionalQuantifier)&&(e=r.extend({},e,{input:rt(f,e.match,!0)||e.match.def}),e.generatedInput=!0,fi(f,e,!0),!0!==u))))return c=t.validPositions[i].input,t.validPositions[i]=void 0,yt(i,c,!0,!0)}function fi(n,u,f,e){function tt(n,t,i){var r=t[n],u,f;return void 0===r||!0!==r.match.static||!0===r.match.optionality||void 0!==t[0]&&void 0!==t[0].alternation?!1:(u=i.begin<=n-1?t[n-1]&&!0===t[n-1].match.static&&t[n-1]:t[n-1],f=i.end>n+1?t[n+1]&&!0===t[n+1].match.static&&t[n+1]:t[n+1],u&&f)}var d=0,l=void 0!==n.begin?n.begin:n,a=void 0!==n.end?n.end:n,v,b,o,k;if(n.begin>n.end&&(l=n.end,a=n.begin),e=void 0!==e?e:l,l!==a||i.insertMode&&void 0!==t.validPositions[e]&&void 0===f||void 0===u){for(v=r.extend(!0,{},t.validPositions),b=w(void 0,!0),t.p=l,o=b;l<=o;o--)delete t.validPositions[o],void 0===u&&delete t.tests[o+1];var c=!0,p=e,s=p,h,nt;for(u&&(t.validPositions[e]=r.extend(!0,{},u),s++,p++),o=u?a:a-1;o<=b;o++){if(void 0!==(h=v[o])&&!0!==h.generatedInput&&(a<=o||l<=o&&tt(o,v,{begin:l,end:a}))){for(;""!==g(s).match.def;){if(!1!==(nt=ki(s,h,i))||"+"===h.match.def){if("+"===h.match.def&&y(!0),k=yt(s,h.input,"+"!==h.match.def,"+"!==h.match.def),c=!1!==k,p=(k.pos||s)+1,!c&&nt)break}else c=!1;if(c){void 0===u&&h.match.static&&o===n.begin&&d++;break}if(!c&&s>t.maskLength)break;s++}""==g(s).match.def&&(c=!1);s=p}if(!c)break}if(!c)return t.validPositions=r.extend(!0,{},v),ot(!0),!1}else u&&g(e).match.cd===u.match.cd&&(t.validPositions[e]=r.extend(!0,{},u));return ot(!0),d}function it(n,i,r){var u=ni(n).match,f,e,o;return(""===u.def&&(u=g(n).match),!0!==u.static)?u.fn:!0===r&&void 0!==t.validPositions[n]&&!0!==t.validPositions[n].generatedInput?!0:!0!==i&&-1<n?r?(f=et(n),f.length>1+(""===f[f.length-1].match.def?1:0)):(e=gt(n,et(n)),o=rt(n,e.match),e.match.def!==o):!1}function b(n,t,i){void 0===i&&(i=!0);for(var r=n+1;""!==g(r).match.def&&(!0===t&&(!0!==g(r).match.newBlockMarker||!it(r,void 0,!0))||!0!==t&&!it(r,void 0,i));)r++;return r}function ii(n,t){var i=n,r;if(i<=0)return 0;for(;0<--i&&(!0===t&&!0!==g(i).match.newBlockMarker||!0!==t&&!it(i,void 0,!0)&&(r=et(i),r.length<2||2===r.length&&""===r[1].match.def)););return i}function ut(n,t,f,e,o){var s,h,c,l;e&&r.isFunction(i.onBeforeWrite)&&(s=i.onBeforeWrite.call(lt,e,t,f,i),s&&(s.refreshFromBuffer&&(h=s.refreshFromBuffer,di(!0===h?h:h.start,h.end,s.buffer||t),t=y(!0)),void 0!==f&&(f=void 0!==s.caret?s.caret:f)));void 0!==n&&(n.inputmask._valueSet(t.join("")),void 0===f||void 0!==e&&"blur"===e.type||tt(n,f,void 0,void 0,void 0!==e&&"keydown"===e.type&&(e.keyCode===u.DELETE||e.keyCode===u.BACKSPACE)),!0===o)&&(c=r(n),l=n.inputmask._valueGet(),dt=!0,c.trigger("input"),setTimeout(function(){l===nt().join("")?c.trigger("cleared"):!0===st(t)&&c.trigger("complete")},0))}function rt(n,u,f){var e,s,h,o;if(u=u||g(n).match,void 0!==u.placeholder||!0===f)return r.isFunction(u.placeholder)?u.placeholder(i):u.placeholder;if(!0!==u.static)return i.placeholder.charAt(n%i.placeholder.length);if(-1<n&&void 0===t.validPositions[n]&&(e=et(n),s=[],e.length>1+(""===e[e.length-1].match.def?1:0)))for(o=0;o<e.length;o++)if(""!==e[o].match.def&&!0!==e[o].match.optionality&&!0!==e[o].match.optionalQuantifier&&(!0===e[o].match.static||void 0===h||!1!==e[o].match.fn.test(h.match.def,t,n,!0,i))&&(s.push(e[o]),!0===e[o].match.static&&(h=e[o]),1<s.length&&/[0-9a-bA-Z]/.test(s[0].match.def)))return i.placeholder.charAt(n%i.placeholder.length);return u.def}function ei(n,t){var i,r,u;l?n.inputmask._valueGet()!==t&&(n.placeholder!==t||""===n.placeholder)&&(i=y().slice(),r=n.inputmask._valueGet(),r!==t&&(u=w(),-1===u&&r===nt().join("")?i=[]:-1!==u&&ri(i),ut(n,i))):n.placeholder!==t&&(n.placeholder=t,""===n.placeholder&&n.removeAttribute("placeholder"))}function vi(n,u){function v(n){var u,e,f;if(""!==i.radixPoint&&0!==i.digits&&(u=t.validPositions,void 0===u[n]||u[n].input===rt(n))){if(n<b(-1))return!0;if(e=r.inArray(i.radixPoint,y()),-1!==e){for(f in u)if(u[f]&&e<f&&u[f].input!==rt(f))return!1;return!0}}return!1}var s,a;if(u&&(p?n.end=n.begin:n.begin=n.end),n.begin===n.end){switch(i.positionCaretOnClick){case"none":break;case"select":n={begin:0,end:y().length};break;case"ignore":n.end=n.begin=b(w());break;case"radixFocus":if(v(n.begin)){s=y().join("").indexOf(i.radixPoint);n.end=n.begin=i.numericInput?b(s):s;break}default:var e=n.begin,h=w(e,!0),f=b(-1!==h||it(0)?h:0);if(e<f)n.end=n.begin=it(e,!0)||it(e-1,!0)?e:b(e);else{var c=t.validPositions[h],o=ni(f,c?c.match.locator:void 0,c),l=rt(f,o.match);(""===l||y()[f]===l||!0===o.match.optionalQuantifier||!0===o.match.newBlockMarker)&&(it(f,i.keepStatic)||o.match.def!==l)||(a=b(f),(a<=e||e===f)&&(f=a));n.end=n.begin=f}}return n}}function bt(n,u,f,e,o){function lt(n,t){for(var u,f,r=wt(!0,0).slice(n,b(n)).join("").replace(/'/g,""),i=r.indexOf(t);0<i&&" "===r[i-1];)i--;return u=0===i&&!it(n)&&(g(n).match.nativeDef===t.charAt(0)||!0===g(n).match.static&&g(n).match.nativeDef==="'"+t.charAt(0)||" "===g(n).match.nativeDef&&(g(n+1).match.nativeDef===t.charAt(0)||!0===g(n+1).match.static&&g(n+1).match.nativeDef==="'"+t.charAt(0))),!u&&0<i&&!it(n,!1,!0)&&(f=b(n),c.caretPos.begin<f&&(c.caretPos={begin:f})),u}var c=this||n.inputmask,nt=e.slice(),tt="",a=-1,s=void 0,h,ft,v,l,k,et,ht,ct;if(ot(),t.tests={},a=i.radixPoint?vi({begin:0,end:0}).begin:0,t.p=a,c.caretPos={begin:a},h=[],ft=c.caretPos,r.each(nt,function(i,u){var e,o;void 0!==u&&(void 0===t.validPositions[i]&&nt[i]===rt(i)&&it(i,!0)&&!1===yt(i,nt[i],!0,void 0,void 0,!0)?t.p++:(e=new r.Event("_checkval"),e.which=u.toString().charCodeAt(0),tt+=u,o=w(void 0,!0),lt(a,tt)?s=d.keypressEvent.call(n,e,!0,!1,f,o+1):(s=d.keypressEvent.call(n,e,!0,!1,f,c.caretPos.begin),s&&(a=c.caretPos.begin+1,tt="")),s?(void 0!==s.pos&&t.validPositions[s.pos]&&!0===t.validPositions[s.pos].match.static&&void 0===t.validPositions[s.pos].alternation&&(h.push(s.pos),p||(s.forwardPosition=s.pos+1)),ut(void 0,y(),s.forwardPosition,e,!1),c.caretPos={begin:s.forwardPosition,end:s.forwardPosition},ft=c.caretPos):c.caretPos=ft))}),0<h.length)if(k=b(-1,void 0,!1),!st(y())&&h.length<=k||st(y())&&0<h.length&&h.length!==k&&0===h[0])for(et=k;void 0!==(v=h.shift());){if(ht=new r.Event("_checkval"),l=t.validPositions[v],l.generatedInput=!0,ht.which=l.input.charCodeAt(0),s=d.keypressEvent.call(n,ht,!0,!1,f,et),s&&void 0!==s.pos&&s.pos!==v&&t.validPositions[s.pos]&&!0===t.validPositions[s.pos].match.static)h.push(s.pos);else if(!s)break;et++}else for(;v=h.pop();)l=t.validPositions[v],l&&(l.generatedInput=!0);if(u)for(ct in ut(n,y(),s?s.forwardPosition:void 0,o||new r.Event("checkval"),o&&"input"===o.type),t.validPositions)!0!==t.validPositions[ct].match.generated&&delete t.validPositions[ct].generatedInput}function nr(n){var e,u,f,o,s;if(n){if(void 0===n.inputmask)return n.value;n.inputmask&&n.inputmask.refreshValue&&vt(n,n.inputmask._valueGet(!0))}e=[];u=t.validPositions;for(f in u)u[f]&&u[f].match&&(1!=u[f].match.static||!0!==u[f].generatedInput)&&e.push(u[f].input);return o=0===e.length?"":(p?e.reverse():e).join(""),r.isFunction(i.onUnMask)&&(s=(p?y().slice().reverse():y()).join(""),o=i.onUnMask.call(lt,s,o,i)),o}function at(n){return!p||"number"!=typeof n||i.greedy&&""===i.placeholder||!o||(n=o.inputmask._valueGet().length-n),n}function tt(n,t,u,o,s){var h,c,a,l;if(void 0===t)return"selectionStart"in n&&"selectionEnd"in n?(t=n.selectionStart,u=n.selectionEnd):e.getSelection?(h=e.getSelection().getRangeAt(0),h.commonAncestorContainer.parentNode!==n&&h.commonAncestorContainer!==n||(t=h.startOffset,u=h.endOffset)):f.selection&&f.selection.createRange&&(h=f.selection.createRange(),t=0-h.duplicate().moveStart("character",-n.inputmask._valueGet().length),u=t+h.text.length),{begin:o?t:at(t),end:o?u:at(u)};(r.isArray(t)&&(u=p?t[0]:t[1],t=p?t[1]:t[0]),void 0!==t.begin&&(u=p?t.begin:t.end,t=p?t.end:t.begin),"number"==typeof t)&&(t=o?t:at(t),u=o?u:at(u),u="number"==typeof u?u:t,c=parseInt(((n.ownerDocument.defaultView||e).getComputedStyle?(n.ownerDocument.defaultView||e).getComputedStyle(n,null):n.currentStyle).fontSize)*u,(n.scrollLeft=c>n.scrollWidth?c:0,n.inputmask.caretPos={begin:t,end:u},i.insertModeVisual&&!1===i.insertMode&&t===u&&(s||u++),n===(n.inputmask.shadowRoot||f).activeElement)&&("setSelectionRange"in n?n.setSelectionRange(t,u):e.getSelection?((h=f.createRange(),void 0===n.firstChild||null===n.firstChild)&&(a=f.createTextNode(""),n.appendChild(a)),h.setStart(n.firstChild,t<n.inputmask._valueGet().length?t:n.inputmask._valueGet().length),h.setEnd(n.firstChild,u<n.inputmask._valueGet().length?u:n.inputmask._valueGet().length),h.collapse(!0),l=e.getSelection(),l.removeAllRanges(),l.addRange(h)):n.createTextRange&&(h=n.createTextRange(),h.collapse(!0),h.moveEnd("character",u),h.moveStart("character",t),h.select())))}function tr(n){for(var h=wt(!0,w(),!0,!0),e=h.length,c=w(),o={},f=t.validPositions[c],l=void 0!==f?f.locator.slice():void 0,u,s,i=c+1;i<h.length;i++)u=ni(i,l,i-1),l=u.locator.slice(),o[i]=r.extend(!0,{},u);for(s=f&&void 0!==f.alternation?f.locator[f.alternation]:void 0,i=e-1;c<i&&(u=o[i],(u.match.optionality||u.match.optionalQuantifier&&u.match.newBlockMarker||s&&(s!==o[i].locator[f.alternation]&&1!=u.match.static||!0===u.match.static&&u.locator[f.alternation]&&fr(u.locator[f.alternation].toString().split(","),s.toString().split(","))&&""!==et(i)[0].def))&&h[i]===rt(i,u.match));i--)e--;return n?{l:e,def:o[e]?o[e].match:void 0}:e}function ri(n){n.length=0;for(var i=wt(!0,0,!0,void 0,!0),t;void 0!==(t=i.shift());)n.push(t);return n}function st(n){var u,f;if(r.isFunction(i.isComplete))return i.isComplete(n,i);if("*"!==i.repeat){var o=!1,e=tr(!0),s=ii(e.l);if(void 0===e.def||e.def.newBlockMarker||e.def.optionality||e.def.optionalQuantifier)for(o=!0,u=0;u<=s;u++)if(f=ni(u).match,!0!==f.static&&void 0===t.validPositions[u]&&!0!==f.optionality&&!0!==f.optionalQuantifier||!0===f.static&&n[u]!==rt(u,f)){o=!1;break}return o}}function ir(n,r,f,e){var h,s,c,o,l;(i.numericInput||p)&&(r===u.BACKSPACE?r=u.DELETE:r===u.DELETE&&(r=u.BACKSPACE),p)&&(h=f.end,f.end=f.begin,f.begin=h);s=w(void 0,!0);(f.end>=y().length&&s>=f.end&&(f.end=s+1),r===u.BACKSPACE?f.end-f.begin<1&&(f.begin=ii(f.begin)):r===u.DELETE&&f.begin===f.end&&(f.end=it(f.end,!0,!0)?f.end+1:b(f.end)+1),!1!==(c=fi(f)))&&((!0!==e&&!1!==i.keepStatic||null!==i.regex&&-1!==g(f.begin).match.def.indexOf("|"))&&(o=ti(!0),o&&(l=void 0!==o.caret?o.caret:o.pos?b(o.pos.begin?o.pos.begin:o.pos):w(-1,!0),(r!==u.DELETE||f.begin>l)&&f.begin)),!0!==e&&(t.p=r===u.DELETE?f.begin+c:f.begin))}function vt(n,t){n.inputmask.refreshValue=!1;r.isFunction(i.onBeforeMask)&&(t=i.onBeforeMask.call(lt,t,i)||t);t=t.toString().split("");bt(n,!0,!1,t);ft=y().join("");(i.clearMaskOnLostFocus||i.clearIncomplete)&&n.inputmask._valueGet()===nt().join("")&&-1===w()&&n.inputmask._valueSet("")}function er(n){function l(n,t){function h(n){function c(n){if(r.valHooks&&(void 0===r.valHooks[n]||!0!==r.valHooks[n].inputmaskpatch)){var i=r.valHooks[n]&&r.valHooks[n].get?r.valHooks[n].get:function(n){return n.value},u=r.valHooks[n]&&r.valHooks[n].set?r.valHooks[n].set:function(n,t){return n.value=t,n};r.valHooks[n]={get:function(n){if(n.inputmask){if(n.inputmask.opts.autoUnmask)return n.inputmask.unmaskedvalue();var r=i(n);return-1!==w(void 0,void 0,n.inputmask.maskset.validPositions)||!0!==t.nullable?r:""}return i(n)},set:function(n,t){var i=u(n,t);return n.inputmask&&vt(n,t),i},inputmaskpatch:!0}}}function o(){return this.inputmask?this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():-1!==w()||!0!==t.nullable?(this.inputmask.shadowRoot||f.activeElement)===this&&t.clearMaskOnLostFocus?(p?ri(y().slice()).reverse():ri(y().slice())).join(""):i.call(this):"":i.call(this)}function h(n){u.call(this,n);this.inputmask&&vt(this,n)}function l(n){k.on(n,"mouseenter",function(){var t=this,n=this.inputmask._valueGet(!0);n!==(p?y().reverse():y()).join("")&&vt(this,n)})}var i,u,e;n.inputmask.__valueGet||(!0!==t.noValuePatching&&(Object.getOwnPropertyDescriptor?("function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"===s("test".__proto__)?function(n){return n.__proto__}:function(n){return n.constructor.prototype}),e=Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(n),"value"):void 0,e&&e.get&&e.set?(i=e.get,u=e.set,Object.defineProperty(n,"value",{get:o,set:h,configurable:!0})):"input"!==n.tagName.toLowerCase()&&(i=function(){return this.textContent},u=function(n){this.textContent=n},Object.defineProperty(n,"value",{get:o,set:h,configurable:!0}))):f.__lookupGetter__&&n.__lookupGetter__("value")&&(i=n.__lookupGetter__("value"),u=n.__lookupSetter__("value"),n.__defineGetter__("value",o),n.__defineSetter__("value",h)),n.inputmask.__valueGet=i,n.inputmask.__valueSet=u),n.inputmask._valueGet=function(n){return p&&!0!==n?i.call(this.el).split("").reverse().join(""):i.call(this.el)},n.inputmask._valueSet=function(n,t){u.call(this.el,null==n?"":!0!==t&&p?n.split("").reverse().join(""):n)},void 0===i&&(i=function(){return this.value},u=function(n){this.value=n},c(n.type),l(n)))}var o,i,e;return"textarea"!==n.tagName.toLowerCase()&&t.ignorables.push(u.ENTER),o=n.getAttribute("type"),i="input"===n.tagName.toLowerCase()&&-1!==r.inArray(o,t.supportsInputType)||n.isContentEditable||"textarea"===n.tagName.toLowerCase(),i||("input"===n.tagName.toLowerCase()?(e=f.createElement("input"),e.setAttribute("type",o),i="text"===e.type,e=null):i="partial"),!1!==i?h(n):n.inputmask=void 0,i}var h,t,e;k.off(n);h=l(n,i);!1!==h&&(o=n,kt=r(o),pt=o.placeholder,ht=void 0!==o?o.maxLength:void 0,-1===ht&&(ht=void 0),"inputMode"in o&&null===o.getAttribute("inputmode")&&(o.inputMode=i.inputmode,o.setAttribute("inputmode",i.inputmode)),!0===h&&(i.showMaskOnFocus=i.showMaskOnFocus&&-1===["cc-number","cc-exp"].indexOf(o.autocomplete),c&&(i.insertModeVisual=!1),k.on(o,"submit",d.submitEvent),k.on(o,"reset",d.resetEvent),k.on(o,"blur",d.blurEvent),k.on(o,"focus",d.focusEvent),k.on(o,"invalid",d.invalidEvent),k.on(o,"click",d.clickEvent),k.on(o,"mouseleave",d.mouseleaveEvent),k.on(o,"mouseenter",d.mouseenterEvent),k.on(o,"paste",d.pasteEvent),k.on(o,"cut",d.cutEvent),k.on(o,"complete",i.oncomplete),k.on(o,"incomplete",i.onincomplete),k.on(o,"cleared",i.oncleared),a||!0===i.inputEventOnly?o.removeAttribute("maxLength"):(k.on(o,"keydown",d.keydownEvent),k.on(o,"keypress",d.keypressEvent)),k.on(o,"input",d.inputFallBackEvent),k.on(o,"compositionend",d.compositionendEvent)),k.on(o,"setvalue",d.setValueEvent),ft=nt().join(""),t=(o.inputmask.shadowRoot||f).activeElement,(""!==o.inputmask._valueGet(!0)||!1===i.clearMaskOnLostFocus||t===o)&&(vt(o,o.inputmask._valueGet(!0),i),e=y().slice(),!1===st(e)&&i.clearIncomplete&&ot(),i.clearMaskOnLostFocus&&t!==o&&(-1===w()?e=[]:ri(e)),(!1===i.clearMaskOnLostFocus||i.showMaskOnFocus&&t===o||""!==o.inputmask._valueGet(!0))&&ut(o,e),t===o&&tt(o,b(w()))))}var k,d,ct,wi,rr,si;t=t||this.maskset;i=i||this.opts;var lt=this,o=this.el,p=this.isRTL||(this.isRTL=i.numericInput),ft,kt,hi=!1,dt=!1,ci=!1,ui=!1,ht,li=!1,pt=void 0;if(k={on:function(n,t,f){var e=function(t){var e,h,o,s;if(t.originalEvent&&(t=t.originalEvent||t,arguments[0]=t),e=this,void 0===e.inputmask&&"FORM"!==this.nodeName)o=r.data(e,"_inputmask_opts"),o?new Inputmask(o).mask(e):k.off(e);else{if("setvalue"===t.type||"FORM"===this.nodeName||!(e.disabled||e.readOnly&&!("keydown"===t.type&&t.ctrlKey&&67===t.keyCode||!1===i.tabThrough&&t.keyCode===u.TAB))){switch(t.type){case"input":if(!0===dt||t.inputType&&"insertCompositionText"===t.inputType)return dt=!1,t.preventDefault();break;case"keydown":hi=!1;dt=!1;break;case"keypress":if(!0===hi)return t.preventDefault();hi=!0;break;case"click":case"focus":return ci?(ci=!1,n.blur(),ei(n,(p?nt().slice().reverse():nt()).join("")),setTimeout(function(){n.focus()},3e3)):(h=arguments,setTimeout(function(){n.inputmask&&f.apply(e,h)},0)),!1}return s=f.apply(e,arguments),!1===s&&(t.preventDefault(),t.stopPropagation()),s}t.preventDefault()}};n.inputmask.events[t]=n.inputmask.events[t]||[];n.inputmask.events[t].push(e);-1!==r.inArray(t,["submit","reset"])?null!==n.form&&r(n.form).on(t,e):r(n).on(t,e)},off:function(n,t){var i;n.inputmask&&n.inputmask.events&&(t?(i=[],i[t]=n.inputmask.events[t]):i=n.inputmask.events,r.each(i,function(t,i){for(;0<i.length;){var u=i.pop();-1!==r.inArray(t,["submit","reset"])?null!==n.form&&r(n.form).off(t,u):r(n).off(t,u)}delete n.inputmask.events[t]}))}},d={keydownEvent:function(n){var e=this,l=r(e),o=n.keyCode,f=tt(e),h=i.onKeyDown.call(this,n,y(),f,i),s;if(void 0!==h)return h;o!==u.BACKSPACE&&o!==u.DELETE&&(!c||o!==u.BACKSPACE_SAFARI)&&(!n.ctrlKey||o!==u.X||"oncut"in e)?o===u.END||o===u.PAGE_DOWN?(n.preventDefault(),s=b(w()),tt(e,n.shiftKey?f.begin:s,s,!0)):o===u.HOME&&!n.shiftKey||o===u.PAGE_UP?(n.preventDefault(),tt(e,0,n.shiftKey?f.begin:0,!0)):(i.undoOnEscape&&o===u.ESCAPE||90===o&&n.ctrlKey)&&!0!==n.altKey?(bt(e,!0,!1,ft.split("")),l.trigger("click")):!0===i.tabThrough&&o===u.TAB?(!0===n.shiftKey?(!0===g(f.begin).match.static&&(f.begin=b(f.begin)),f.end=ii(f.begin,!0),f.begin=ii(f.end,!0)):(f.begin=b(f.begin,!0),f.end=b(f.begin,!0),f.end<t.maskLength&&f.end--),f.begin<t.maskLength&&(n.preventDefault(),tt(e,f.begin,f.end))):n.shiftKey||i.insertModeVisual&&!1===i.insertMode&&(o===u.RIGHT?setTimeout(function(){var n=tt(e);tt(e,n.begin)},0):o===u.LEFT&&setTimeout(function(){var n=at(e.inputmask.caretPos.begin),i=at(e.inputmask.caretPos.end);tt(e,p?n+(n===t.maskLength?0:1):n-(0===n?0:1))},0)):(n.preventDefault(),ir(e,o,f),ut(e,y(!0),t.p,n,e.inputmask._valueGet()!==y().join("")));ui=-1!==r.inArray(o,i.ignorables)},keypressEvent:function(n,f,e,o,s){var a=this,k=r(a),c=n.which||n.charCode||n.keyCode,v,l,p,h,w;return!(!0===f||n.ctrlKey&&n.altKey)&&(n.ctrlKey||n.metaKey||ui)?(c===u.ENTER&&ft!==y().join("")&&(ft=y().join(""),setTimeout(function(){k.trigger("change")},0)),dt=!0,!0):c&&(44!==c&&46!==c||3!==n.location||""===i.radixPoint||(c=i.radixPoint.charCodeAt(0)),v=f?{begin:s,end:s}:tt(a),p=String.fromCharCode(c),t.writeOutBuffer=!0,h=yt(v,p,o),(!1!==h&&(ot(!0),l=void 0!==h.caret?h.caret:b(h.pos.begin?h.pos.begin:h.pos),t.p=l),l=i.numericInput&&void 0===h.caret?ii(l):l,!1!==e&&(setTimeout(function(){i.onKeyValidation.call(a,c,h)},0),t.writeOutBuffer&&!1!==h))&&(w=y(),ut(a,w,l,n,!0!==f)),n.preventDefault(),f)?(!1!==h&&(h.forwardPosition=l),h):void 0},pasteEvent:function(n){var c=this,t=this.inputmask._valueGet(!0),u=tt(this),h,o,s,f;if(p&&(h=u.end,u.end=u.begin,u.begin=h),o=t.substr(0,u.begin),s=t.substr(u.end,t.length),o==(p?nt().slice().reverse():nt()).slice(0,u.begin).join("")&&(o=""),s==(p?nt().slice().reverse():nt()).slice(u.end).join("")&&(s=""),e.clipboardData&&e.clipboardData.getData)t=o+e.clipboardData.getData("Text")+s;else{if(!n.clipboardData||!n.clipboardData.getData)return!0;t=o+n.clipboardData.getData("text/plain")+s}if(f=t,r.isFunction(i.onBeforePaste)){if(f=i.onBeforePaste.call(lt,t,i),!1===f)return n.preventDefault();f=f||t}return bt(this,!1,!1,f.toString().split("")),ut(this,y(),b(w()),n,ft!==y().join("")),n.preventDefault()},inputFallBackEvent:function(n){function a(n,t,i){var r,u;return h&&(r=t.replace(y().join(""),""),1===r.length&&(u=t.split(""),u.splice(i.begin,0,r),t=u.join(""))),t}function v(n,t,r){for(var f,e,h=n.substr(0,r.begin).split(""),c=n.substr(r.begin).split(""),l=t.substr(0,r.begin).split(""),a=t.substr(r.begin).split(""),p=h.length>=l.length?h.length:l.length,w=c.length>=a.length?c.length:a.length,o,u,s="",v=[],y;h.length<p;)h.push("~");for(;l.length<p;)l.push("~");for(;c.length<w;)c.unshift("~");for(;a.length<w;)a.unshift("~");for(f=h.concat(c),e=l.concat(a),u=0,o=f.length;u<o;u++)switch(y=rt(at(u)),s){case"insertText":e[u-1]===f[u]&&r.begin==f.length-1&&v.push(f[u]);u=o;break;case"insertReplacementText":"~"===f[u]?r.end++:u=o;break;case"deleteContentBackward":"~"===f[u]?r.end++:u=o;break;default:f[u]!==e[u]&&("~"!==f[u+1]&&f[u+1]!==y&&void 0!==f[u+1]||(e[u]!==y||"~"!==e[u+1])&&"~"!==e[u]?"~"===e[u+1]&&e[u]===f[u+1]?(s="insertText",v.push(f[u]),r.begin--,r.end--):f[u]!==y&&"~"!==f[u]&&("~"===f[u+1]||e[u]!==f[u]&&e[u+1]===f[u+1])?(s="insertReplacementText",v.push(f[u]),r.begin--):"~"===f[u]?(s="deleteContentBackward",!it(at(u),!0)&&e[u]!==i.radixPoint||r.end++):u=o:(s="insertText",v.push(f[u]),r.begin--,r.end--))}return{action:s,data:v,caret:r}}var t=this,e=t.inputmask._valueGet(!0),l=(p?y().slice().reverse():y()).join(""),o=tt(t,void 0,void 0,!0),s,c;if(l!==e){e=a(t,e,o);s=v(e,l,o);switch((t.inputmask.shadowRoot||f).activeElement!==t&&t.focus(),ut(t,y()),tt(t,o.begin,o.end,!0),s.action){case"insertText":case"insertReplacementText":r.each(s.data,function(n,i){var u=new r.Event("keypress");u.which=i.charCodeAt(0);ui=!1;d.keypressEvent.call(t,u)});setTimeout(function(){kt.trigger("keyup")},0);break;case"deleteContentBackward":c=new r.Event("keydown");c.keyCode=u.BACKSPACE;d.keydownEvent.call(t,c);break;default:vt(t,e)}n.preventDefault()}},compositionendEvent:function(){kt.trigger("input")},setValueEvent:function(n,t,i){var u=this,r=n&&n.detail?n.detail[0]:t;void 0===r&&(r=this.inputmask._valueGet(!0));vt(this,r);(n.detail&&void 0!==n.detail[1]||void 0!==i)&&tt(this,n.detail?n.detail[1]:i)},focusEvent:function(n){var r=this,t=this.inputmask._valueGet();i.showMaskOnFocus&&t!==y().join("")&&ut(this,y(),b(w()));!0!==i.positionCaretOnTab||!1!==li||st(y())&&-1!==w()||d.clickEvent.apply(this,[n,!0]);ft=y().join("")},invalidEvent:function(){ci=!0},mouseleaveEvent:function(){var n=this;li=!1;i.clearMaskOnLostFocus&&(this.inputmask.shadowRoot||f).activeElement!==this&&ei(this,pt)},clickEvent:function(n,t){var r=this,i;(this.inputmask.shadowRoot||f).activeElement===this&&(i=vi(tt(this),t),void 0!==i&&tt(this,i))},cutEvent:function(n){var s=this,i=tt(this),o=e.clipboardData||n.clipboardData,r=p?y().slice(i.end,i.begin):y().slice(i.begin,i.end);o.setData("text",p?r.reverse().join(""):r.join(""));f.execCommand&&f.execCommand("copy");ir(this,u.DELETE,i);ut(this,y(),t.p,n,ft!==y().join(""))},blurEvent:function(n){var f=r(this),e=this,u,t;this.inputmask&&(ei(this,pt),u=this.inputmask._valueGet(),t=y().slice(),""!==u&&(i.clearMaskOnLostFocus&&(-1===w()&&u===nt().join("")?t=[]:ri(t)),!1===st(t)&&(setTimeout(function(){f.trigger("incomplete")},0),i.clearIncomplete&&(ot(),t=i.clearMaskOnLostFocus?[]:nt().slice())),ut(this,t,void 0,n)),ft!==y().join("")&&(ft=y().join(""),f.trigger("change")))},mouseenterEvent:function(){var n=this;li=!0;(this.inputmask.shadowRoot||f).activeElement!==this&&(null==pt&&this.placeholder!==pt&&(pt=this.placeholder),i.showMaskOnHover&&ei(this,(p?nt().slice().reverse():nt()).join("")))},submitEvent:function(){ft!==y().join("")&&kt.trigger("change");i.clearMaskOnLostFocus&&-1===w()&&o.inputmask._valueGet&&o.inputmask._valueGet()===nt().join("")&&o.inputmask._valueSet("");i.clearIncomplete&&!1===st(y())&&o.inputmask._valueSet("");i.removeMaskOnSubmit&&(o.inputmask._valueSet(o.inputmask.unmaskedvalue(),!0),setTimeout(function(){ut(o,y())},0))},resetEvent:function(){o.inputmask.refreshValue=!0;setTimeout(function(){vt(o,o.inputmask._valueGet(!0))},0)}},void 0!==n)switch(n.action){case"isComplete":return o=n.el,st(y());case"unmaskedvalue":return void 0!==o&&void 0===n.value||(ct=n.value,ct=(r.isFunction(i.onBeforeMask)&&i.onBeforeMask.call(lt,ct,i)||ct).split(""),bt.call(this,void 0,!1,!1,ct),r.isFunction(i.onBeforeWrite)&&i.onBeforeWrite.call(lt,void 0,y(),0,i)),nr(o);case"mask":er(o);break;case"format":return ct=(r.isFunction(i.onBeforeMask)&&i.onBeforeMask.call(lt,n.value,i)||n.value).split(""),bt.call(this,void 0,!0,!1,ct),n.metadata?{value:p?y().slice().reverse().join(""):y().join(""),metadata:v.call(this,{action:"getmetadata"},t,i)}:p?y().slice().reverse().join(""):y().join("");case"isValid":n.value?(ct=(r.isFunction(i.onBeforeMask)&&i.onBeforeMask.call(lt,n.value,i)||n.value).split(""),bt.call(this,void 0,!0,!1,ct)):n.value=p?y().slice().reverse().join(""):y().join("");for(var yi=y(),pi=tr(),oi=yi.length-1;pi<oi&&!it(oi);oi--);return yi.splice(pi,oi+1-pi),st(yi)&&n.value===(p?y().slice().reverse().join(""):y().join(""));case"getemptymask":return nt().join("");case"remove":return o&&o.inputmask&&(r.data(o,"_inputmask_opts",null),kt=r(o),wi=i.autoUnmask?nr(o):o.inputmask._valueGet(i.autoUnmask),wi!==nt().join("")?o.inputmask._valueSet(wi,i.autoUnmask):o.inputmask._valueSet(""),k.off(o),Object.getOwnPropertyDescriptor&&Object.getPrototypeOf?(rr=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(o),"value"),rr&&o.inputmask.__valueGet&&Object.defineProperty(o,"value",{get:o.inputmask.__valueGet,set:o.inputmask.__valueSet,configurable:!0})):f.__lookupGetter__&&o.__lookupGetter__("value")&&o.inputmask.__valueGet&&(o.__defineGetter__("value",o.inputmask.__valueGet),o.__defineSetter__("value",o.inputmask.__valueSet)),o.inputmask=void 0),o;case"getmetadata":return r.isArray(t.metadata)?(si=wt(!0,0,!1).join(""),r.each(t.metadata,function(n,t){if(t.mask===si)return si=t,!1}),si):t.metadata}}},function(n,t,i){"use strict";function s(n){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},s(n)}function a(n){var i=new RegExp("\\d+$").exec(n[0]),t;return i&&void 0!==i[0]?(t=u[n[0][0]+"x"].slice(""),t[0]=t[0](i[0]),t[3]=t[3](i[0]),t):u[n[0]]?u[n[0]]:void 0}function f(n){var r,t,i,f;if(!n.tokenizer){r=[];t=[];for(i in u)/\.*x$/.test(i)?(f=i[0]+"\\d+",-1===t.indexOf(f)&&t.push(f)):-1===r.indexOf(i[0])&&r.push(i[0]);n.tokenizer="("+(0<t.length?t.join("|")+"|":"")+r.join("+|")+")+?|.";n.tokenizer=new RegExp(n.tokenizer,"g")}return n.tokenizer}function w(n,t){return(!isFinite(n.rawday)||"29"==n.day&&!isFinite(n.rawyear)||new Date(n.date.getFullYear(),isFinite(n.rawmonth)?n.month:n.date.getMonth()+1,0).getDate()>=n.day)&&t}function b(n,t){var i=!0,r,u;return t.min&&(n.rawyear&&(r=n.rawyear.replace(/[^0-9]/g,""),u=t.min.year.substr(0,r.length),i=u<=r),n.year===n.rawyear&&t.min.date.getTime()==t.min.date.getTime()&&(i=t.min.date.getTime()<=n.date.getTime())),i&&t.max&&t.max.date.getTime()==t.max.date.getTime()&&(i=t.max.date.getTime()>=n.date.getTime()),i}function c(n,t,i,r){var u="",o,s,h;for(f(i).lastIndex=0;o=f(i).exec(n);)if(void 0===t)if(s=a(o))u+="("+s[0]+")";else switch(o[0]){case"[":u+="(";break;case"]":u+=")?";break;default:u+=e.escapeRegex(o[0])}else(s=a(o))?!0!==r&&s[3]?(h=s[3],u+=h.call(t.date)):u+=s[2]?t["raw"+s[2]]:o[0]:u+=o[0];return u}function r(n,t){for(n=String(n),t=t||2;n.length<t;)n="0"+n;return n}function o(n,t,i){function a(n){return n.replace(/[^0-9]/g,"0")}function v(n,t){n[e]=a(t);n["raw"+e]=t;void 0!==h&&h.call(n.date,"month"==e?parseInt(n[e])-1:n[e])}var l={date:new Date(1,0,1)},e,r=n,o,h,c;if("string"==typeof r){for(f(i).lastIndex=0;o=f(i).exec(t);)c=r.slice(0,o[0].length),u.hasOwnProperty(o[0])&&(e=u[o[0]][2],h=u[o[0]][1],v(l,c,i)),r=r.slice(c.length);return l}if(r&&"object"===s(r)&&r.hasOwnProperty("date"))return r}function v(n,t){var i,u="";for(f(t).lastIndex=0;i=f(t).exec(t.inputFormat);)"d"===i[0].charAt(0)?u+=r(n.getDate(),i[0].length):"m"===i[0].charAt(0)?u+=r(n.getMonth()+1,i[0].length):"yyyy"===i[0]?u+=n.getFullYear().toString():"y"===i[0].charAt(0)&&(u+=r(n.getYear(),i[0].length));return u}function l(n,t){var r=0,o,i,u=0,e;for(f(t).lastIndex=0;i=f(t).exec(t.inputFormat);)if(e=new RegExp("\\d+$").exec(i[0]),u=e?parseInt(e[0]):i[0].length,r+=u,n<=r){o=i;i=f(t).exec(t.inputFormat);break}return{targetMatchIndex:r-u,nextMatch:i,targetMatch:o}}var e=i(1),y=e.dependencyLib,p=i(0),u={d:["[1-9]|[12][0-9]|3[01]",Date.prototype.setDate,"day",Date.prototype.getDate],dd:["0[1-9]|[12][0-9]|3[01]",Date.prototype.setDate,"day",function(){return r(Date.prototype.getDate.call(this),2)}],ddd:[""],dddd:[""],m:["[1-9]|1[012]",Date.prototype.setMonth,"month",function(){return Date.prototype.getMonth.call(this)+1}],mm:["0[1-9]|1[012]",Date.prototype.setMonth,"month",function(){return r(Date.prototype.getMonth.call(this)+1,2)}],mmm:[""],mmmm:[""],yy:["[0-9]{2}",Date.prototype.setFullYear,"year",function(){return r(Date.prototype.getFullYear.call(this),2)}],yyyy:["[0-9]{4}",Date.prototype.setFullYear,"year",function(){return r(Date.prototype.getFullYear.call(this),4)}],h:["[1-9]|1[0-2]",Date.prototype.setHours,"hours",Date.prototype.getHours],hh:["0[1-9]|1[0-2]",Date.prototype.setHours,"hours",function(){return r(Date.prototype.getHours.call(this),2)}],hx:[function(n){return"[0-9]{".concat(n,"}")},Date.prototype.setHours,"hours",function(){return Date.prototype.getHours}],H:["1?[0-9]|2[0-3]",Date.prototype.setHours,"hours",Date.prototype.getHours],HH:["0[0-9]|1[0-9]|2[0-3]",Date.prototype.setHours,"hours",function(){return r(Date.prototype.getHours.call(this),2)}],Hx:[function(n){return"[0-9]{".concat(n,"}")},Date.prototype.setHours,"hours",function(n){return function(){return r(Date.prototype.getHours.call(this),n)}}],M:["[1-5]?[0-9]",Date.prototype.setMinutes,"minutes",Date.prototype.getMinutes],MM:["0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]",Date.prototype.setMinutes,"minutes",function(){return r(Date.prototype.getMinutes.call(this),2)}],s:["[1-5]?[0-9]",Date.prototype.setSeconds,"seconds",Date.prototype.getSeconds],ss:["0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]",Date.prototype.setSeconds,"seconds",function(){return r(Date.prototype.getSeconds.call(this),2)}],l:["[0-9]{3}",Date.prototype.setMilliseconds,"milliseconds",function(){return r(Date.prototype.getMilliseconds.call(this),3)}],L:["[0-9]{2}",Date.prototype.setMilliseconds,"milliseconds",function(){return r(Date.prototype.getMilliseconds.call(this),2)}],t:["[ap]"],tt:["[ap]m"],T:["[AP]"],TT:["[AP]M"],Z:[""],o:[""],S:[""]},h={isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};e.extendAliases({datetime:{mask:function(n){return n.numericInput=!1,u.S=n.i18n.ordinalSuffix.join("|"),n.inputFormat=h[n.inputFormat]||n.inputFormat,n.displayFormat=h[n.displayFormat]||n.displayFormat||n.inputFormat,n.outputFormat=h[n.outputFormat]||n.outputFormat||n.inputFormat,n.placeholder=""!==n.placeholder?n.placeholder:n.inputFormat.replace(/[[\]]/,""),n.regex=c(n.inputFormat,void 0,n),n.min=o(n.min,n.inputFormat,n),n.max=o(n.max,n.inputFormat,n),null},placeholder:"",inputFormat:"isoDateTime",displayFormat:void 0,outputFormat:void 0,min:null,max:null,skipOptionalPartCharacter:"",i18n:{dayNames:["Mon","Tue","Wed","Thu","Fri","Sat","Sun","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],ordinalSuffix:["st","nd","rd","th"]},preValidation:function(n,t,i,r,f,e,o,s){var h,c;return s?!0:isNaN(i)&&n[t]!==i&&(h=l(t,f),h.nextMatch&&h.nextMatch[0]===i&&1<h.targetMatch[0].length&&(c=u[h.targetMatch[0]][0],new RegExp(c).test("0"+n[t-1])))?(n[t]=n[t-1],n[t-1]="0",{fuzzy:!0,buffer:n,refreshFromBuffer:{start:t-1,end:t+1},pos:t+1}):!0},postValidation:function(n,t,i,r,f,e,s){var h,y,p,a,v;return s?!0:!1===r?(h=l(t+1,f),h.targetMatch&&h.targetMatchIndex===t&&1<h.targetMatch[0].length&&void 0!==u[h.targetMatch[0]]&&(y=u[h.targetMatch[0]][0],new RegExp(y).test("0"+i))?{insert:[{pos:t,c:"0"},{pos:t+1,c:i}],pos:t+1}:r):((r.fuzzy&&(n=r.buffer,t=r.pos),h=l(t,f),h.targetMatch&&h.targetMatch[0]&&void 0!==u[h.targetMatch[0]])&&(y=u[h.targetMatch[0]][0],p=n.slice(h.targetMatchIndex,h.targetMatchIndex+h.targetMatch[0].length),!1===new RegExp(y).test(p.join(""))&&2===h.targetMatch[0].length&&e.validPositions[h.targetMatchIndex]&&e.validPositions[h.targetMatchIndex+1]&&(e.validPositions[h.targetMatchIndex+1].input="0")),a=r,v=o(n.join(""),f.inputFormat,f),a&&v.date.getTime()==v.date.getTime()&&(a=w(v,a),a=a&&b(v,f)),t&&a&&r.pos!==t?{buffer:c(f.inputFormat,v,f).split(""),refreshFromBuffer:{start:t,end:r.pos}}:a)},onKeyDown:function(n,t,i,r){var u=this;n.ctrlKey&&n.keyCode===p.RIGHT&&(this.inputmask._valueSet(v(new Date,r)),y(this).trigger("setvalue"))},onUnMask:function(n,t,i){return t?c(i.outputFormat,o(n,i.inputFormat,i),i,!0):t},casing:function(n,t){return 0==t.nativeDef.indexOf("[ap]")?n.toLowerCase():0==t.nativeDef.indexOf("[AP]")?n.toUpperCase():n},onBeforeMask:function(n,t){return"[object Date]"===Object.prototype.toString.call(n)&&(n=v(n,t)),n},insertMode:!1,shiftPositions:!1,keepStatic:!1,inputmode:"numeric"}});n.exports=e},function(n,t,i){"use strict";function o(n,t){for(var u="",i=0;i<n.length;i++)u+=r.prototype.definitions[n.charAt(i)]||t.definitions[n.charAt(i)]||t.optionalmarker[0]===n.charAt(i)||t.optionalmarker[1]===n.charAt(i)||t.quantifiermarker[0]===n.charAt(i)||t.quantifiermarker[1]===n.charAt(i)||t.groupmarker[0]===n.charAt(i)||t.groupmarker[1]===n.charAt(i)||t.alternatormarker===n.charAt(i)?"\\"+n.charAt(i):n.charAt(i);return u}function e(n,t,i,r){var u,e;if(0<n.length&&0<t&&(!i.digitsOptional||r))for(u=f.inArray(i.radixPoint,n),-1===u&&(n.push(i.radixPoint),u=n.length-1),e=1;e<=t;e++)isFinite(n[u+e])||(n[u+e]="0");return n}function s(n,t){var r=0,i,u,f;if("+"===n){for(r in t.validPositions);r=parseInt(r)}for(i in t.tests)if(i=parseInt(i),r<=i)for(u=0,f=t.tests[i].length;u<f;u++)if((void 0===t.validPositions[i]||"-"===n)&&t.tests[i][u].match.def===n)return i+(void 0!==t.validPositions[i]&&"-"!==n?1:0);return r}function h(n,t){var i=-1;return f.each(t.validPositions,function(t,r){if(r&&r.match.def===n)return i=parseInt(t),!1}),i}function l(n){void 0===n.parseMinMaxOptions&&(null!==n.min&&(n.min=n.min.toString().replace(new RegExp(r.escapeRegex(n.groupSeparator),"g"),""),","===n.radixPoint&&(n.min=n.min.replace(n.radixPoint,".")),n.min=isFinite(n.min)?parseFloat(n.min):NaN,isNaN(n.min)&&(n.min=Number.MIN_VALUE)),null!==n.max&&(n.max=n.max.toString().replace(new RegExp(r.escapeRegex(n.groupSeparator),"g"),""),","===n.radixPoint&&(n.max=n.max.replace(n.radixPoint,".")),n.max=isFinite(n.max)?parseFloat(n.max):NaN,isNaN(n.max)&&(n.max=Number.MAX_VALUE)),n.parseMinMaxOptions="done")}function a(n){var r,i,t,f,u;return n.repeat=0,n.groupSeparator===n.radixPoint&&n.digits&&"0"!==n.digits&&(n.groupSeparator="."===n.radixPoint?",":","===n.radixPoint?".":"")," "===n.groupSeparator&&(n.skipOptionalPartCharacter=void 0),1<n.placeholder.length&&(n.placeholder=n.placeholder.charAt(0)),"radixFocus"===n.positionCaretOnClick&&""===n.placeholder&&(n.positionCaretOnClick="lvp"),r="0",i=n.radixPoint,!0===n.numericInput&&void 0===n.__financeInput?(r="1",n.positionCaretOnClick="radixFocus"===n.positionCaretOnClick?"lvp":n.positionCaretOnClick,n.digitsOptional=!1,isNaN(n.digits)&&(n.digits=2),n._radixDance=!1,i=","===n.radixPoint?"?":"!",""!==n.radixPoint&&void 0===n.definitions[i]&&(n.definitions[i]={},n.definitions[i].validator="["+n.radixPoint+"]",n.definitions[i].placeholder=n.radixPoint,n.definitions[i].static=!0,n.definitions[i].generated=!0)):(n.__financeInput=!1,n.numericInput=!0),t="[+]",(t+=o(n.prefix,n),""!==n.groupSeparator?(void 0===n.definitions[n.groupSeparator]&&(n.definitions[n.groupSeparator]={},n.definitions[n.groupSeparator].validator="["+n.groupSeparator+"]",n.definitions[n.groupSeparator].placeholder=n.groupSeparator,n.definitions[n.groupSeparator].static=!0,n.definitions[n.groupSeparator].generated=!0),t+=n._mask(n)):t+="9{+}",void 0!==n.digits&&0!==n.digits)&&(u=n.digits.toString().split(","),isFinite(u[0])&&u[1]&&isFinite(u[1])?t+=i+r+"{"+n.digits+"}":(isNaN(n.digits)||0<parseInt(n.digits))&&(n.digitsOptional?(f=t+i+r+"{0,"+n.digits+"}",n.keepStatic=!0):t+=i+r+"{"+n.digits+"}")),t+=o(n.suffix,n),t+="[-]",f&&(t=[f+o(n.suffix,n)+"[-]",t]),n.greedy=!1,l(n),t}function v(n,t,i,r,u){return u._radixDance&&u.numericInput&&t!==u.negationSymbol.back&&n<=i&&(0<i||t==u.radixPoint)&&(void 0===r.validPositions[n-1]||r.validPositions[n-1].input!==u.negationSymbol.back)&&(n-=1),n}function c(n,t,i,r,u){var f=t.buffer?t.buffer.indexOf(u.radixPoint):-1,e=-1!==f&&new RegExp("[0-9-]").test(n);return u._radixDance&&e&&null==t.validPositions[f]?{insert:{pos:f===i?f+1:f,c:u.radixPoint},pos:i}:e}function y(n,t){var f=new RegExp("(^"+(""!==t.negationSymbol.front?r.escapeRegex(t.negationSymbol.front)+"?":"")+r.escapeRegex(t.prefix)+")(.*)("+r.escapeRegex(t.suffix)+(""!=t.negationSymbol.back?r.escapeRegex(t.negationSymbol.back)+"?":"")+"$)").exec(n.slice().reverse().join("")),u=f?f[2]:"",i=!1;return u&&(u=u.split(t.radixPoint.charAt(0))[0],i=new RegExp("^[0"+t.groupSeparator+"]*").exec(u)),!(!i||!(1<i[0].length||0<i[0].length&&i[0].length<u.length))&&i}var r=i(1),f=r.dependencyLib,u=i(0);r.extendAliases({numeric:{mask:a,_mask:function(n){return"("+n.groupSeparator+"999){+|1}"},digits:"*",digitsOptional:!0,enforceDigitsOnBlur:!1,radixPoint:".",positionCaretOnClick:"radixFocus",_radixDance:!0,groupSeparator:"",allowMinus:!0,negationSymbol:{front:"-",back:""},prefix:"",suffix:"",min:null,max:null,step:1,unmaskAsNumber:!1,roundingFN:Math.round,inputmode:"numeric",shortcuts:{k:"000",m:"000000"},placeholder:"0",greedy:!1,rightAlign:!0,insertMode:!0,autoUnmask:!1,skipOptionalPartCharacter:"",definitions:{0:{validator:c},1:{validator:c,definitionSymbol:"9"},"+":{validator:function(n,t,i,r,u){return u.allowMinus&&("-"===n||n===u.negationSymbol.front)}},"-":{validator:function(n,t,i,r,u){return u.allowMinus&&n===u.negationSymbol.back}}},preValidation:function(n,t,i,r,u,e,o,c){var y,p,a,l,w;if(!1!==u.__financeInput&&i===u.radixPoint)return!1;if(y=u.shortcuts&&u.shortcuts[i]){if(1<y.length)for(p=[],a=0;a<y.length;a++)p.push({pos:t+a,c:y[a],strict:!1});return{insert:p}}if(l=f.inArray(u.radixPoint,n),w=t,t=v(t,i,l,e,u),"-"===i||i===u.negationSymbol.front){if(!0!==u.allowMinus)return!1;var b=!1,k=h("+",e),d=h("-",e);return-1!==k&&(b=[k,d]),!1!==b?{remove:b,caret:w}:{insert:[{pos:s("+",e),c:u.negationSymbol.front,fromIsValid:!0},{pos:s("-",e),c:u.negationSymbol.back,fromIsValid:void 0}],caret:w+u.negationSymbol.back.length}}if(c)return!0;if(-1!==l&&!0===u._radixDance&&!1===r&&i===u.radixPoint&&void 0!==u.digits&&(isNaN(u.digits)||0<parseInt(u.digits))&&l!==t)return{caret:u._radixDance&&t===l-1?l+1:l};if(!1===u.__financeInput)if(r){if(u.digitsOptional)return{rewritePosition:o.end};if(!u.digitsOptional){if(o.begin>l&&o.end<=l)return i===u.radixPoint?{insert:{pos:l+1,c:"0",fromIsValid:!0},rewritePosition:l}:{rewritePosition:l+1};if(o.begin<l)return{rewritePosition:o.begin-1}}}else if(!u.showMaskOnHover&&!u.showMaskOnFocus&&!u.digitsOptional&&0<u.digits&&""===this.inputmask.__valueGet.call(this))return{rewritePosition:l};return{rewritePosition:t}},postValidation:function(n,t,i,r,u,e,o){if(!1===r)return r;if(o)return!0;if(null!==u.min||null!==u.max){var s=u.onUnMask(n.slice().reverse().join(""),void 0,f.extend({},u,{unmaskAsNumber:!0}));if(null!==u.min&&s<u.min&&(s.toString().length>=u.min.toString().length||s<0)||null!==u.max&&s>u.max)return!1}return r},onUnMask:function(n,t,i){if(""===t&&!0===i.nullable)return t;var u=n.replace(i.prefix,"");return u=u.replace(i.suffix,""),u=u.replace(new RegExp(r.escapeRegex(i.groupSeparator),"g"),""),""!==i.placeholder.charAt(0)&&(u=u.replace(new RegExp(i.placeholder.charAt(0),"g"),"0")),i.unmaskAsNumber?(""!==i.radixPoint&&-1!==u.indexOf(i.radixPoint)&&(u=u.replace(r.escapeRegex.call(this,i.radixPoint),".")),u=u.replace(new RegExp("^"+r.escapeRegex(i.negationSymbol.front)),"-"),u=u.replace(new RegExp(r.escapeRegex(i.negationSymbol.back)+"$"),""),Number(u)):u},isComplete:function(n,t){var i=(t.numericInput?n.slice().reverse():n).join("");return i=i.replace(new RegExp("^"+r.escapeRegex(t.negationSymbol.front)),"-"),i=i.replace(new RegExp(r.escapeRegex(t.negationSymbol.back)+"$"),""),i=i.replace(t.prefix,""),i=i.replace(t.suffix,""),i=i.replace(new RegExp(r.escapeRegex(t.groupSeparator)+"([0-9]{3})","g"),"$1"),","===t.radixPoint&&(i=i.replace(r.escapeRegex(t.radixPoint),".")),isFinite(i)},onBeforeMask:function(n,t){var i=t.radixPoint||",",f,s,h;isFinite(t.digits)&&(t.digits=parseInt(t.digits));"number"!=typeof n&&"number"!==t.inputType||""===i||(n=n.toString().replace(".",i));var o=n.split(i),c=o[0].replace(/[^\-0-9]/g,""),u=1<o.length?o[1].replace(/[^0-9]/g,""):"",l=1<o.length;return n=c+(""!==u?i+u:u),f=0,""===i||(f=t.digitsOptional?t.digits<u.length?t.digits:u.length:t.digits,""===u&&t.digitsOptional)||(s=Math.pow(10,f||1),n=n.replace(r.escapeRegex(i),"."),isNaN(parseFloat(n))||(n=(t.roundingFN(parseFloat(n)*s)/s).toFixed(f)),n=n.toString().replace(".",i)),(0===t.digits&&-1!==n.indexOf(i)&&(n=n.substring(0,n.indexOf(i))),null!==t.min||null!==t.max)&&(h=n.toString().replace(i,"."),null!==t.min&&h<t.min?n=t.min.toString().replace(".",i):null!==t.max&&h>t.max&&(n=t.max.toString().replace(".",i))),e(n.toString().split(""),f,t,l).join("")},onBeforeWrite:function(n,t,i,u){function h(n,t){if(!1!==u.__financeInput||t){var i=f.inArray(u.radixPoint,n);-1!==i&&n.splice(i,1)}if(""!==u.groupSeparator)for(;-1!==(i=n.indexOf(u.groupSeparator));)n.splice(i,1);return n}var o,c=y(t,u),s,l,a,p,v,w,b;if(c&&(s=t.slice().reverse(),l=s.join("").indexOf(c[0]),s.splice(l,c[0].length),a=s.length-l,h(s),o={refreshFromBuffer:!0,buffer:s.reverse(),caret:i<a?i:a}),n)switch(n.type){case"blur":case"checkval":if(null!==u.min&&(p=u.onUnMask(t.slice().reverse().join(""),void 0,f.extend({},u,{unmaskAsNumber:!0})),null!==u.min&&p<u.min))return{refreshFromBuffer:!0,buffer:e(u.min.toString().replace(".",u.radixPoint).split(""),u.digits,u).reverse()};t[t.length-1]===u.negationSymbol.front?(v=new RegExp("(^"+(""!=u.negationSymbol.front?r.escapeRegex(u.negationSymbol.front)+"?":"")+r.escapeRegex(u.prefix)+")(.*)("+r.escapeRegex(u.suffix)+(""!=u.negationSymbol.back?r.escapeRegex(u.negationSymbol.back)+"?":"")+"$)").exec(h(t.slice(),!0).reverse().join("")),w=v?v[2]:"",0==w&&(o={refreshFromBuffer:!0,buffer:[0]})):""!==u.radixPoint&&t[0]===u.radixPoint&&(o&&o.buffer?o.buffer.shift():(t.shift(),o={refreshFromBuffer:!0,buffer:h(t)}));u.enforceDigitsOnBlur&&(o=o||{},b=o&&o.buffer||t.slice().reverse(),o.refreshFromBuffer=!0,o.buffer=e(b,u.digits,u,!0).reverse())}return o},onKeyDown:function(n,t,i,r){var h=f(this),o,s;if(n.ctrlKey)switch(n.keyCode){case u.UP:return this.inputmask.__valueSet.call(this,parseFloat(this.inputmask.unmaskedvalue())+parseInt(r.step)),h.trigger("setvalue"),!1;case u.DOWN:return this.inputmask.__valueSet.call(this,parseFloat(this.inputmask.unmaskedvalue())-parseInt(r.step)),h.trigger("setvalue"),!1}if(!n.shiftKey&&(n.keyCode===u.DELETE||n.keyCode===u.BACKSPACE||n.keyCode===u.BACKSPACE_SAFARI)&&i.begin!==t.length){if(t[n.keyCode===u.DELETE?i.begin-1:i.end]===r.negationSymbol.front)return o=t.slice().reverse(),""!==r.negationSymbol.front&&o.shift(),""!==r.negationSymbol.back&&o.pop(),h.trigger("setvalue",[o.join(""),i.begin]),!1;if(!0===r._radixDance)if(s=f.inArray(r.radixPoint,t),r.digitsOptional){if(0===s)return o=t.slice().reverse(),o.pop(),h.trigger("setvalue",[o.join(""),i.begin>=o.length?o.length:i.begin]),!1}else if(-1!==s&&(i.begin<s||i.end<s||n.keyCode===u.DELETE&&i.begin===s))return i.begin!==i.end||n.keyCode!==u.BACKSPACE&&n.keyCode!==u.BACKSPACE_SAFARI||i.begin++,o=t.slice().reverse(),o.splice(o.length-i.begin,i.begin-i.end+1),o=e(o,r.digits,r).join(""),h.trigger("setvalue",[o,i.begin>=o.length?s+1:i.begin]),!1}}},currency:{prefix:"",groupSeparator:",",alias:"numeric",digits:2,digitsOptional:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:0},percentage:{alias:"numeric",min:0,max:100,suffix:" %",digits:0,allowMinus:!1},indianns:{alias:"numeric",_mask:function(n){return"("+n.groupSeparator+"99){*|1}("+n.groupSeparator+"999){1|1}"},groupSeparator:",",radixPoint:".",placeholder:"0",digits:2,digitsOptional:!1}});n.exports=r},function(n,t,i){"use strict";function f(n){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},f(n)}function c(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function l(n,t){return!t||"object"!==f(t)&&"function"!=typeof t?a(n):t}function a(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function v(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}});t&&r(n,t)}function e(n){var t="function"==typeof Map?new Map:void 0;return e=function(n){function i(){return o(n,arguments,u(this).constructor)}if(null===n||!p(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof t){if(t.has(n))return t.get(n);t.set(n,i)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),r(i,n)},e(n)}function y(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}function o(){return o=y()?Reflect.construct:function(n,t,i){var u=[null],e,f;return u.push.apply(u,t),e=Function.bind.apply(n,u),f=new e,i&&r(f,i.prototype),f},o.apply(null,arguments)}function p(n){return-1!==Function.toString.call(n).indexOf("[native code]")}function r(n,t){return r=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},r(n,t)}function u(n){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},u(n)}function w(n){return n&&n.__esModule?n:{"default":n}}var h=w(i(1)),s;(document.head.createShadowRoot||document.head.attachShadow)&&(s=function(n){function t(){var n,f;c(this,t);n=l(this,u(t).call(this));var r=n.getAttributeNames(),e=n.attachShadow({mode:"closed"}),i=document.createElement("input");for(f in i.type="text",e.appendChild(i),r)Object.prototype.hasOwnProperty.call(r,f)&&i.setAttribute("data-inputmask-"+r[f],n.getAttribute(r[f]));return(new h.default).mask(i),i.inputmask.shadowRoot=e,n}return v(t,n),t}(e(HTMLElement)),customElements.define("input-mask",s))},function(n,t,i){"use strict";function u(n){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},u(n)}var f=i(3),r=i(1);void 0===f.fn.inputmask&&(f.fn.inputmask=function(n,t){var e,i=this[0];if(void 0===t&&(t={}),"string"==typeof n)switch(n){case"unmaskedvalue":return i&&i.inputmask?i.inputmask.unmaskedvalue():f(i).val();case"remove":return this.each(function(){this.inputmask&&this.inputmask.remove()});case"getemptymask":return i&&i.inputmask?i.inputmask.getemptymask():"";case"hasMaskedValue":return!(!i||!i.inputmask)&&i.inputmask.hasMaskedValue();case"isComplete":return!i||!i.inputmask||i.inputmask.isComplete();case"getmetadata":return i&&i.inputmask?i.inputmask.getmetadata():void 0;case"setvalue":r.setValue(i,t);break;case"option":if("string"!=typeof t)return this.each(function(){if(void 0!==this.inputmask)return this.inputmask.option(t)});if(i&&void 0!==i.inputmask)return i.inputmask.option(t);break;default:return t.alias=n,e=new r(t),this.each(function(){e.mask(this)})}else{if(Array.isArray(n))return t.alias=n,e=new r(t),this.each(function(){e.mask(this)});if("object"==u(n))return e=new r(n),void 0===n.mask&&void 0===n.alias?this.each(function(){if(void 0!==this.inputmask)return this.inputmask.option(n);e.mask(this)}):this.each(function(){e.mask(this)});if(void 0===n)return this.each(function(){e=new r(t);e.mask(this)})}})},function(n,t,i){"use strict";var r=i(6),u=i(3);r.dependencyLib===u&&i(12);n.exports=r}],i={},t.m=r,t.c=i,t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,i){var r,u;if((1&i&&(n=t(n)),8&i)||4&i&&"object"==typeof n&&n&&n.__esModule)return n;if(r=Object.create(null),t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&i&&"string"!=typeof n)for(u in n)t.d(r,u,function(t){return n[t]}.bind(null,u));return r},t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=13);var r,i});namespace("awardsCommon.widgets.formBuilderForm.frontendApi");awardsCommon.widgets.formBuilderForm.frontendApi.FieldBase=oo.CustomBase({_init:function(n){_.extend(this,n)},hide:function(){this._getSection().addClass("hiddenByFrontendApi")},show:function(){this._getSection().removeClass("hiddenByFrontendApi")},_getSection:function(){return this._throwIfFieldIsNotRendered(),this.formBuilderForm.getSection(this.model)},_getView:function(){return this._throwIfFieldIsNotRendered(),this.formBuilderForm.fieldViews[this.model.getPath()]},_$:function(n){return this._getSection().find(n)},_throwMethodIsNotSupported:function(n){throw n+" is not supported for this field type.";},_throwIfFieldIsNotRendered:function(){if(!this.model.rendered){var n=this.model.get("hiddenByParent")&&"hidden by parent field"||this.model.get("hidden")&&"hidden by category group settings"||"is not ready for this operation";throw"Field '"+this.model.get("alias")+"' "+n+".";}}});namespace("awardsCommon.widgets.formBuilderForm.frontendApi");awardsCommon.widgets.formBuilderForm.frontendApi.StatefulFieldBase=awardsCommon.widgets.formBuilderForm.frontendApi.FieldBase({_init:function(){this.changeHandlers=[]},getValue:function(){return this.model.readOnly?this._getReadOnlyValueInternal():this._getValueInternal()},setValue:function(n){var t,i;if(this.model.readOnly)throw"Field with alias '"+this.alias+"' is read-only.";if(n=this._prepareValue(n),this._throwIfValueCantBeSet(),t=this._validateValue(n),t.error)throw t.error;return this.prevValue=n,this.isSettingValueInProgress=!0,i=this._setValueInternal(n),this.isSettingValueInProgress=!1,i},onChange:function(n){if(!_.isFunction(n))throw"Handler is not a function.";if(!this.isChangeListenerAttached){var t=this,i=function(){var n=t._changeListenerInternal.bind(t);t._attachChangeListener(n);t.prevValue=t.getValue();t.internalChangeListenerFunc=n};if(this.model.rendered)i();else{this.model.once("rendered",i);this.attachChangeListenerOnFieldRenderFunc=i}this.isChangeListenerAttached=!0}this.changeHandlers.length=0;this.changeHandlers.push(n)},offChange:function(n){if(n)if(_.isFunction(n))this.changeHandlers=_(this.changeHandlers).filter(function(t){return t!=n});else throw"Handler is not a function.";else this.changeHandlers.length=0;!this.changeHandlers.length&&this.isChangeListenerAttached&&(this.internalChangeListenerFunc&&this._detachChangeListener(this.internalChangeListenerFunc),this.attachChangeListenerOnFieldRenderFunc&&this.model.off("rendered",this.attachChangeListenerOnFieldRenderFunc),this.isChangeListenerAttached=!1)},_changeListenerInternal:function(){var n,t,i,r,u;this.isSettingValueInProgress||(n=this.getValue(),t=this.prevValue,_.isEqual(t,n))||(i=_(this.changeHandlers).map(function(i){return i(t,n)}),_(i).any(function(n){return n&&n.canceled})?(this.setValue(t),r=_(i).chain().filter(function(n){return n&&n.message}).map(function(n){return n.message}).value(),u=function(n){n>=r.length||Confirmation.alert(r[n]).then(function(){u(n+1)})},u(0)):this.prevValue=n)},_validateValue:function(n){return this._getView().validateValue(n)},_prepareValue:function(n){return n},_attachChangeListener:function(){throw"Not implemented.";},_detachChangeListener:function(){throw"Not implemented.";},_getValueInternal:function(){return this._getView().getValue()},_getReadOnlyValueInternal:function(){throw"Not implemented.";},_setValueInternal:function(n){return this._getView().setValueWithoutValidation(n)},_getValueSchema:function(){return this._getView().getValueSchema()},_getComponent:function(){return this._getView().getComponent()},_throwIfValueCantBeSet:function(){}});namespace("awardsCommon.widgets.formBuilderForm.frontendApi");awardsCommon.widgets.formBuilderForm.frontendApi.ListFieldBase=awardsCommon.widgets.formBuilderForm.frontendApi.StatefulFieldBase({getTextValue:function(){return this._getTextValueInternal()}});namespace("awardsCommon.widgets.formBuilderForm.frontendApi");awardsCommon.widgets.formBuilderForm.frontendApi.SingleInputField=awardsCommon.widgets.formBuilderForm.frontendApi.StatefulFieldBase({_attachChangeListener:function(n){this._getComponent().on("blur",n)},_detachChangeListener:function(n){this._getComponent().off("blur",n)},_getReadOnlyValueInternal:function(){return this.model.get("value")}});namespace("awardsCommon.widgets.formBuilderForm.frontendApi");awardsCommon.widgets.formBuilderForm.frontendApi.AddressField=awardsCommon.widgets.formBuilderForm.frontendApi.StatefulFieldBase({onChange:function(){this._throwMethodIsNotSupported("Change")},offChange:function(){this._throwMethodIsNotSupported("Change")},_getReadOnlyValueInternal:function(){var n=this.model;return{street:n.get("street"),line2:n.get("line2"),line3:n.get("line3"),city:n.get("city"),countryCode:n.get("countryCode"),state:n.get("state"),zip:n.get("zip")}}});namespace("awardsCommon.widgets.formBuilderForm.frontendApi");awardsCommon.widgets.formBuilderForm.frontendApi.MultilineTextField=awardsCommon.widgets.formBuilderForm.frontendApi.StatefulFieldBase({_getReadOnlyValueInternal:function(){return this.model.get("value")},_attachChangeListener:function(n){var t=this._getComponent();this._isWysiwyg()?t.textEditor().on("blur",n):t.on("blur",n)},_detachChangeListener:function(n){var t=this._getComponent();this._isWysiwyg()?t.textEditor().removeListener("blur",n):t.off("blur",n)},_isWysiwyg:function(){return this._getView().isWysiwyg()}});namespace("awardsCommon.widgets.formBuilderForm.frontendApi");awardsCommon.widgets.formBuilderForm.frontendApi.DropDownListField=awardsCommon.widgets.formBuilderForm.frontendApi.ListFieldBase({_getReadOnlyValueInternal:function(){return this.model.get("selectedValueId")},_attachChangeListener:function(n){this._getComponent().on("change",n)},_detachChangeListener:function(n){this._getComponent().off("change",n)},_getTextValueInternal:function(){var n=this.getValue();return n?_(this.model.get("listValues")).findWhere({id:n}).value:""}});namespace("awardsCommon.widgets.formBuilderForm.frontendApi");awardsCommon.widgets.formBuilderForm.frontendApi.RadioListField=awardsCommon.widgets.formBuilderForm.frontendApi.ListFieldBase({clearSelection:function(){this._$(".resetRadioListSelectedValues:visible a").trigger("click",{suppressHidingFieldsConfirmation:!0,suppressChangeEvent:!0})},_getReadOnlyValueInternal:function(){return this.model.get("selectedValueId")},_attachChangeListener:function(n){this._getComponent().on("change",n)},_detachChangeListener:function(n){this._getComponent().off("change",n)},_getTextValueInternal:function(){var n=this.getValue();return n?_(this.model.get("listValues")).findWhere({id:n}).value:""}});namespace("awardsCommon.widgets.formBuilderForm.frontendApi");awardsCommon.widgets.formBuilderForm.frontendApi.CheckboxListField=awardsCommon.widgets.formBuilderForm.frontendApi.ListFieldBase({_getReadOnlyValueInternal:function(){return this.model.get("selectedValueIds")},_attachChangeListener:function(n){this._getComponent().on("change",n)},_detachChangeListener:function(n){this._getComponent().off("change",n)},_getTextValueInternal:function(){var n=this.getValue();return _(this.model.get("listValues")).filter(function(t){return _(n).contains(t.id)}).map(function(n){return n.value})}});namespace("awardsCommon.widgets.formBuilderForm.frontendApi");awardsCommon.widgets.formBuilderForm.frontendApi.DateField=awardsCommon.widgets.formBuilderForm.frontendApi.StatefulFieldBase({_getReadOnlyValueInternal:function(){return this.model.get("valueUtc").asDate()},_attachChangeListener:function(n){this._getComponent().on("select",n)},_detachChangeListener:function(n){this._getComponent().off("select",n)}});namespace("awardsCommon.widgets.formBuilderForm.frontendApi");awardsCommon.widgets.formBuilderForm.frontendApi.TableField=awardsCommon.widgets.formBuilderForm.frontendApi.StatefulFieldBase({onChange:function(){this._throwMethodIsNotSupported("Change")},onRowOpen:function(n){if(!_.isFunction(n))throw new Error("Handler is not a function.");var t=this;this._getView().on("rowOpened",function(i){n({getField:function(n){return t._validateAlias(n),t.fieldFactory.getOrCreate(n,{id:i.rowId,isEditMode:!0})}})})},offChange:function(){this._throwMethodIsNotSupported("Change")},getValue:function(){this._throwMethodIsNotSupported("getValue")},setValue:function(){this._throwMethodIsNotSupported("setValue")},hide:function(){this._getComponent().cancelCurrentRowEditIfExists();this._super("hide")},addRow:function(n){return this._getView().addRow(n)},removeRow:function(n){this._validateSortOrder(n);var t=this._getComponent();return t.removeRowAsync(t.resolveRowIdBySortOrder(n))},getRowCount:function(){return this._getView().getRowCount()},getValueInRow:function(n,t){return this._validateSortOrder(n),this._validateAlias(t),this.fieldFactory.getOrCreate(t,{id:this._getComponent().resolveRowIdBySortOrder(n)}).getValue()},_doesFieldExist:function(n){return this._getView().nestedFields.any(function(t){return t.get("alias")==n})},_validateSortOrder:function(n){if(!_.isNumber(n))throw new Error("Row index is not a number.");if(n>=this.getRowCount()||n<0)throw new Error("Row with index "+n+" doesn't exist.");},_validateAlias:function(n){if(!_.isString(n))throw new Error("Alias should be a string value.");if(!this._doesFieldExist(n))throw new Error("Field with alias '"+n+"' doesn't exist.");},_setValueInRow:function(n,t){this._validateSortOrder(n);Joi.assert(t,this._getView().rowValueSchema.required());var i=this._getComponent(),r=i.resolveRowIdBySortOrder(n);i.setValueInRow(r,t);i.updateRowFieldValues(n)}});namespace("awardsCommon.widgets.formBuilderForm.frontendApi");awardsCommon.widgets.formBuilderForm.frontendApi.FileUploadField=awardsCommon.widgets.formBuilderForm.frontendApi.StatefulFieldBase({_init:function(){this.fileUploader=this._getSection().fileUploader();this.isCaptionShown=this.model.get("showCaption")},uploadFile:function(n){if(this.getValue().mediaId)throw"File is already uploaded.";var t=this;return new Promise(function(i,r){t.fileUploader.uploadFile(n).then(function(){i(t.getValue())}).catch(r)})},getUrl:function(){return this.getValue().mediaId?this._$(".link").attr("href"):undefined},_getReadOnlyValueInternal:function(){var n=this.model,t={mediaId:n.get("mediaId")};return this.isCaptionShown&&(t.caption=n.get("caption")),t},_attachChangeListener:function(n){$(this.fileUploader).on("uploadIsFinished deleted",n)},_detachChangeListener:function(n){$(this.fileUploader).off("uploadIsFinished deleted",n)}});namespace("awardsCommon.widgets.formBuilderForm.frontendApi");awardsCommon.widgets.formBuilderForm.frontendApi.DigitalSignatureField=awardsCommon.widgets.formBuilderForm.frontendApi.FieldBase({});namespace("awardsCommon.widgets.formBuilderForm.frontendApi");awardsCommon.widgets.formBuilderForm.frontendApi.TextField=awardsCommon.widgets.formBuilderForm.frontendApi.SingleInputField({autocomplete:function(n){Joi.object({serviceUrl:Joi.string().required(),paramName:Joi.string(),transformResult:Joi.func(),onSelect:Joi.func()}).required().validate(n,{abortEarly:!1,convert:!1});this._getComponent().devbridgeAutocomplete({serviceUrl:n.serviceUrl,paramName:n.paramName,transformResult:n.transformResult,onSelect:function(t){n.onSelect(t)}})}});namespace("awardsCommon.widgets.formBuilderForm.frontendApi");awardsCommon.widgets.formBuilderForm.frontendApi.SeparatorField=awardsCommon.widgets.formBuilderForm.frontendApi.FieldBase({});namespace("awardsCommon.widgets.formBuilderForm.frontendApi");awardsCommon.widgets.formBuilderForm.frontendApi.PhoneNumberField=awardsCommon.widgets.formBuilderForm.frontendApi.SingleInputField({getSelectedCountry:function(){return this._getView().getSelectedCountryCode()},setCountry:function(n){this._getView().setCountryCode(n)}});namespace("awardsCommon.widgets.formBuilderForm.frontendApi");awardsCommon.widgets.formBuilderForm.frontendApi.ApiBase=oo.CustomBase({_init:function(n){this.formBuilderForm=$("#"+n).formBuilderForm()},getField:function(n){return this._getFieldFactory().getOrCreate(n)},_getFieldFactory:function(){return this.fieldFactory||(this.fieldFactory=this._createFieldFactory())},_createFieldFactory:function(){throw"Not implemented.";}});namespace("awardsCommon.widgets.formBuilderForm.frontendApi");awardsCommon.widgets.formBuilderForm.frontendApi.FieldFactory=oo.createClass({_create:function(n){this.formBuilderForm=n;this.cache=new Map;this.formBuilderForm.on("fieldModelDeleted",this._onFieldModelDeleted,this)},getOrCreate:function(n,t){var u=this.formBuilderForm,f=u.fieldAliasesIds[n],e,o,r,i,s;if(!f||(e=f,!_.isNullOrUndefined(t)&&(o=t.id,e=_(u.fieldModels).chain().keys().find(function(n){var i=t.isEditMode?"_inEditMode":"";return n.endsWith("["+o+"]_"+f+i)}).value(),!e)))return undefined;if(r=u.fieldModels[e],i=this.cache.get(r),i)return i;if(s={formBuilderForm:u,id:f,alias:n,rowId:o,model:r},i=this._createFieldApi(r,s),i)return this.cache.set(r,i),i;throw new Error("Field of type '"+r.get("typeName")+"' is not supported.");},_createFieldApi:function(n,t){return n.isText()?new awardsCommon.widgets.formBuilderForm.frontendApi.TextField(t):n.isEmail()||n.isUrl()||n.isImisNumber()||n.isNumber()?new awardsCommon.widgets.formBuilderForm.frontendApi.SingleInputField(t):n.isPhoneNumber()?new awardsCommon.widgets.formBuilderForm.frontendApi.PhoneNumberField(t):n.isAddress()?new awardsCommon.widgets.formBuilderForm.frontendApi.AddressField(t):n.isMultilineText()?new awardsCommon.widgets.formBuilderForm.frontendApi.MultilineTextField(t):n.isDropDownList()?new awardsCommon.widgets.formBuilderForm.frontendApi.DropDownListField(t):n.isRadioList()?new awardsCommon.widgets.formBuilderForm.frontendApi.RadioListField(t):n.isCheckBoxList()?new awardsCommon.widgets.formBuilderForm.frontendApi.CheckboxListField(t):n.isDate()?new awardsCommon.widgets.formBuilderForm.frontendApi.DateField(t):n.isDigitalSignature()?new awardsCommon.widgets.formBuilderForm.frontendApi.DigitalSignatureField(t):n.isTable()?(t.fieldFactory=this.iface,new awardsCommon.widgets.formBuilderForm.frontendApi.TableField(t)):n.isFileUpload()?new awardsCommon.widgets.formBuilderForm.frontendApi.FileUploadField(t):n.isSeparator()?new awardsCommon.widgets.formBuilderForm.frontendApi.SeparatorField(t):undefined},_onFieldModelDeleted:function(n){this.cache.delete(n)}})